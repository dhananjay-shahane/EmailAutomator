{"file_contents":{"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# Email-to-LAS Processing Automation System\n\n## Overview\n\nThis is a full-stack web application that automates the processing of LAS (Log ASCII Standard) files through email workflows. The system monitors incoming emails, uses AI to interpret processing requests, executes appropriate scripts via MCP (Model Context Protocol), and returns generated visualizations to the sender. It features a React-based dashboard for monitoring system status, processing queues, and email logs in real-time.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React 18 with TypeScript and Vite for development\n- **UI Components**: Radix UI primitives with shadcn/ui component library\n- **Styling**: Tailwind CSS with custom CSS variables for theming\n- **State Management**: TanStack Query for server state and caching\n- **Routing**: Wouter for lightweight client-side routing\n- **Real-time Updates**: WebSocket connection for live dashboard updates\n\n### Backend Architecture\n- **Runtime**: Node.js with Express.js framework\n- **Language**: TypeScript with ES modules\n- **API Design**: RESTful endpoints with JSON responses\n- **Real-time Communication**: WebSocket server for broadcasting updates\n- **Error Handling**: Global error middleware with structured error responses\n- **Development**: Hot module replacement via Vite middleware\n\n### Data Storage Solutions\n- **Storage System**: JSON file-based storage system\n- **Data Location**: `data/storage.json` in the project directory\n- **Automatic Persistence**: Data is automatically saved and loaded from JSON files\n- **No Database Required**: Simplified setup without PostgreSQL dependencies\n- **Type Safety**: Zod schemas for runtime type validation\n\n### Email Processing Pipeline\n- **Email Monitoring**: IMAP connection for real-time email fetching\n- **Content Parsing**: Mailparser for extracting email content and attachments\n- **SMTP Integration**: Nodemailer for sending processed results\n- **Processing States**: Tracked through database (received, processing, completed, error)\n\n### AI/LLM Integration\n- **LLM Service**: Ollama integration (llama3.2:1b model) via HTTP API\n- **Langchain AI Agent Service**: Advanced AI agent using Langchain framework with MCP server integration\n- **Intent Detection**: AI-powered analysis of email content and user queries to determine required scripts and tools\n- **Confidence Scoring**: LLM provides confidence ratings for processing decisions\n- **Structured Responses**: JSON-formatted LLM outputs for reliable parsing\n- **Multi-step Agent Processing**: Langchain agents can perform complex multi-step reasoning and tool selection\n\n### MCP (Model Context Protocol) Integration\n- **Resource Management**: Dynamic loading and management of LAS files, scripts, and tools\n- **Script Execution**: Automated execution of Python scripts for data analysis\n- **Tool Orchestration**: Coordinated use of specialized tools (depth_plotter, gamma_analyzer, etc.)\n- **Output Generation**: PNG file generation with timestamp-based organization\n\n### Authentication and Authorization\n- **User Management**: Basic user authentication with hashed passwords\n- **Session Management**: PostgreSQL-backed sessions for persistent login\n- **API Security**: Middleware-based request validation and error handling\n\n## External Dependencies\n\n### Core Framework Dependencies\n- **express**: Web application framework for the backend API\n- **vite**: Build tool and development server for the frontend\n- **zod**: Runtime type validation and schema definition for data integrity\n- **fs/promises**: Node.js file system operations for JSON storage\n\n### UI and Frontend Libraries\n- **@radix-ui/***: Comprehensive set of accessible UI primitives\n- **@tanstack/react-query**: Server state management and caching\n- **wouter**: Lightweight routing for React applications\n- **tailwindcss**: Utility-first CSS framework\n- **class-variance-authority**: Utility for managing component variants\n\n### Email Processing\n- **imap**: IMAP client for email monitoring and fetching\n- **nodemailer**: SMTP client for sending emails\n- **mailparser**: Email content parsing and attachment handling\n\n### AI/ML Integration\n- **axios**: HTTP client for LLM API communication\n- **ollama**: Local LLM inference engine (external service)\n- **langchain**: Framework for developing applications with language models\n- **langchain-mcp-adapters**: Model Context Protocol adapters for Langchain integration\n- **langchain-openai**: OpenAI integration for Langchain\n- **langchain-anthropic**: Anthropic Claude integration for Langchain\n\n### Development and Build Tools\n- **typescript**: Static type checking and enhanced development experience\n- **esbuild**: Fast bundling for production builds\n- **tsx**: TypeScript execution for development\n- **postcss**: CSS processing and optimization\n\n### Utility Libraries\n- **date-fns**: Date manipulation and formatting\n- **zod**: Runtime type validation and schema definition\n- **clsx**: Conditional CSS class management\n- **nanoid**: Unique ID generation for entities","size_bytes":5119},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        success: \"var(--success)\",\n        warning: \"var(--warning)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2825},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":971},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"â€¦\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2066},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { EmailService } from \"./services/emailService\";\nimport { LLMService } from \"./services/llmService\";\nimport { langchainLlmService } from \"./services/langchainLlmService\";\nimport { MCPService } from \"./services/mcpService\";\nimport { WebSocketServer } from 'ws';\nimport { insertEmailLogSchema } from \"@shared/schema\";\n\nconst emailService = new EmailService();\nconst llmService = new LLMService();\nconst mcpService = new MCPService();\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  const httpServer = createServer(app);\n  \n  // WebSocket for real-time updates\n  const wss = new WebSocketServer({ \n    server: httpServer,\n    path: '/api/ws' // Use a specific path to avoid conflicts with Vite's WebSocket\n  });\n  \n  wss.on('connection', (ws) => {\n    console.log('WebSocket client connected');\n    \n    ws.on('close', () => {\n      console.log('WebSocket client disconnected');\n    });\n  });\n\n  // Broadcast to all connected clients\n  const broadcast = (data: any) => {\n    wss.clients.forEach(client => {\n      if (client.readyState === 1) { // OPEN\n        client.send(JSON.stringify(data));\n      }\n    });\n  };\n\n  // Dashboard data endpoint\n  app.get(\"/api/dashboard\", async (req, res) => {\n    try {\n      const [emailLogs, systemStatus] = await Promise.all([\n        storage.getEmailLogs(10),\n        storage.getSystemStatus(),\n      ]);\n\n      const stats = {\n        processedToday: emailLogs.filter(log => {\n          const today = new Date();\n          const logDate = new Date(log.createdAt);\n          return logDate.toDateString() === today.toDateString();\n        }).length,\n        totalProcessed: emailLogs.length,\n        successRate: emailLogs.length > 0 \n          ? (emailLogs.filter(log => log.status === 'completed').length / emailLogs.length) * 100 \n          : 0,\n      };\n\n      res.json({\n        systemStatus,\n        emailLogs,\n        stats,\n      });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch dashboard data\" });\n    }\n  });\n\n  // Email logs endpoint\n  app.get(\"/api/email-logs\", async (req, res) => {\n    try {\n      const limit = parseInt(req.query.limit as string) || 50;\n      const logs = await storage.getEmailLogs(limit);\n      res.json(logs);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch email logs\" });\n    }\n  });\n\n  // System status endpoint\n  app.get(\"/api/system-status\", async (req, res) => {\n    try {\n      const status = await storage.getSystemStatus();\n      res.json(status);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch system status\" });\n    }\n  });\n\n  // Manual trigger endpoint\n  app.post(\"/api/trigger-manual\", async (req, res) => {\n    try {\n      console.log('Manual trigger initiated');\n      \n      // Update system status to show processing\n      await storage.updateSystemStatus('email_monitor', {\n        component: 'email_monitor',\n        status: 'warning',\n        metadata: { manualTrigger: true, status: 'processing' },\n      });\n\n      // Broadcast status update\n      broadcast({ type: 'status_update', component: 'email_monitor', status: 'processing' });\n\n      // Process emails\n      processEmails();\n\n      res.json({ message: \"Manual trigger initiated\" });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to trigger manual process\" });\n    }\n  });\n\n  // Test connections endpoint\n  app.post(\"/api/test-connections\", async (req, res) => {\n    try {\n      // Extract LLM config from request if provided\n      const { llmConfig } = req.body;\n      \n      const [emailTest, llmTest, mcpTest] = await Promise.all([\n        emailService.testConnection(),\n        llmService.testConnection(llmConfig),\n        mcpService.testConnection(),\n      ]);\n\n      // Update system statuses\n      await storage.updateSystemStatus('email_monitor', {\n        component: 'email_monitor',\n        status: emailTest ? 'online' : 'offline',\n        metadata: { lastTest: new Date().toISOString() },\n      });\n\n      // Don't override configured status unless specifically testing\n      const currentLlmStatus = await storage.getSystemStatus();\n      const currentLlm = currentLlmStatus.find(s => s.component === 'llm');\n      \n      // Only update status if not configured, or if it was already offline\n      const shouldUpdateStatus = !(currentLlm?.metadata as any)?.configured || currentLlm?.status === 'offline';\n      \n      if (shouldUpdateStatus) {\n        await storage.updateSystemStatus('llm', {\n          component: 'llm',\n          status: llmTest.success ? 'online' : 'offline',\n          metadata: { \n            ...(currentLlm?.metadata || {}),\n            lastTest: new Date().toISOString(),\n            responseTime: llmTest.responseTime,\n            error: llmTest.error,\n          },\n        });\n      } else {\n        // Just update the test metadata, keep the existing status\n        await storage.updateSystemStatus('llm', {\n          component: 'llm',\n          status: currentLlm?.status || 'offline',\n          metadata: { \n            ...(currentLlm?.metadata || {}),\n            lastTest: new Date().toISOString(),\n            responseTime: llmTest.responseTime,\n            error: llmTest.error,\n          },\n        });\n      }\n\n      await storage.updateSystemStatus('mcp_server', {\n        component: 'mcp_server',\n        status: mcpTest ? 'online' : 'offline',\n        metadata: { lastTest: new Date().toISOString() },\n      });\n\n      res.json({\n        email: emailTest,\n        llm: llmTest,\n        mcp: mcpTest,\n      });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to test connections\" });\n    }\n  });\n\n  // LLM configuration endpoint\n  app.post(\"/api/llm-config\", async (req, res) => {\n    try {\n      const { provider, model, endpoint, apiKey } = req.body;\n      \n      if (!provider || !model) {\n        return res.status(400).json({ message: \"Provider and model are required\" });\n      }\n\n      // Update system status with new configuration\n      // Note: Configuration is now stored in frontend localStorage, not backend\n      await storage.updateSystemStatus('llm', {\n        component: 'llm',\n        status: 'offline', // Mark as offline initially (connection test will determine if online)\n        metadata: {\n          provider,\n          model,\n          endpoint: endpoint || null,\n          hasApiKey: !!apiKey,\n          lastConfigUpdate: new Date().toISOString(),\n          configured: true,\n          storageLocation: 'localStorage', // Indicate where config is stored\n        },\n      });\n\n      console.log(`LLM configuration updated in localStorage: ${provider} - ${model}`);\n      \n      res.json({ \n        message: \"LLM configuration saved to localStorage and system status updated\",\n        config: {\n          provider,\n          model,\n          endpoint,\n          hasApiKey: !!apiKey,\n          storageLocation: 'localStorage'\n        }\n      });\n    } catch (error) {\n      console.error('Failed to update LLM system status:', error);\n      res.status(500).json({ message: \"Failed to update LLM system status\" });\n    }\n  });\n\n  // MCP resources endpoint\n  app.get(\"/api/mcp-resources\", async (req, res) => {\n    try {\n      const resources = await mcpService.getResources();\n      res.json(resources);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch MCP resources\" });\n    }\n  });\n\n  // Process direct query endpoint\n  // Check clarification endpoint for conversational AI\n  app.post(\"/api/check-clarification\", async (req, res) => {\n    try {\n      const { query, llmConfig } = req.body;\n      \n      if (!query || typeof query !== 'string') {\n        return res.status(400).json({ message: \"Query is required\" });\n      }\n\n      // Simple keyword detection for greetings and common phrases\n      const queryLower = query.toLowerCase().trim();\n      const greetingKeywords = [\n        'hi', 'hello', 'hey', 'greetings', 'good morning', 'good afternoon', 'good evening',\n        'how are you', 'what\\'s up', 'thanks', 'thank you', 'goodbye', 'bye', 'see you',\n        'ok', 'okay', 'yes', 'no', 'test', 'testing', 'ping', 'pong'\n      ];\n\n      // Check if query is just a greeting or simple response\n      const isGreeting = greetingKeywords.some(keyword => \n        queryLower === keyword || queryLower.includes(keyword)\n      );\n\n      if (isGreeting || queryLower.length < 3) {\n        return res.json({\n          needsClarification: true,\n          confidence: 0.9,\n          suggestions: [],\n          message: \"Hello! I'm here to help with LAS file analysis. You can ask me to analyze gamma rays, resistivity, porosity, lithology, or create depth visualizations. What would you like to analyze?\"\n        });\n      }\n\n      // Check for analysis keywords to determine if this is a valid analysis request\n      const analysisKeywords = [\n        'gamma', 'ray', 'resistivity', 'porosity', 'lithology', 'depth', 'plot', 'analyze', \n        'analysis', 'visualization', 'calculate', 'las', 'well', 'log', 'formation', 'data'\n      ];\n\n      const hasAnalysisKeyword = analysisKeywords.some(keyword => \n        queryLower.includes(keyword)\n      );\n\n      // If no analysis keywords, ask for clarification\n      if (!hasAnalysisKeyword) {\n        return res.json({\n          needsClarification: true,\n          confidence: 0.3,\n          suggestions: [\n            \"Depth visualization with sample_well_01.las\", \n            \"Gamma ray analysis with production_well_02.las\",\n            \"Resistivity analysis with exploration_well_04.las\",\n            \"Porosity calculation with offshore_well_03.las\",\n            \"Lithology classification with development_well_05.las\"\n          ],\n          message: \"I'm not sure what type of analysis you need. Could you specify what you'd like to analyze?\"\n        });\n      }\n\n      // If we have analysis keywords, use LLM for more detailed processing\n      const clarificationResult = await llmService.checkClarification(query, llmConfig);\n      res.json(clarificationResult);\n    } catch (error) {\n      console.error('Clarification check error:', error);\n      res.status(500).json({ \n        needsClarification: true,\n        confidence: 0.1,\n        suggestions: [\n          \"Gamma ray analysis with production_well_02.las\",\n          \"Depth visualization with sample_well_01.las\"\n        ],\n        message: \"I'm having trouble understanding your request. Could you try rephrasing it?\"\n      });\n    }\n  });\n\n  app.post(\"/api/process-query\", async (req, res) => {\n    try {\n      const { query } = req.body;\n      \n      if (!query || typeof query !== 'string') {\n        return res.status(400).json({ message: \"Query is required\" });\n      }\n\n      console.log(`Processing direct query: ${query}`);\n      \n      // Create email log entry for the direct query\n      const emailLog = await storage.createEmailLog({\n        sender: \"direct-query@system.local\",\n        subject: \"Direct Query Processing\",\n        body: query,\n        status: 'processing',\n        llmResponse: null,\n        mcpScript: null,\n        lasFile: null,\n        outputFile: null,\n        errorMessage: null,\n        processingTime: null,\n        completedAt: null,\n      });\n\n      broadcast({ type: 'new_email', emailLog });\n\n      try {\n        // Extract LLM config from request if provided\n        const { llmConfig } = req.body;\n        \n        // Analyze query with LLM\n        console.log('Analyzing query with LLM...');\n        const llmResponse = await llmService.analyzeEmailContent(query, llmConfig);\n        \n        await storage.updateEmailLog(emailLog.id, {\n          llmResponse: llmResponse,\n          mcpScript: llmResponse.script,\n          lasFile: llmResponse.lasFile,\n        });\n\n        // Process with MCP\n        console.log(`Processing LAS file: ${llmResponse.lasFile} with script: ${llmResponse.script}`);\n        const mcpResult = await mcpService.processLASFile(\n          llmResponse.lasFile,\n          llmResponse.script,\n          llmResponse.tool\n        );\n\n        if (mcpResult.success && mcpResult.outputPath) {\n          await storage.updateEmailLog(emailLog.id, {\n            status: 'completed',\n            outputFile: mcpResult.outputPath,\n            processingTime: mcpResult.processingTime,\n            completedAt: new Date(),\n          });\n\n          console.log(`Direct query processed successfully`);\n          \n          const updatedLog = await storage.getEmailLog(emailLog.id);\n          broadcast({ type: 'email_processed', emailLog: updatedLog });\n\n          res.json({\n            id: emailLog.id,\n            query: query,\n            llmResponse: llmResponse,\n            outputFile: mcpResult.outputPath,\n            status: 'completed',\n            processingTime: mcpResult.processingTime,\n          });\n        } else {\n          throw new Error(mcpResult.error || 'MCP processing failed');\n        }\n\n      } catch (processingError) {\n        console.error('Direct query processing error:', processingError);\n        \n        await storage.updateEmailLog(emailLog.id, {\n          status: 'error',\n          errorMessage: processingError instanceof Error ? processingError.message : 'Unknown error',\n          completedAt: new Date(),\n        });\n\n        const updatedLog = await storage.getEmailLog(emailLog.id);\n        broadcast({ type: 'email_processed', emailLog: updatedLog });\n\n        res.status(500).json({\n          id: emailLog.id,\n          query: query,\n          llmResponse: null,\n          status: 'error',\n          errorMessage: processingError instanceof Error ? processingError.message : 'Unknown error',\n        });\n      }\n\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to process query\" });\n    }\n  });\n\n  // Langchain AI Agent endpoints\n  app.post(\"/api/langchain/check-clarification\", async (req, res) => {\n    try {\n      const { query, llmConfig } = req.body;\n      \n      if (!query || typeof query !== 'string') {\n        return res.status(400).json({ message: \"Query is required\" });\n      }\n\n      // Use LLM configuration from request body (frontend localStorage)\n      // If not provided, fall back to system status (backward compatibility)\n      let configToUse = llmConfig;\n      if (!configToUse) {\n        const systemStatus = await storage.getSystemStatus();\n        const llmStatus = systemStatus.find(s => s.component === 'llm');\n        configToUse = llmStatus?.metadata ? {\n          provider: llmStatus.metadata.provider,\n          model: llmStatus.metadata.model,\n          endpoint: llmStatus.metadata.endpoint,\n          apiKey: llmStatus.metadata.apiKey\n        } : undefined;\n      }\n\n      const result = await langchainLlmService.checkClarification(query, configToUse);\n      res.json(result);\n      \n    } catch (error) {\n      console.error('Langchain clarification error:', error);\n      res.status(500).json({\n        needsClarification: true,\n        confidence: 0.0,\n        suggestions: [\"Please try rephrasing your query\"],\n        message: \"Langchain agent is currently unavailable\",\n        agentPlan: null\n      });\n    }\n  });\n\n  app.post(\"/api/langchain/process-query\", async (req, res) => {\n    try {\n      const { query, llmConfig } = req.body;\n      \n      if (!query || typeof query !== 'string') {\n        return res.status(400).json({ message: \"Query is required\" });\n      }\n\n      console.log(`Processing Langchain query: ${query}`);\n      \n      // Use LLM configuration from request body (frontend localStorage)\n      // If not provided, fall back to system status (backward compatibility)\n      let configToUse = llmConfig;\n      if (!configToUse) {\n        const systemStatus = await storage.getSystemStatus();\n        const llmStatus = systemStatus.find(s => s.component === 'llm');\n        configToUse = llmStatus?.metadata ? {\n          provider: llmStatus.metadata.provider,\n          model: llmStatus.metadata.model,\n          endpoint: llmStatus.metadata.endpoint,\n          apiKey: llmStatus.metadata.apiKey\n        } : undefined;\n      }\n      \n      // Create email log entry for the Langchain query\n      const emailLog = await storage.createEmailLog({\n        sender: \"langchain-agent@system.local\",\n        subject: \"Langchain AI Agent Processing\",\n        body: query,\n        status: 'processing',\n        llmResponse: null,\n        mcpScript: null,\n        lasFile: null,\n        outputFile: null,\n        errorMessage: null,\n        processingTime: null,\n        completedAt: null,\n      });\n\n      broadcast({ type: 'new_email', emailLog });\n\n      try {\n        console.log(`Analyzing query with Langchain agent...`);\n        \n        const langchainResult = await langchainLlmService.processQuery(query, configToUse);\n        \n        // Extract relevant information from Langchain agent response\n        const finalResult = langchainResult.agentResponse?.finalResult;\n        const toolsUsed = finalResult?.mcp_tools_used || [];\n        const content = finalResult?.content || '';\n        \n        // Try to extract script/tool information from the response\n        let scriptName = null;\n        let toolName = null;\n        let lasFileName = null;\n        \n        // Debug log to see what we're working with\n        console.log('Query:', query);\n        console.log('Full langchainResult:', JSON.stringify(langchainResult, null, 2));\n        console.log('finalResult:', JSON.stringify(finalResult, null, 2));\n        console.log('Content:', content.substring(0, 200) + '...');\n        console.log('Tools used:', toolsUsed);\n        \n        // Look for depth plotter references - improved detection\n        const queryLower = query.toLowerCase();\n        const contentLower = content.toLowerCase();\n        \n        // Direct mapping from MCP tool names to actual scripts\n        const toolMappings = {\n          'create_depth_plot': { script: 'depth_visualization.py', tool: 'depth_plotter' },\n          'analyze_depth_data': { script: 'depth_visualization.py', tool: 'depth_plotter' },\n          'analyze_gamma_ray_formations': { script: 'gamma_ray_analyzer.py', tool: 'gamma_analyzer' },\n          'calculate_formation_properties': { script: 'gamma_ray_analyzer.py', tool: 'gamma_analyzer' },\n          'calculate_porosity': { script: 'porosity_calculator.py', tool: 'porosity_calculator' },\n          'analyze_reservoir_quality': { script: 'porosity_calculator.py', tool: 'porosity_calculator' }\n        };\n\n        // Check if any of the tools used have direct mappings\n        for (const tool of toolsUsed) {\n          if (toolMappings[tool]) {\n            scriptName = toolMappings[tool].script;\n            toolName = toolMappings[tool].tool;\n            console.log(`Detected MCP tool: ${tool} -> ${scriptName}`);\n            break;\n          }\n        }\n\n        // Fallback to text-based detection if no direct mapping found\n        if (!scriptName) {\n          if (queryLower.includes('depth') || contentLower.includes('depth')) {\n            scriptName = 'depth_visualization.py';\n            toolName = 'depth_plotter';\n            console.log('Detected depth request via text analysis');\n          }\n          else if (queryLower.includes('gamma') || contentLower.includes('gamma')) {\n            scriptName = 'gamma_ray_analyzer.py';\n            toolName = 'gamma_analyzer';\n            console.log('Detected gamma ray request via text analysis');\n          }\n          else if (queryLower.includes('porosity') || contentLower.includes('porosity')) {\n            scriptName = 'porosity_calculator.py';\n            toolName = 'porosity_calculator';\n            console.log('Detected porosity request via text analysis');\n          }\n        }\n        \n        // Default to the first available LAS file if not specified\n        const availableLasFiles = ['sample_well_01.las', 'production_well_02.las', 'offshore_well_03.las', 'exploration_well_04.las', 'development_well_05.las'];\n        lasFileName = availableLasFiles[0]; // Use first available\n\n        await storage.updateEmailLog(emailLog.id, {\n          llmResponse: finalResult,\n          mcpScript: scriptName,\n          lasFile: lasFileName,\n        });\n\n        if (scriptName && toolName && lasFileName) {\n          // Process with MCP using the extracted information\n          console.log(`Processing LAS file via Langchain: ${lasFileName} with script: ${scriptName}`);\n          const mcpResult = await mcpService.processLASFile(\n            lasFileName,\n            scriptName,\n            toolName\n          );\n\n          if (mcpResult.success && mcpResult.outputPath) {\n            await storage.updateEmailLog(emailLog.id, {\n              status: 'completed',\n              outputFile: mcpResult.outputPath,\n              processingTime: mcpResult.processingTime,\n              completedAt: new Date(),\n            });\n\n            console.log(`Langchain query processed successfully`);\n            \n            const updatedLog = await storage.getEmailLog(emailLog.id);\n            broadcast({ type: 'email_processed', emailLog: updatedLog });\n\n            res.json({\n              id: emailLog.id,\n              query: query,\n              agentResponse: langchainResult.agentResponse,\n              outputFile: mcpResult.outputPath,\n              status: 'completed',\n              processingTime: mcpResult.processingTime,\n            });\n          } else {\n            throw new Error(mcpResult.error || 'MCP processing failed');\n          }\n        } else {\n          throw new Error('Unable to determine appropriate script and tool from Langchain response');\n        }\n\n      } catch (processingError) {\n        console.error('Langchain query processing error:', processingError);\n        \n        await storage.updateEmailLog(emailLog.id, {\n          status: 'error',\n          errorMessage: processingError instanceof Error ? processingError.message : 'Unknown error',\n          completedAt: new Date(),\n        });\n\n        const updatedLog = await storage.getEmailLog(emailLog.id);\n        broadcast({ type: 'email_processed', emailLog: updatedLog });\n\n        res.status(500).json({\n          id: emailLog.id,\n          query: query,\n          agentResponse: null,\n          status: 'error',\n          errorMessage: processingError instanceof Error ? processingError.message : 'Unknown error',\n        });\n      }\n\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to process Langchain query\" });\n    }\n  });\n\n  // Output files endpoints\n  app.get(\"/api/output-files\", async (req, res) => {\n    try {\n      const fs = await import('fs');\n      const path = await import('path');\n      \n      const outputDir = path.resolve(process.cwd(), 'output');\n      \n      if (!fs.existsSync(outputDir)) {\n        return res.json([]);\n      }\n\n      const folders = fs.readdirSync(outputDir, { withFileTypes: true })\n        .filter(dirent => dirent.isDirectory())\n        .map(dirent => dirent.name)\n        .sort((a, b) => b.localeCompare(a)); // Sort newest first\n\n      const result = [];\n\n      for (const folderName of folders) {\n        const folderPath = path.join(outputDir, folderName);\n        const files = fs.readdirSync(folderPath, { withFileTypes: true })\n          .filter(dirent => dirent.isFile())\n          .map(dirent => {\n            const filePath = path.join(folderPath, dirent.name);\n            const stats = fs.statSync(filePath);\n            return {\n              path: path.relative(process.cwd(), filePath),\n              name: dirent.name,\n              timestamp: stats.mtime.toISOString(),\n              size: stats.size,\n              isImage: /\\.(png|jpg|jpeg|gif|bmp|svg)$/i.test(dirent.name),\n            };\n          })\n          .sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n\n        if (files.length > 0) {\n          const folderStats = fs.statSync(folderPath);\n          result.push({\n            name: folderName,\n            files: files,\n            createdAt: folderStats.birthtime.toISOString(),\n          });\n        }\n      }\n\n      res.json(result);\n    } catch (error) {\n      console.error('Error fetching output files:', error);\n      res.status(500).json({ message: \"Failed to fetch output files\" });\n    }\n  });\n\n  app.get(\"/api/output-files/view\", async (req, res) => {\n    try {\n      const { path: filePath } = req.query;\n      \n      if (!filePath || typeof filePath !== 'string') {\n        return res.status(400).json({ message: \"File path is required\" });\n      }\n\n      const fs = await import('fs');\n      const path = await import('path');\n      \n      const fullPath = path.resolve(process.cwd(), filePath);\n      \n      // Security check: ensure the file is within the output directory\n      const outputDir = path.resolve(process.cwd(), 'output');\n      if (!fullPath.startsWith(outputDir)) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n\n      if (!fs.existsSync(fullPath)) {\n        return res.status(404).json({ message: \"File not found\" });\n      }\n\n      // Determine content type based on file extension\n      const ext = path.extname(fullPath).toLowerCase();\n      const contentTypeMap: { [key: string]: string } = {\n        '.png': 'image/png',\n        '.jpg': 'image/jpeg',\n        '.jpeg': 'image/jpeg',\n        '.gif': 'image/gif',\n        '.bmp': 'image/bmp',\n        '.svg': 'image/svg+xml',\n      };\n\n      const contentType = contentTypeMap[ext] || 'application/octet-stream';\n      \n      res.setHeader('Content-Type', contentType);\n      res.setHeader('Cache-Control', 'public, max-age=3600'); // Cache for 1 hour\n      \n      const fileStream = fs.createReadStream(fullPath);\n      fileStream.pipe(res);\n      \n    } catch (error) {\n      console.error('Error serving file:', error);\n      res.status(500).json({ message: \"Failed to serve file\" });\n    }\n  });\n\n  app.get(\"/api/output-files/download\", async (req, res) => {\n    try {\n      const { path: filePath } = req.query;\n      \n      if (!filePath || typeof filePath !== 'string') {\n        return res.status(400).json({ message: \"File path is required\" });\n      }\n\n      const fs = await import('fs');\n      const path = await import('path');\n      \n      const fullPath = path.resolve(process.cwd(), filePath);\n      \n      // Security check: ensure the file is within the output directory\n      const outputDir = path.resolve(process.cwd(), 'output');\n      if (!fullPath.startsWith(outputDir)) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n\n      if (!fs.existsSync(fullPath)) {\n        return res.status(404).json({ message: \"File not found\" });\n      }\n\n      const fileName = path.basename(fullPath);\n      res.setHeader('Content-Disposition', `attachment; filename=\"${fileName}\"`);\n      res.setHeader('Content-Type', 'application/octet-stream');\n      \n      const fileStream = fs.createReadStream(fullPath);\n      fileStream.pipe(res);\n      \n    } catch (error) {\n      console.error('Error downloading file:', error);\n      res.status(500).json({ message: \"Failed to download file\" });\n    }\n  });\n\n  // Demo data endpoint for showcasing functionality\n  app.post(\"/api/create-demo-data\", async (req, res) => {\n    try {\n      // Create sample email logs for demonstration\n      const sampleLogs = [\n        {\n          sender: \"geologist@oilcompany.com\",\n          subject: \"Analyze well data for sample_well_01.las\",\n          body: \"Please analyze the gamma ray and resistivity data for sample_well_01.las file and generate depth visualization charts.\",\n          status: \"completed\" as const,\n          llmResponse: {\n            script: \"depth_visualization.py\",\n            lasFile: \"sample_well_01.las\",\n            tool: \"depth_plotter\",\n            confidence: 0.95,\n            reasoning: \"Request specifically asks for depth analysis of sample_well_01.las file\"\n          },\n          mcpScript: \"depth_visualization.py\",\n          lasFile: \"sample_well_01.las\",\n          outputFile: \"./output/sample_well_01_depth_visualization.png\",\n          errorMessage: null,\n          processingTime: 2500,\n          completedAt: new Date(),\n        },\n        {\n          sender: \"petro.engineer@upstream.com\",\n          subject: \"Gamma ray analysis needed\",\n          body: \"I need statistical analysis of gamma ray data from production_well_02.las. Please generate histogram and moving average charts.\",\n          status: \"completed\" as const,\n          llmResponse: {\n            script: \"gamma_ray_analyzer.py\",\n            lasFile: \"production_well_02.las\",\n            tool: \"gamma_analyzer\",\n            confidence: 0.88,\n            reasoning: \"Clear request for gamma ray statistical analysis\"\n          },\n          mcpScript: \"gamma_ray_analyzer.py\",\n          lasFile: \"production_well_02.las\",\n          outputFile: \"./output/production_well_02_gamma_analysis.png\",\n          errorMessage: null,\n          processingTime: 3200,\n          completedAt: new Date(),\n        },\n        {\n          sender: \"drilling@exploration.net\",\n          subject: \"Process drilling logs\",\n          body: \"Please process the latest drilling logs and provide formation evaluation.\",\n          status: \"processing\" as const,\n          llmResponse: {\n            script: \"formation_evaluator.py\",\n            lasFile: \"drilling_logs.las\",\n            tool: \"formation_evaluator\",\n            confidence: 0.75,\n            reasoning: \"Formation evaluation requested for drilling logs\"\n          },\n          mcpScript: \"formation_evaluator.py\",\n          lasFile: \"drilling_logs.las\",\n          outputFile: null,\n          errorMessage: null,\n          processingTime: null,\n          completedAt: null,\n        }\n      ];\n\n      const createdLogs = [];\n      for (const logData of sampleLogs) {\n        const log = await storage.createEmailLog(logData);\n        createdLogs.push(log);\n        broadcast({ type: 'new_email', emailLog: log });\n      }\n\n      res.json({ \n        message: \"Demo data created successfully\", \n        logsCreated: createdLogs.length,\n        logs: createdLogs \n      });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to create demo data\" });\n    }\n  });\n\n  // Email processing function\n  const processEmails = async () => {\n    try {\n      console.log('Checking for new emails...');\n      const emails = await emailService.checkForNewEmails();\n      \n      for (const email of emails) {\n        console.log(`Processing email from: ${email.from}`);\n        \n        // Create email log entry\n        const emailLog = await storage.createEmailLog({\n          sender: email.from,\n          subject: email.subject,\n          body: email.body,\n          status: 'processing',\n          llmResponse: null,\n          mcpScript: null,\n          lasFile: null,\n          outputFile: null,\n          errorMessage: null,\n          processingTime: null,\n          completedAt: null,\n        });\n\n        broadcast({ type: 'new_email', emailLog });\n\n        try {\n          // Analyze email with LLM\n          console.log('Analyzing email with LLM...');\n          const llmResponse = await llmService.analyzeEmailContent(email.body);\n          \n          await storage.updateEmailLog(emailLog.id, {\n            llmResponse: llmResponse,\n            mcpScript: llmResponse.script,\n            lasFile: llmResponse.lasFile,\n          });\n\n          // Process with MCP\n          console.log(`Processing LAS file: ${llmResponse.lasFile} with script: ${llmResponse.script}`);\n          const mcpResult = await mcpService.processLASFile(\n            llmResponse.lasFile,\n            llmResponse.script,\n            llmResponse.tool\n          );\n\n          if (mcpResult.success && mcpResult.outputPath) {\n            // Send email with attachment\n            await emailService.sendEmailWithAttachment(\n              email.from,\n              `Processing Results: ${email.subject}`,\n              `Your LAS file analysis has been completed.\\n\\nProcessing details:\\n- Script: ${llmResponse.script}\\n- Tool: ${llmResponse.tool}\\n- Processing time: ${mcpResult.processingTime}ms\\n\\nPlease find the generated visualization attached.`,\n              mcpResult.outputPath\n            );\n\n            await storage.updateEmailLog(emailLog.id, {\n              status: 'completed',\n              outputFile: mcpResult.outputPath,\n              processingTime: mcpResult.processingTime,\n              completedAt: new Date(),\n            });\n\n            console.log(`Email processed successfully for ${email.from}`);\n          } else {\n            throw new Error(mcpResult.error || 'MCP processing failed');\n          }\n\n        } catch (processingError) {\n          console.error('Email processing error:', processingError);\n          \n          await storage.updateEmailLog(emailLog.id, {\n            status: 'error',\n            errorMessage: processingError instanceof Error ? processingError.message : 'Unknown error',\n            completedAt: new Date(),\n          });\n\n          // Send error email\n          await emailService.sendEmailWithAttachment(\n            email.from,\n            `Processing Error: ${email.subject}`,\n            `There was an error processing your LAS file request.\\n\\nError details:\\n${processingError instanceof Error ? processingError.message : 'Unknown error'}\\n\\nPlease check your request and try again.`\n          );\n        }\n\n        broadcast({ type: 'email_processed', emailLog: await storage.getEmailLog(emailLog.id) });\n      }\n\n      // Update system status\n      await storage.updateSystemStatus('email_monitor', {\n        component: 'email_monitor',\n        status: 'online',\n        metadata: { \n          lastCheck: new Date().toISOString(),\n          emailsProcessed: emails.length,\n        },\n      });\n\n    } catch (error) {\n      console.error('Email monitoring error:', error);\n      \n      await storage.updateSystemStatus('email_monitor', {\n        component: 'email_monitor',\n        status: 'offline',\n        metadata: { \n          lastError: error instanceof Error ? error.message : 'Unknown error',\n          lastCheck: new Date().toISOString(),\n        },\n      });\n    }\n  };\n\n  // Start email monitoring\n  const startEmailMonitoring = () => {\n    const interval = parseInt(process.env.EMAIL_CHECK_INTERVAL || '60000'); // Default 1 minute\n    setInterval(processEmails, interval);\n    console.log(`Email monitoring started with ${interval}ms interval`);\n  };\n\n  // Initialize services\n  setTimeout(() => {\n    startEmailMonitoring();\n  }, 5000); // Start monitoring after 5 seconds\n\n  return httpServer;\n}\n","size_bytes":34704},"server/storage.ts":{"content":"import { type User, type InsertUser, type EmailLog, type InsertEmailLog, type SystemStatus, type InsertSystemStatus } from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\nimport fs from \"fs/promises\";\nimport path from \"path\";\n\nexport interface IStorage {\n  // User methods\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  \n  // Email log methods\n  getEmailLogs(limit?: number): Promise<EmailLog[]>;\n  getEmailLog(id: string): Promise<EmailLog | undefined>;\n  createEmailLog(log: InsertEmailLog): Promise<EmailLog>;\n  updateEmailLog(id: string, updates: Partial<EmailLog>): Promise<EmailLog | undefined>;\n  \n  // System status methods\n  getSystemStatus(): Promise<SystemStatus[]>;\n  updateSystemStatus(component: string, status: InsertSystemStatus): Promise<SystemStatus>;\n  \n  // Configuration methods\n  getLLMConfig(): Promise<{ provider: string; model: string; endpoint?: string; apiKey?: string } | undefined>;\n  setLLMConfig(config: { provider: string; model: string; endpoint?: string; apiKey?: string }): Promise<void>;\n}\n\ninterface JsonData {\n  users: User[];\n  emailLogs: EmailLog[];\n  systemStatuses: SystemStatus[];\n  llmConfig?: { provider: string; model: string; endpoint?: string; apiKey?: string };\n}\n\nexport class JsonFileStorage implements IStorage {\n  private dataFile: string;\n  private data: JsonData;\n\n  constructor(dataDir = \"data\") {\n    this.dataFile = path.join(dataDir, \"storage.json\");\n    this.data = {\n      users: [],\n      emailLogs: [],\n      systemStatuses: [],\n      llmConfig: undefined,\n    };\n    this.init();\n  }\n\n  private async init(): Promise<void> {\n    try {\n      // Create data directory if it doesn't exist\n      await fs.mkdir(path.dirname(this.dataFile), { recursive: true });\n      \n      // Try to read existing data\n      const fileContent = await fs.readFile(this.dataFile, \"utf-8\");\n      const parsedData = JSON.parse(fileContent, (key, value) => {\n        // Convert ISO strings back to Date objects\n        if (key === 'createdAt' || key === 'completedAt' || key === 'lastCheck') {\n          return value ? new Date(value) : null;\n        }\n        return value;\n      });\n      this.data = parsedData;\n    } catch (error) {\n      // File doesn't exist or is invalid, initialize with defaults\n      await this.initializeDefaults();\n      await this.saveData();\n    }\n  }\n\n  private async initializeDefaults(): Promise<void> {\n    // Initialize default system statuses\n    const defaultStatuses = [\n      { component: 'email_monitor', status: 'offline' as const, metadata: { lastCheck: new Date().toISOString() } },\n      { component: 'llm', status: 'offline' as const, metadata: { configured: false } },\n      { component: 'mcp_server', status: 'online' as const, metadata: { initialized: true } },\n    ];\n    \n    this.data.systemStatuses = defaultStatuses.map(status => ({\n      id: randomUUID(),\n      component: status.component,\n      status: status.status,\n      metadata: status.metadata,\n      lastCheck: new Date(),\n    }));\n  }\n\n  private async saveData(): Promise<void> {\n    const jsonString = JSON.stringify(this.data, null, 2);\n    await fs.writeFile(this.dataFile, jsonString, \"utf-8\");\n  }\n\n  async getUser(id: string): Promise<User | undefined> {\n    return this.data.users.find(user => user.id === id);\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return this.data.users.find(user => user.username === username);\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const id = randomUUID();\n    const user: User = { ...insertUser, id };\n    this.data.users.push(user);\n    await this.saveData();\n    return user;\n  }\n\n  async getEmailLogs(limit = 50): Promise<EmailLog[]> {\n    const logs = [...this.data.emailLogs]\n      .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())\n      .slice(0, limit);\n    return logs;\n  }\n\n  async getEmailLog(id: string): Promise<EmailLog | undefined> {\n    return this.data.emailLogs.find(log => log.id === id);\n  }\n\n  async createEmailLog(insertLog: InsertEmailLog): Promise<EmailLog> {\n    const id = randomUUID();\n    const log: EmailLog = {\n      ...insertLog,\n      id,\n      subject: insertLog.subject || null,\n      llmResponse: insertLog.llmResponse || null,\n      mcpScript: insertLog.mcpScript || null,\n      lasFile: insertLog.lasFile || null,\n      outputFile: insertLog.outputFile || null,\n      errorMessage: insertLog.errorMessage || null,\n      processingTime: insertLog.processingTime || null,\n      createdAt: new Date(),\n      completedAt: null,\n    };\n    this.data.emailLogs.push(log);\n    await this.saveData();\n    return log;\n  }\n\n  async updateEmailLog(id: string, updates: Partial<EmailLog>): Promise<EmailLog | undefined> {\n    const index = this.data.emailLogs.findIndex(log => log.id === id);\n    if (index === -1) return undefined;\n    \n    const updated: EmailLog = { ...this.data.emailLogs[index], ...updates };\n    this.data.emailLogs[index] = updated;\n    await this.saveData();\n    return updated;\n  }\n\n  async getSystemStatus(): Promise<SystemStatus[]> {\n    return [...this.data.systemStatuses];\n  }\n\n  async updateSystemStatus(component: string, status: InsertSystemStatus): Promise<SystemStatus> {\n    const existingIndex = this.data.systemStatuses.findIndex(s => s.component === component);\n    const id = existingIndex !== -1 ? this.data.systemStatuses[existingIndex].id : randomUUID();\n    \n    const updated: SystemStatus = {\n      id,\n      component,\n      status: status.status,\n      metadata: status.metadata || null,\n      lastCheck: new Date(),\n    };\n    \n    if (existingIndex !== -1) {\n      this.data.systemStatuses[existingIndex] = updated;\n    } else {\n      this.data.systemStatuses.push(updated);\n    }\n    \n    await this.saveData();\n    return updated;\n  }\n\n  async getLLMConfig(): Promise<{ provider: string; model: string; endpoint?: string; apiKey?: string } | undefined> {\n    return this.data.llmConfig;\n  }\n\n  async setLLMConfig(config: { provider: string; model: string; endpoint?: string; apiKey?: string }): Promise<void> {\n    this.data.llmConfig = config;\n    await this.saveData();\n  }\n}\n\nexport const storage = new JsonFileStorage();\n","size_bytes":6319},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"shared/schema.ts":{"content":"import { z } from \"zod\";\n\n// Define schemas using Zod instead of Drizzle\nexport const userSchema = z.object({\n  id: z.string(),\n  username: z.string(),\n  password: z.string(),\n});\n\nexport const emailLogSchema = z.object({\n  id: z.string(),\n  sender: z.string(),\n  subject: z.string().nullable(),\n  body: z.string(),\n  status: z.enum(['received', 'processing', 'completed', 'error']),\n  llmResponse: z.any().nullable(),\n  mcpScript: z.string().nullable(),\n  lasFile: z.string().nullable(),\n  outputFile: z.string().nullable(),\n  errorMessage: z.string().nullable(),\n  processingTime: z.number().nullable(),\n  createdAt: z.date(),\n  completedAt: z.date().nullable(),\n});\n\nexport const systemStatusSchema = z.object({\n  id: z.string(),\n  component: z.string(),\n  status: z.enum(['online', 'offline', 'warning']),\n  lastCheck: z.date(),\n  metadata: z.any().nullable(),\n});\n\nexport const insertUserSchema = userSchema.pick({\n  username: true,\n  password: true,\n});\n\nexport const insertEmailLogSchema = emailLogSchema.omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertSystemStatusSchema = systemStatusSchema.omit({\n  id: true,\n  lastCheck: true,\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = z.infer<typeof userSchema>;\nexport type EmailLog = z.infer<typeof emailLogSchema>;\nexport type InsertEmailLog = z.infer<typeof insertEmailLogSchema>;\nexport type SystemStatus = z.infer<typeof systemStatusSchema>;\nexport type InsertSystemStatus = z.infer<typeof insertSystemStatusSchema>;\n","size_bytes":1523},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport Dashboard from \"@/pages/dashboard\";\nimport LangchainAgentPage from \"@/pages/langchain-agent\";\nimport SettingsPage from \"@/pages/settings\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Dashboard} />\n      <Route path=\"/langchain-agent\" component={LangchainAgentPage} />\n      <Route path=\"/settings\" component={SettingsPage} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":946},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: hsl(222, 15%, 6%);\n  --foreground: hsl(210, 40%, 98%);\n  --card: hsl(222, 15%, 9%);\n  --card-foreground: hsl(210, 40%, 98%);\n  --popover: hsl(222, 15%, 9%);\n  --popover-foreground: hsl(210, 40%, 98%);\n  --primary: hsl(217, 91%, 60%);\n  --primary-foreground: hsl(210, 40%, 98%);\n  --secondary: hsl(217, 19%, 15%);\n  --secondary-foreground: hsl(210, 40%, 98%);\n  --muted: hsl(217, 19%, 13%);\n  --muted-foreground: hsl(215, 20%, 65%);\n  --accent: hsl(217, 19%, 15%);\n  --accent-foreground: hsl(210, 40%, 98%);\n  --destructive: hsl(0, 84%, 60%);\n  --destructive-foreground: hsl(210, 40%, 98%);\n  --border: hsl(217, 19%, 15%);\n  --input: hsl(217, 19%, 15%);\n  --ring: hsl(217, 91%, 60%);\n  --success: hsl(142, 71%, 45%);\n  --warning: hsl(38, 92%, 50%);\n  --chart-1: hsl(217, 91%, 60%);\n  --chart-2: hsl(142, 71%, 45%);\n  --chart-3: hsl(38, 92%, 50%);\n  --chart-4: hsl(0, 84%, 60%);\n  --chart-5: hsl(280, 65%, 60%);\n  --sidebar: hsl(222, 15%, 9%);\n  --sidebar-foreground: hsl(210, 40%, 98%);\n  --sidebar-primary: hsl(217, 91%, 60%);\n  --sidebar-primary-foreground: hsl(210, 40%, 98%);\n  --sidebar-accent: hsl(217, 19%, 15%);\n  --sidebar-accent-foreground: hsl(210, 40%, 98%);\n  --sidebar-border: hsl(217, 19%, 15%);\n  --sidebar-ring: hsl(217, 91%, 60%);\n  --font-sans: \"Inter\", system-ui, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: 0.5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(217, 91%, 60% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(217, 91%, 60% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(217, 91%, 60% / 0.00), 0px 1px 2px -1px hsl(217, 91%, 60% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(217, 91%, 60% / 0.00), 0px 1px 2px -1px hsl(217, 91%, 60% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(217, 91%, 60% / 0.00), 0px 2px 4px -1px hsl(217, 91%, 60% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(217, 91%, 60% / 0.00), 0px 4px 6px -1px hsl(217, 91%, 60% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(217, 91%, 60% / 0.00), 0px 8px 10px -1px hsl(217, 91%, 60% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(217, 91%, 60% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n}\n\n.dark {\n  --background: hsl(222, 15%, 6%);\n  --foreground: hsl(210, 40%, 98%);\n  --card: hsl(222, 15%, 9%);\n  --card-foreground: hsl(210, 40%, 98%);\n  --popover: hsl(222, 15%, 9%);\n  --popover-foreground: hsl(210, 40%, 98%);\n  --primary: hsl(217, 91%, 60%);\n  --primary-foreground: hsl(210, 40%, 98%);\n  --secondary: hsl(217, 19%, 15%);\n  --secondary-foreground: hsl(210, 40%, 98%);\n  --muted: hsl(217, 19%, 13%);\n  --muted-foreground: hsl(215, 20%, 65%);\n  --accent: hsl(217, 19%, 15%);\n  --accent-foreground: hsl(210, 40%, 98%);\n  --destructive: hsl(0, 84%, 60%);\n  --destructive-foreground: hsl(210, 40%, 98%);\n  --border: hsl(217, 19%, 15%);\n  --input: hsl(217, 19%, 15%);\n  --ring: hsl(217, 91%, 60%);\n  --success: hsl(142, 71%, 45%);\n  --warning: hsl(38, 92%, 50%);\n  --sidebar: hsl(222, 15%, 9%);\n  --sidebar-foreground: hsl(210, 40%, 98%);\n  --sidebar-primary: hsl(217, 91%, 60%);\n  --sidebar-primary-foreground: hsl(210, 40%, 98%);\n  --sidebar-accent: hsl(217, 19%, 15%);\n  --sidebar-accent-foreground: hsl(210, 40%, 98%);\n  --sidebar-border: hsl(217, 19%, 15%);\n  --sidebar-ring: hsl(217, 91%, 60%);\n  --font-sans: \"Inter\", system-ui, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: 0.5rem;\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n.status-indicator {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  display: inline-block;\n  margin-right: 8px;\n}\n\n.status-online {\n  background-color: var(--success);\n  box-shadow: 0 0 0 3px hsla(142, 71%, 45%, 0.2);\n}\n\n.status-warning {\n  background-color: var(--warning);\n  box-shadow: 0 0 0 3px hsla(38, 92%, 50%, 0.2);\n}\n\n.status-offline {\n  background-color: var(--destructive);\n  box-shadow: 0 0 0 3px hsla(0, 84%, 60%, 0.2);\n}\n\n.log-entry {\n  transition: background-color 0.2s ease;\n}\n\n.log-entry:hover {\n  background-color: hsl(217, 19%, 11%);\n}\n\n.metric-card {\n  background: linear-gradient(135deg, var(--card) 0%, hsl(217, 19%, 11%) 100%);\n  border: 1px solid var(--border);\n}\n\n.sidebar {\n  background: linear-gradient(180deg, var(--card) 0%, hsl(217, 19%, 7%) 100%);\n}\n","size_bytes":4361},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"server/services/emailService.ts":{"content":"import Imap from 'imap';\nimport * as nodemailer from 'nodemailer';\nimport { simpleParser } from 'mailparser';\n\nexport interface EmailConfig {\n  imapServer: string;\n  smtpServer: string;\n  smtpPort: number;\n  username: string;\n  password: string;\n  filterEmails: string[];\n}\n\nexport interface ParsedEmail {\n  from: string;\n  subject: string;\n  body: string;\n  messageId: string;\n}\n\nexport class EmailService {\n  private config: EmailConfig;\n  private imapConnection: any;\n  private smtpTransporter: any;\n\n  constructor() {\n    this.config = {\n      imapServer: process.env.IMAP_SERVER || 'imap.gmail.com',\n      smtpServer: process.env.MAIL_SERVER || 'smtp.gmail.com',\n      smtpPort: parseInt(process.env.MAIL_PORT || '587'),\n      username: process.env.SMTP_USER || process.env.EMAIL_USER || '',\n      password: process.env.SMTP_PASSWORD || process.env.EMAIL_PASSWORD || '',\n      filterEmails: (process.env.FILTER_EMAILS || process.env.FILTER_EMAIL || '').split(',').map(email => email.trim()).filter(email => email),\n    };\n\n    this.initializeSmtp();\n  }\n\n  private initializeSmtp() {\n    this.smtpTransporter = nodemailer.createTransport({\n      host: this.config.smtpServer,\n      port: this.config.smtpPort,\n      secure: false,\n      auth: {\n        user: this.config.username,\n        pass: this.config.password,\n      },\n    });\n  }\n\n  async connectImap(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      this.imapConnection = new Imap({\n        user: this.config.username,\n        password: this.config.password,\n        host: this.config.imapServer,\n        port: 993,\n        tls: true,\n        tlsOptions: { rejectUnauthorized: false },\n      });\n\n      this.imapConnection.once('ready', () => {\n        console.log('IMAP connection ready');\n        resolve();\n      });\n\n      this.imapConnection.once('error', (err: Error) => {\n        console.error('IMAP connection error:', err);\n        reject(err);\n      });\n\n      this.imapConnection.connect();\n    });\n  }\n\n  async checkForNewEmails(): Promise<ParsedEmail[]> {\n    // If no credentials are configured, return empty array instead of failing\n    if (!this.config.username || !this.config.password) {\n      console.log('Email credentials not configured, returning empty emails array');\n      return [];\n    }\n\n    if (!this.imapConnection) {\n      try {\n        await this.connectImap();\n      } catch (error) {\n        console.log('IMAP connection failed, returning empty emails array');\n        return [];\n      }\n    }\n\n    return new Promise((resolve, reject) => {\n      this.imapConnection.openBox('INBOX', false, (err: Error) => {\n        if (err) {\n          console.log('IMAP openBox failed, returning empty emails array');\n          resolve([]);\n          return;\n        }\n\n        // Search for unread emails from filter emails\n        let searchCriteria: any = ['UNSEEN'];\n        if (this.config.filterEmails.length > 0) {\n          // Create OR criteria for multiple email addresses\n          const fromCriteria = this.config.filterEmails.map(email => ['FROM', email]);\n          if (fromCriteria.length === 1) {\n            searchCriteria = [searchCriteria, fromCriteria[0]];\n          } else {\n            searchCriteria = [searchCriteria, ['OR', ...fromCriteria]];\n          }\n        }\n\n        this.imapConnection.search(searchCriteria, (err: Error, results: number[]) => {\n          if (err) {\n            reject(err);\n            return;\n          }\n\n          if (!results || results.length === 0) {\n            resolve([]);\n            return;\n          }\n\n          const emails: ParsedEmail[] = [];\n          let processed = 0;\n\n          const fetchOptions = {\n            bodies: '',\n            markSeen: true,\n          };\n\n          const fetch = this.imapConnection.fetch(results, fetchOptions);\n\n          fetch.on('message', (msg: any) => {\n            let emailData = '';\n\n            msg.on('body', (stream: any) => {\n              stream.on('data', (chunk: Buffer) => {\n                emailData += chunk.toString('utf8');\n              });\n            });\n\n            msg.on('end', async () => {\n              try {\n                const parsed = await simpleParser(emailData);\n                \n                emails.push({\n                  from: parsed.from?.text || '',\n                  subject: parsed.subject || '',\n                  body: parsed.text || '',\n                  messageId: parsed.messageId || '',\n                });\n\n                processed++;\n                if (processed === results.length) {\n                  resolve(emails);\n                }\n              } catch (parseErr) {\n                console.error('Error parsing email:', parseErr);\n                processed++;\n                if (processed === results.length) {\n                  resolve(emails);\n                }\n              }\n            });\n          });\n\n          fetch.once('error', (fetchErr: Error) => {\n            reject(fetchErr);\n          });\n\n          fetch.once('end', () => {\n            if (processed === 0) {\n              resolve([]);\n            }\n          });\n        });\n      });\n    });\n  }\n\n  async sendEmailWithAttachment(to: string, subject: string, body: string, attachmentPath?: string): Promise<void> {\n    const mailOptions: any = {\n      from: this.config.username,\n      to,\n      subject,\n      text: body,\n    };\n\n    if (attachmentPath) {\n      const filename = attachmentPath.split('/').pop() || 'analysis_result.png';\n      mailOptions.attachments = [{\n        filename: filename,\n        path: attachmentPath,\n        contentType: 'image/png'\n      }];\n    }\n\n    try {\n      await this.smtpTransporter.sendMail(mailOptions);\n      console.log(`Email sent successfully to ${to}`);\n    } catch (error) {\n      console.error('Error sending email:', error);\n      throw error;\n    }\n  }\n\n  async testConnection(): Promise<boolean> {\n    // If no credentials are configured, return false but don't throw errors\n    if (!this.config.username || !this.config.password) {\n      console.log('Email credentials not configured');\n      return false;\n    }\n\n    try {\n      await this.smtpTransporter.verify();\n      await this.connectImap();\n      return true;\n    } catch (error) {\n      console.log('Email connection test failed:', error);\n      return false;\n    }\n  }\n\n  disconnect(): void {\n    if (this.imapConnection) {\n      this.imapConnection.end();\n    }\n  }\n}\n","size_bytes":6427},"server/services/llmService.ts":{"content":"import axios from \"axios\";\nimport { mcpResourceService } from \"./mcpResourceService.js\";\n\nexport interface LLMResponse {\n  script: string;\n  lasFile: string;\n  tool: string;\n  confidence: number;\n  reasoning: string;\n}\n\nexport class LLMService {\n  private endpoint: string;\n  private model: string;\n  private provider: string;\n  private apiKey?: string;\n\n  constructor() {\n    // Set default Ollama configuration from environment or fallback\n    this.endpoint = (\n      process.env.OLLAMA_ENDPOINT || \"https://88c46355da8c.ngrok-free.app\"\n    ).replace(/\\/$/, \"\");\n    this.model = \"llama3.2:1b\";\n    this.provider = \"ollama\";\n    this.apiKey = undefined;\n  }\n\n  // Accept configuration from frontend localStorage\n  setConfig(config: {\n    provider: string;\n    model: string;\n    endpoint?: string;\n    apiKey?: string;\n  }) {\n    this.provider = config.provider;\n    this.model = config.model;\n    this.endpoint = config.endpoint ? config.endpoint.replace(/\\/$/, \"\") : \"\";\n    this.apiKey = config.apiKey;\n  }\n\n  // Use default configuration if not provided\n  private useDefaults() {\n    if (!this.endpoint || !this.provider || !this.model) {\n      this.endpoint = (\n        process.env.OLLAMA_ENDPOINT || \"https://88c46355da8c.ngrok-free.app\"\n      ).replace(/\\/$/, \"\");\n      this.model = \"llama3.2:1b\";\n      this.provider = \"ollama\";\n      this.apiKey = undefined;\n    }\n  }\n\n  async analyzeEmailContent(\n    emailBody: string,\n    config?: {\n      provider: string;\n      model: string;\n      endpoint?: string;\n      apiKey?: string;\n    },\n  ): Promise<LLMResponse> {\n    // Use provided config or defaults\n    if (config) {\n      this.setConfig(config);\n    } else {\n      this.useDefaults();\n    }\n\n    // Get MCP resources for the LLM\n    await mcpResourceService.discoverResources();\n    const resourceInfo = mcpResourceService.getResourcesForLLM();\n\n    const prompt = `Analyze this email request for LAS (Log ASCII Standard) file processing:\n\nEmail content: \"${emailBody}\"\n\n${resourceInfo}\n\nIMPORTANT: You can ONLY use these EXACT available resources:\n\nSCRIPTS (choose exactly one):\n- \"depth_visualization.py\" â†’ for depth plots, visualizations, general plotting\n- \"gamma_ray_analyzer.py\" â†’ for gamma ray analysis, statistical analysis\n- \"resistivity_analyzer.py\" â†’ for resistivity analysis and formation evaluation\n- \"porosity_calculator.py\" â†’ for porosity calculations from neutron/density logs\n- \"lithology_classifier.py\" â†’ for rock type classification and lithology analysis\n\nLAS FILES (choose exactly one):\n- \"sample_well_01.las\" â†’ for basic well data, depth analysis\n- \"production_well_02.las\" â†’ for production data, gamma ray analysis\n- \"offshore_well_03.las\" â†’ for offshore drilling data, comprehensive logs\n- \"exploration_well_04.las\" â†’ for exploration data, deep resistivity analysis\n- \"development_well_05.las\" â†’ for development data, advanced logging suite\n\nTOOLS (must match script EXACTLY):\n- \"depth_plotter\" â†’ ONLY use with depth_visualization.py\n- \"gamma_analyzer\" â†’ ONLY use with gamma_ray_analyzer.py\n- \"resistivity_analyzer\" â†’ ONLY use with resistivity_analyzer.py\n- \"porosity_calculator\" â†’ ONLY use with porosity_calculator.py\n- \"lithology_classifier\" â†’ ONLY use with lithology_classifier.py\n\nYou must respond with a JSON object containing:\n- script: Choose exactly one from: \"depth_visualization.py\", \"gamma_ray_analyzer.py\", \"resistivity_analyzer.py\", \"porosity_calculator.py\", \"lithology_classifier.py\"\n- lasFile: Choose exactly one from: \"sample_well_01.las\", \"production_well_02.las\", \"offshore_well_03.las\", \"exploration_well_04.las\", \"development_well_05.las\"\n- tool: Choose exactly one from: \"depth_plotter\", \"gamma_analyzer\", \"resistivity_analyzer\", \"porosity_calculator\", \"lithology_classifier\"\n- confidence: A number between 0-1 indicating confidence in the analysis\n- reasoning: A brief explanation of why these choices were made\n\nSTRICT mapping rules (FOLLOW EXACTLY):\n- ANY mention of \"depth_visualization.py\" â†’ depth_visualization.py + depth_plotter + sample_well_01.las\n- ANY mention of \"gamma_ray_analyzer.py\" â†’ gamma_ray_analyzer.py + gamma_analyzer + production_well_02.las\n- ANY mention of \"resistivity_analyzer.py\" â†’ resistivity_analyzer.py + resistivity_analyzer + exploration_well_04.las\n- ANY mention of \"porosity_calculator.py\" â†’ porosity_calculator.py + porosity_calculator + offshore_well_03.las\n- ANY mention of \"lithology_classifier.py\" â†’ lithology_classifier.py + lithology_classifier + development_well_05.las\n\nKeywords mapping (when no script specified) - USE FIRST MATCH FOUND:\nPriority order (most specific first):\n1. \"gamma\", \"gamma ray\", \"radioactivity\" â†’ gamma_ray_analyzer.py + gamma_analyzer + production_well_02.las\n2. \"resistivity\", \"resistance\", \"formation evaluation\" â†’ resistivity_analyzer.py + resistivity_analyzer + exploration_well_04.las\n3. \"porosity\", \"neutron\", \"density\", \"pore space\" â†’ porosity_calculator.py + porosity_calculator + offshore_well_03.las\n4. \"lithology\", \"rock type\", \"classification\", \"formation\" â†’ lithology_classifier.py + lithology_classifier + development_well_05.las\n5. \"plot\", \"depth\", \"visualization\", \"chart\" â†’ depth_visualization.py + depth_plotter + sample_well_01.las\n\nCRITICAL: If ANY of the first 4 keywords are found, DO NOT use depth_visualization.py!\nExamples:\n- \"create gamma ray plot\" = GAMMA RAY â†’ gamma_ray_analyzer.py (NOT depth_visualization.py)\n- \"resistivity visualization\" = RESISTIVITY â†’ resistivity_analyzer.py (NOT depth_visualization.py)\n- \"porosity chart\" = POROSITY â†’ porosity_calculator.py (NOT depth_visualization.py)\n\nCRITICAL RULES - FOLLOW EXACTLY:\n1. If user specifies a script name OR LAS file, USE EXACTLY what they specify!\n2. If user mentions \"lithology\" anywhere, ALWAYS use lithology_classifier.py + lithology_classifier + development_well_05.las\n3. If user mentions \"gamma\" anywhere, ALWAYS use gamma_ray_analyzer.py + gamma_analyzer + production_well_02.las\n4. If user mentions \"resistivity\" anywhere, ALWAYS use resistivity_analyzer.py + resistivity_analyzer + exploration_well_04.las\n5. If user mentions \"porosity\" anywhere, ALWAYS use porosity_calculator.py + porosity_calculator + offshore_well_03.las\n\nFORBIDDEN: Never mix different analysis types. If user asks for lithology, DO NOT give gamma ray analysis!\n\nExample responses:\n{\n  \"script\": \"gamma_ray_analyzer.py\",\n  \"lasFile\": \"production_well_02.las\",\n  \"tool\": \"gamma_analyzer\",\n  \"confidence\": 0.95,\n  \"reasoning\": \"Request mentions gamma ray, using gamma ray analysis with production well data\"\n}\n\n{\n  \"script\": \"lithology_classifier.py\",\n  \"lasFile\": \"development_well_05.las\",\n  \"tool\": \"lithology_classifier\",\n  \"confidence\": 0.95,\n  \"reasoning\": \"Request mentions lithology classification, using lithology classifier with development well data\"\n}\n\n{\n  \"script\": \"resistivity_analyzer.py\",\n  \"lasFile\": \"exploration_well_04.las\",\n  \"tool\": \"resistivity_analyzer\",\n  \"confidence\": 0.90,\n  \"reasoning\": \"Request asks for resistivity analysis, using exploration data with deep resistivity logs\"\n}\n\n{\n  \"script\": \"depth_visualization.py\",\n  \"lasFile\": \"sample_well_01.las\",\n  \"tool\": \"depth_plotter\",\n  \"confidence\": 0.85,\n  \"reasoning\": \"Request asks for basic plotting/visualization only, using sample well data\"\n}\n\nRespond only with valid JSON:`;\n\n    try {\n      const response = await axios.post(\n        `${this.endpoint}/api/generate`,\n        {\n          model: this.model,\n          prompt,\n          stream: false,\n          format: \"json\",\n        },\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          timeout: 45000,\n        },\n      );\n\n      const responseText = response.data.response;\n\n      try {\n        const parsed = JSON.parse(responseText);\n\n        // Validate required fields\n        if (!parsed.script || !parsed.lasFile || !parsed.tool) {\n          throw new Error(\"Missing required fields in LLM response\");\n        }\n\n        return {\n          script: parsed.script,\n          lasFile: parsed.lasFile,\n          tool: parsed.tool,\n          confidence: parsed.confidence || 0.5,\n          reasoning: parsed.reasoning || \"No reasoning provided\",\n        };\n      } catch (parseError) {\n        console.error(\"Failed to parse LLM response as JSON:\", responseText);\n        throw new Error(\n          `LLM returned invalid response: ${responseText.substring(0, 100)}...`,\n        );\n      }\n    } catch (error) {\n      console.error(\"LLM service error:\", error);\n      throw new Error(\"LLM service unavailable: \" + (error instanceof Error ? error.message : 'Unknown error'));\n    }\n  }\n\n  async checkClarification(\n    query: string,\n    config?: {\n      provider: string;\n      model: string;\n      endpoint?: string;\n      apiKey?: string;\n    },\n  ): Promise<{\n    needsClarification: boolean;\n    confidence: number;\n    suggestions: string[];\n    message: string;\n  }> {\n    // Use provided config or defaults\n    if (config) {\n      this.setConfig(config);\n    } else {\n      this.useDefaults();\n    }\n\n    const prompt = `Analyze this LAS analysis query and determine if it needs clarification:\n\nQuery: \"${query}\"\n\nAvailable options:\n- \"depth visualization\" using depth_visualization.py with sample_well_01.las\n- \"gamma ray analysis\" using gamma_ray_analyzer.py with production_well_02.las\n- \"resistivity analysis\" using resistivity_analyzer.py with exploration_well_04.las\n- \"porosity calculation\" using porosity_calculator.py with offshore_well_03.las\n- \"lithology classification\" using lithology_classifier.py with development_well_05.las\n\nRespond with JSON containing:\n- needsClarification: true if query is unclear or ambiguous\n- confidence: 0.0-1.0 confidence in understanding the request\n- suggestions: array of clarification options if needed\n- message: helpful response message\n\nExample responses:\n{\n  \"needsClarification\": false,\n  \"confidence\": 0.9,\n  \"suggestions\": [],\n  \"message\": \"I understand you want gamma ray analysis. Let me process that.\"\n}\n\n{\n  \"needsClarification\": true,\n  \"confidence\": 0.3,\n  \"suggestions\": [\n    \"Depth visualization with sample_well_01.las\", \n    \"Gamma ray analysis with production_well_02.las\",\n    \"Resistivity analysis with exploration_well_04.las\",\n    \"Porosity calculation with offshore_well_03.las\",\n    \"Lithology classification with development_well_05.las\"\n  ],\n  \"message\": \"I'm not sure what type of analysis you need. Could you clarify?\"\n}\n\nRespond only with valid JSON:`;\n\n    try {\n      const response = await axios.post(\n        `${this.endpoint}/api/generate`,\n        {\n          model: this.model,\n          prompt,\n          stream: false,\n          format: \"json\",\n        },\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          timeout: 30000,\n        },\n      );\n\n      const responseText = response.data.response;\n\n      try {\n        const parsed = JSON.parse(responseText);\n        return {\n          needsClarification: parsed.needsClarification || false,\n          confidence: parsed.confidence || 0.5,\n          suggestions: parsed.suggestions || [],\n          message:\n            parsed.message || \"Let me help you with your analysis request.\",\n        };\n      } catch (parseError) {\n        console.error(\n          \"Failed to parse clarification response as JSON:\",\n          responseText,\n        );\n        throw new Error(\"Invalid JSON response from LLM service\");\n      }\n    } catch (error) {\n      console.error(\"LLM clarification error:\", error);\n      throw new Error(\n        `LLM service unavailable: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n      );\n    }\n  }\n\n  async testConnection(config?: {\n    provider: string;\n    model: string;\n    endpoint?: string;\n    apiKey?: string;\n  }): Promise<{ success: boolean; responseTime?: number; error?: string }> {\n    // Use provided config or defaults\n    if (config) {\n      this.setConfig(config);\n    } else {\n      this.useDefaults();\n    }\n\n    if (!this.endpoint || !this.provider || !this.model) {\n      return {\n        success: false,\n        responseTime: 0,\n        error:\n          \"LLM not configured. Please configure provider, model, and endpoint in settings.\",\n      };\n    }\n\n    const startTime = Date.now();\n\n    try {\n      const response = await axios.post(\n        `${this.endpoint}/api/generate`,\n        {\n          model: this.model,\n          prompt: \"Test connection. Respond with: OK\",\n          stream: false,\n        },\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          timeout: 15000,\n        },\n      );\n\n      const responseTime = Date.now() - startTime;\n\n      return {\n        success: true,\n        responseTime: responseTime / 1000, // Convert to seconds\n      };\n    } catch (error) {\n      const responseTime = Date.now() - startTime;\n      return {\n        success: false,\n        responseTime: responseTime / 1000,\n        error:\n          error instanceof Error ? error.message : \"LLM service unavailable\",\n      };\n    }\n  }\n}\n","size_bytes":13076},"server/services/mcpService.ts":{"content":"import * as fs from 'fs';\nimport * as path from 'path';\nimport { spawn } from 'child_process';\n\nexport interface MCPResource {\n  name: string;\n  type: 'las_file' | 'script' | 'tool';\n  path: string;\n  size?: number;\n  lastModified?: Date;\n}\n\nexport interface MCPProcessingResult {\n  success: boolean;\n  outputPath?: string;\n  processingTime: number;\n  error?: string;\n}\n\nexport class MCPService {\n  private resourcesPath: string;\n  private outputPath: string;\n  private availableTools: string[];\n\n  constructor() {\n    this.resourcesPath = process.env.MCP_RESOURCES_PATH || './mcp_resources';\n    this.outputPath = process.env.MCP_OUTPUT_PATH || './output';\n    this.availableTools = [\n      'depth_plotter',\n      'gamma_analyzer', \n      'resistivity_analyzer',\n      'porosity_calculator',\n      'lithology_classifier'\n    ];\n\n    this.initializeDirectories();\n  }\n\n  private initializeDirectories(): void {\n    // Create directories if they don't exist\n    [this.resourcesPath, this.outputPath].forEach(dir => {\n      if (!fs.existsSync(dir)) {\n        fs.mkdirSync(dir, { recursive: true });\n      }\n    });\n\n    // Create subdirectories\n    const subdirs = ['las_files', 'scripts', 'tools'];\n    subdirs.forEach(subdir => {\n      const fullPath = path.join(this.resourcesPath, subdir);\n      if (!fs.existsSync(fullPath)) {\n        fs.mkdirSync(fullPath, { recursive: true });\n      }\n    });\n  }\n\n  async getResources(): Promise<MCPResource[]> {\n    const resources: MCPResource[] = [];\n\n    try {\n      // Get LAS files\n      const lasFilesPath = path.join(this.resourcesPath, 'las_files');\n      if (fs.existsSync(lasFilesPath)) {\n        const lasFiles = fs.readdirSync(lasFilesPath);\n        for (const file of lasFiles) {\n          if (file.endsWith('.las')) {\n            const filePath = path.join(lasFilesPath, file);\n            const stats = fs.statSync(filePath);\n            resources.push({\n              name: file,\n              type: 'las_file',\n              path: filePath,\n              size: stats.size,\n              lastModified: stats.mtime,\n            });\n          }\n        }\n      }\n\n      // Get scripts\n      const scriptsPath = path.join(this.resourcesPath, 'scripts');\n      if (fs.existsSync(scriptsPath)) {\n        const scripts = fs.readdirSync(scriptsPath);\n        for (const file of scripts) {\n          if (file.endsWith('.py')) {\n            const filePath = path.join(scriptsPath, file);\n            const stats = fs.statSync(filePath);\n            resources.push({\n              name: file,\n              type: 'script',\n              path: filePath,\n              size: stats.size,\n              lastModified: stats.mtime,\n            });\n          }\n        }\n      }\n\n      // Add available tools\n      this.availableTools.forEach(tool => {\n        resources.push({\n          name: tool,\n          type: 'tool',\n          path: `/mcp/tools/${tool}`,\n        });\n      });\n\n    } catch (error) {\n      console.error('Error getting MCP resources:', error);\n    }\n\n    return resources;\n  }\n\n  async processLASFile(\n    lasFileName: string,\n    scriptName: string,\n    toolName: string\n  ): Promise<MCPProcessingResult> {\n    const startTime = Date.now();\n\n    try {\n      // Check if LAS file exists\n      const lasFilePath = path.join(this.resourcesPath, 'las_files', lasFileName);\n      if (!fs.existsSync(lasFilePath)) {\n        return {\n          success: false,\n          processingTime: Date.now() - startTime,\n          error: `LAS file not found: ${lasFileName}`,\n        };\n      }\n\n      // Check if script exists\n      const scriptPath = path.join(this.resourcesPath, 'scripts', scriptName);\n      if (!fs.existsSync(scriptPath)) {\n        return {\n          success: false,\n          processingTime: Date.now() - startTime,\n          error: `Script not found: ${scriptName}`,\n        };\n      }\n\n      // Check if tool is available\n      if (!this.availableTools.includes(toolName)) {\n        return {\n          success: false,\n          processingTime: Date.now() - startTime,\n          error: `Tool not available: ${toolName}`,\n        };\n      }\n\n      // Create timestamped output directory with proper date formatting\n      const now = new Date();\n      const timestamp = now.toISOString().replace(/[:.]/g, '').replace(/T/, '_').slice(0, 15); // YYYY-MM-DD_HHMMSS\n      const friendlyTimestamp = `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')}_${now.getHours().toString().padStart(2, '0')}-${now.getMinutes().toString().padStart(2, '0')}-${now.getSeconds().toString().padStart(2, '0')}`;\n      const outputDir = path.join(this.outputPath, friendlyTimestamp);\n      fs.mkdirSync(outputDir, { recursive: true });\n\n      // Generate output file path\n      const outputFileName = `${path.basename(lasFileName, '.las')}_${toolName}_output.png`;\n      const outputFilePath = path.join(outputDir, outputFileName);\n\n      // Actually execute the Python script\n      await this.executeScript(scriptPath, lasFilePath, outputFilePath);\n\n      const processingTime = Date.now() - startTime;\n\n      return {\n        success: true,\n        outputPath: outputFilePath,\n        processingTime,\n      };\n\n    } catch (error) {\n      return {\n        success: false,\n        processingTime: Date.now() - startTime,\n        error: error instanceof Error ? error.message : 'Unknown processing error',\n      };\n    }\n  }\n\n  private async simulateProcessing(scriptName: string, toolName: string): Promise<void> {\n    // Simulate processing time based on tool complexity\n    const processingTimes: Record<string, number> = {\n      'depth_plotter': 1000,\n      'gamma_analyzer': 1500,\n      'resistivity_tool': 2000,\n      'porosity_calculator': 1200,\n      'lithology_detector': 2500,\n      'well_correlation': 3000,\n      'log_quality_checker': 800,\n      'formation_evaluator': 3500,\n    };\n\n    const delay = processingTimes[toolName] || 1000;\n    await new Promise(resolve => setTimeout(resolve, delay));\n  }\n\n  private async createPlaceholderPNG(outputPath: string): Promise<void> {\n    // Create a minimal PNG file (1x1 pixel transparent)\n    const pngData = Buffer.from([\n      0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A, // PNG signature\n      0x00, 0x00, 0x00, 0x0D, // IHDR chunk length\n      0x49, 0x48, 0x44, 0x52, // IHDR\n      0x00, 0x00, 0x00, 0x01, // width: 1\n      0x00, 0x00, 0x00, 0x01, // height: 1\n      0x08, 0x06, 0x00, 0x00, 0x00, // bit depth, color type, etc.\n      0x1F, 0x15, 0xC4, 0x89, // CRC\n      0x00, 0x00, 0x00, 0x0A, // IDAT chunk length\n      0x49, 0x44, 0x41, 0x54, // IDAT\n      0x78, 0x9C, 0x62, 0x00, 0x00, 0x00, 0x02, 0x00, 0x01, // compressed data\n      0xE2, 0x21, 0xBC, 0x33, // CRC\n      0x00, 0x00, 0x00, 0x00, // IEND chunk length\n      0x49, 0x45, 0x4E, 0x44, // IEND\n      0xAE, 0x42, 0x60, 0x82  // CRC\n    ]);\n\n    fs.writeFileSync(outputPath, pngData);\n  }\n\n  async getToolStatus(): Promise<{ available: number; total: number; tools: string[] }> {\n    return {\n      available: this.availableTools.length,\n      total: this.availableTools.length,\n      tools: [...this.availableTools],\n    };\n  }\n\n  private async executeScript(scriptPath: string, lasFilePath: string, outputPath: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      console.log(`Executing script: ${scriptPath} with LAS file: ${lasFilePath}`);\n      \n      const pythonProcess = spawn('uv', ['run', 'python', scriptPath, lasFilePath, outputPath], {\n        stdio: ['pipe', 'pipe', 'pipe']\n      });\n\n      let stdout = '';\n      let stderr = '';\n\n      pythonProcess.stdout.on('data', (data) => {\n        stdout += data.toString();\n        console.log(`Python stdout: ${data.toString().trim()}`);\n      });\n\n      pythonProcess.stderr.on('data', (data) => {\n        stderr += data.toString();\n        console.error(`Python stderr: ${data.toString().trim()}`);\n      });\n\n      pythonProcess.on('close', (code) => {\n        if (code === 0) {\n          console.log(`Script executed successfully: ${scriptPath}`);\n          resolve();\n        } else {\n          console.error(`Script execution failed with code ${code}`);\n          console.error(`Stderr: ${stderr}`);\n          reject(new Error(`Script execution failed with code ${code}: ${stderr}`));\n        }\n      });\n\n      pythonProcess.on('error', (error) => {\n        console.error(`Failed to start Python process: ${error.message}`);\n        reject(error);\n      });\n    });\n  }\n\n  async testConnection(): Promise<boolean> {\n    try {\n      // Test if we can access resources\n      await this.getResources();\n      return true;\n    } catch (error) {\n      console.error('MCP service test failed:', error);\n      return false;\n    }\n  }\n}\n","size_bytes":8760},"client/src/components/ActivityLog.tsx":{"content":"import { CheckCircle, Mail, AlertTriangle, ExternalLink } from \"lucide-react\";\n\ninterface EmailLog {\n  id: string;\n  sender: string;\n  subject: string;\n  body: string;\n  status: string;\n  createdAt: string;\n  processingTime: number;\n  outputFile: string;\n  errorMessage: string;\n}\n\ninterface ActivityLogProps {\n  emailLogs: EmailLog[];\n}\n\nconst getStatusIcon = (status: string) => {\n  switch (status) {\n    case 'completed':\n      return <CheckCircle className=\"h-4 w-4 text-success\" />;\n    case 'processing':\n      return <Mail className=\"h-4 w-4 text-primary\" />;\n    case 'error':\n      return <AlertTriangle className=\"h-4 w-4 text-destructive\" />;\n    default:\n      return <Mail className=\"h-4 w-4 text-muted-foreground\" />;\n  }\n};\n\nconst getStatusColor = (status: string) => {\n  switch (status) {\n    case 'completed':\n      return 'bg-success/10';\n    case 'processing':\n      return 'bg-primary/10';\n    case 'error':\n      return 'bg-destructive/10';\n    default:\n      return 'bg-muted/10';\n  }\n};\n\nconst formatTimeAgo = (dateString: string) => {\n  const date = new Date(dateString);\n  const now = new Date();\n  const diffInMinutes = Math.floor((now.getTime() - date.getTime()) / (1000 * 60));\n  \n  if (diffInMinutes < 1) return 'Just now';\n  if (diffInMinutes < 60) return `${diffInMinutes} minute${diffInMinutes === 1 ? '' : 's'} ago`;\n  \n  const diffInHours = Math.floor(diffInMinutes / 60);\n  if (diffInHours < 24) return `${diffInHours} hour${diffInHours === 1 ? '' : 's'} ago`;\n  \n  return date.toLocaleDateString();\n};\n\nexport default function ActivityLog({ emailLogs }: ActivityLogProps) {\n  return (\n    <div className=\"bg-card rounded-lg border border-border\">\n      <div className=\"p-6 border-b border-border\">\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold text-foreground\">Recent Activity</h3>\n          <button className=\"text-muted-foreground hover:text-foreground\" data-testid=\"button-view-all-logs\">\n            <ExternalLink className=\"h-4 w-4\" />\n          </button>\n        </div>\n      </div>\n      <div className=\"p-6\">\n        <div className=\"space-y-4\">\n          {emailLogs.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <Mail className=\"h-8 w-8 text-muted-foreground mx-auto mb-3\" />\n              <p className=\"text-muted-foreground\">No recent activity</p>\n            </div>\n          ) : (\n            emailLogs.slice(0, 5).map((log) => (\n              <div key={log.id} className=\"log-entry flex items-start space-x-3 p-3 rounded-md\" data-testid={`activity-log-${log.id}`}>\n                <div className={`w-8 h-8 ${getStatusColor(log.status)} rounded-full flex items-center justify-center flex-shrink-0 mt-0.5`}>\n                  {getStatusIcon(log.status)}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-medium text-foreground\">\n                    {log.status === 'completed' && 'Email processed successfully from '}\n                    {log.status === 'processing' && 'Processing email from '}\n                    {log.status === 'error' && 'Processing failed for '}\n                    <span className=\"text-primary\">{log.sender}</span>\n                  </p>\n                  {log.outputFile && (\n                    <p className=\"text-xs text-muted-foreground mt-1\">\n                      Generated: {log.outputFile.split('/').pop()}\n                    </p>\n                  )}\n                  {log.errorMessage && (\n                    <p className=\"text-xs text-destructive mt-1\">\n                      Error: {log.errorMessage}\n                    </p>\n                  )}\n                  <p className=\"text-xs text-muted-foreground\" data-testid={`text-activity-timestamp-${log.id}`}>\n                    {formatTimeAgo(log.createdAt)}\n                  </p>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4000},"client/src/components/EmailConfig.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Edit } from \"lucide-react\";\n\nexport default function EmailConfig() {\n  return (\n    <div className=\"bg-card rounded-lg border border-border\">\n      <div className=\"p-6 border-b border-border\">\n        <h3 className=\"text-lg font-semibold text-foreground\">Email Configuration</h3>\n      </div>\n      <div className=\"p-6 space-y-4\">\n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium text-foreground\">IMAP Server Status</label>\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"status-indicator status-online\"></span>\n            <span className=\"text-sm text-foreground\" data-testid=\"text-imap-server\">imap.gmail.com:993</span>\n          </div>\n        </div>\n        \n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium text-foreground\">SMTP Server Status</label>\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"status-indicator status-online\"></span>\n            <span className=\"text-sm text-foreground\" data-testid=\"text-smtp-server\">smtp.gmail.com:587</span>\n          </div>\n        </div>\n        \n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium text-foreground\">Filter Email</label>\n          <div className=\"bg-muted rounded-md px-3 py-2\">\n            <span className=\"text-sm font-mono text-foreground\" data-testid=\"text-filter-email\">dhananjayshahane24@gmail.com</span>\n          </div>\n        </div>\n        \n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium text-foreground\">Monitoring Frequency</label>\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"text-sm text-foreground\">Every</span>\n            <Select defaultValue=\"1-minute\">\n              <SelectTrigger className=\"w-32\" data-testid=\"select-frequency\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"30-seconds\">30 seconds</SelectItem>\n                <SelectItem value=\"1-minute\">1 minute</SelectItem>\n                <SelectItem value=\"5-minutes\">5 minutes</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n\n        <Button className=\"w-full bg-secondary text-secondary-foreground hover:bg-secondary/90\" data-testid=\"button-edit-config\">\n          <Edit className=\"w-4 h-4 mr-2\" />\n          Edit Configuration\n        </Button>\n      </div>\n    </div>\n  );\n}\n","size_bytes":2670},"client/src/components/LLMPanel.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { TestTubeDiagonal, Save, RefreshCw } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useState, useEffect } from \"react\";\nimport { llmConfigStorage, type LLMConfig } from \"@/lib/llmConfigStorage\";\n\ninterface LLMPanelProps {\n  status?: {\n    id: string;\n    component: string;\n    status: string;\n    lastCheck: string;\n    metadata: any;\n  };\n}\n\nconst LLM_PROVIDERS = [\n  { value: 'ollama', label: 'Ollama' },\n  { value: 'openai', label: 'OpenAI' },\n  { value: 'gemini', label: 'Google Gemini' },\n  { value: 'claude', label: 'Anthropic Claude' },\n  { value: 'mistral', label: 'Mistral AI' },\n  { value: 'cohere', label: 'Cohere' },\n  { value: 'huggingface', label: 'Hugging Face' },\n  { value: 'local', label: 'Local Model' }\n];\n\nconst OLLAMA_MODELS = [\n  'llama3.2:1b',\n  'llama3.2:3b', \n  'llama3.1:8b',\n  'llama3.1:70b',\n  'mistral:7b',\n  'codellama:7b',\n  'qwen2.5:7b',\n  'gemma2:9b',\n  'phi3:mini',\n  'llava:7b'\n];\n\nconst OPENAI_MODELS = [\n  'gpt-4o',\n  'gpt-4o-mini',\n  'gpt-4-turbo',\n  'gpt-3.5-turbo',\n  'text-davinci-003'\n];\n\nconst GEMINI_MODELS = [\n  'gemini-1.5-pro',\n  'gemini-1.5-flash',\n  'gemini-pro',\n  'gemini-pro-vision'\n];\n\nconst CLAUDE_MODELS = [\n  'claude-3-5-sonnet-20241022',\n  'claude-3-opus-20240229',\n  'claude-3-sonnet-20240229',\n  'claude-3-haiku-20240307'\n];\n\nconst MISTRAL_MODELS = [\n  'mistral-large-latest',\n  'mistral-medium-latest',\n  'mistral-small-latest',\n  'codestral-latest'\n];\n\nexport default function LLMPanel({ status }: LLMPanelProps) {\n  const { toast } = useToast();\n  const [provider, setProvider] = useState('');\n  const [selectedModel, setSelectedModel] = useState('');\n  const [endpoint, setEndpoint] = useState('');\n  const [apiKey, setApiKey] = useState('');\n  const [isConfigured, setIsConfigured] = useState(false);\n\n  const isConnected = status?.status === 'online';\n  const responseTime = status?.metadata?.responseTime || '0';\n  const successRate = 94; // This would come from historical data\n\n  // Load configuration from localStorage when component mounts\n  useEffect(() => {\n    const savedConfig = llmConfigStorage.get();\n    if (savedConfig) {\n      setProvider(savedConfig.provider);\n      setSelectedModel(savedConfig.model);\n      setEndpoint(savedConfig.endpoint || '');\n      setApiKey(savedConfig.apiKey || '');\n      setIsConfigured(true);\n    } else {\n      // Load default configuration\n      const defaultConfig = llmConfigStorage.getDefault();\n      setProvider(defaultConfig.provider);\n      setSelectedModel(defaultConfig.model);\n      setEndpoint(defaultConfig.endpoint || '');\n      setIsConfigured(false);\n    }\n  }, []);\n\n  const testConnectionMutation = useMutation({\n    mutationFn: async () => {\n      // Send current configuration for testing\n      const currentConfig = {\n        provider,\n        model: selectedModel,\n        endpoint: requiresEndpoint() ? endpoint : undefined,\n        apiKey: requiresApiKey() ? apiKey : undefined\n      };\n      \n      const response = await fetch(\"/api/test-connections\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ llmConfig: currentConfig }),\n      });\n      if (!response.ok) throw new Error(\"Failed to test connections\");\n      return response.json();\n    },\n    onSuccess: (data) => {\n      if (data.llm.success) {\n        toast({\n          title: \"LLM Connection Test Successful\",\n          description: `Response time: ${data.llm.responseTime?.toFixed(2)}s`,\n        });\n      } else {\n        toast({\n          title: \"LLM Connection Test Failed\",\n          description: data.llm.error || \"Unknown error\",\n          variant: \"destructive\",\n        });\n      }\n    },\n    onError: () => {\n      toast({\n        title: \"Test Failed\",\n        description: \"Failed to test LLM connection.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const saveConfigurationMutation = useMutation({\n    mutationFn: async (config: LLMConfig) => {\n      // Save to localStorage directly\n      llmConfigStorage.set(config);\n      \n      // Also send to backend to update system status\n      const response = await fetch('/api/llm-config', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(config)\n      });\n      if (!response.ok) throw new Error('Failed to update system status');\n      return response.json();\n    },\n    onSuccess: () => {\n      setIsConfigured(true);\n      toast({\n        title: 'Configuration Updated',\n        description: 'LLM configuration has been saved to local storage.'\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: 'Update Failed',\n        description: 'Failed to save LLM configuration: ' + error.message,\n        variant: 'destructive'\n      });\n    }\n  });\n\n  const handleUpdateConfiguration = () => {\n    if (!provider) {\n      toast({\n        title: \"Validation Error\",\n        description: \"Please select a provider\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (!selectedModel) {\n      toast({\n        title: \"Validation Error\", \n        description: \"Please select a model\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (requiresEndpoint() && !endpoint) {\n      toast({\n        title: \"Validation Error\",\n        description: \"Please enter an endpoint URL\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (requiresApiKey() && !apiKey) {\n      toast({\n        title: \"Validation Error\",\n        description: \"Please enter an API key\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    const config = {\n      provider,\n      model: selectedModel,\n      endpoint: requiresEndpoint() ? endpoint : undefined,\n      apiKey: requiresApiKey() ? apiKey : undefined\n    };\n    saveConfigurationMutation.mutate(config);\n  };\n\n  const getModelsForProvider = () => {\n    switch (provider) {\n      case 'ollama':\n        return OLLAMA_MODELS;\n      case 'openai':\n        return OPENAI_MODELS;\n      case 'gemini':\n        return GEMINI_MODELS;\n      case 'claude':\n        return CLAUDE_MODELS;\n      case 'mistral':\n        return MISTRAL_MODELS;\n      default:\n        return ['custom-model'];\n    }\n  };\n\n  const requiresApiKey = () => {\n    return provider && provider !== 'ollama' && provider !== 'local';\n  };\n\n  const requiresEndpoint = () => {\n    return provider === 'ollama' || provider === 'local';\n  };\n\n  return (\n    <div className=\"bg-card rounded-lg border border-border\">\n      <div className=\"p-6 border-b border-border\">\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold text-foreground\">LLM Integration</h3>\n          <div className=\"flex items-center gap-2\">\n            <span className={`px-2 py-1 text-xs rounded-full ${isConnected ? 'bg-success/10 text-success' : 'bg-destructive/10 text-destructive'}`}>\n              {isConnected ? 'Connected' : 'Disconnected'}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"p-6 space-y-6\">\n        {/* Setup Instructions */}\n        {!isConfigured && (\n          <div className=\"bg-muted/50 rounded-lg p-4 border border-border\">\n            <h4 className=\"text-sm font-medium text-foreground mb-2\">Setup Instructions</h4>\n            <div className=\"text-xs text-muted-foreground space-y-1\">\n              <p><strong>For Ollama:</strong> Install Ollama locally and run <code className=\"bg-muted px-1 rounded\">ollama serve</code></p>\n              <p><strong>For API Services:</strong> Get an API key from your provider (OpenAI, Anthropic, etc.)</p>\n              <p><strong>Endpoint Examples:</strong> http://localhost:11434 (Ollama) or https://api.openai.com (OpenAI)</p>\n              <p><strong>Storage:</strong> Configuration is saved locally in your browser</p>\n            </div>\n          </div>\n        )}\n\n        {/* LLM Provider Selection */}\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"provider\" className=\"text-sm font-medium text-foreground\">LLM Provider</Label>\n          <Select value={provider} onValueChange={(value) => {\n            setProvider(value);\n            setSelectedModel(''); // Reset model when provider changes\n          }} data-testid=\"select-llm-provider\">\n            <SelectTrigger>\n              <SelectValue placeholder=\"Select LLM Provider\" />\n            </SelectTrigger>\n            <SelectContent>\n              {LLM_PROVIDERS.map((p) => (\n                <SelectItem key={p.value} value={p.value}>\n                  {p.label}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n\n        {/* Model Selection */}\n        {provider && (\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"model\" className=\"text-sm font-medium text-foreground\">Model</Label>\n            <Select value={selectedModel} onValueChange={setSelectedModel} data-testid=\"select-llm-model\">\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select Model\" />\n              </SelectTrigger>\n              <SelectContent>\n                {getModelsForProvider().map((model) => (\n                  <SelectItem key={model} value={model}>\n                    {model}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        )}\n\n        {/* Endpoint URL (for Ollama/Local) */}\n        {requiresEndpoint() && (\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"endpoint\" className=\"text-sm font-medium text-foreground\">Endpoint URL</Label>\n            <Input\n              id=\"endpoint\"\n              type=\"url\"\n              placeholder=\"http://localhost:11434\"\n              value={endpoint}\n              onChange={(e) => setEndpoint(e.target.value)}\n              data-testid=\"input-llm-endpoint\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              Enter your {provider === 'ollama' ? 'Ollama' : 'local'} server endpoint URL\n            </p>\n          </div>\n        )}\n\n        {/* API Key (for cloud providers) */}\n        {requiresApiKey() && (\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"apiKey\" className=\"text-sm font-medium text-foreground\">API Key</Label>\n            <Input\n              id=\"apiKey\"\n              type=\"password\"\n              placeholder=\"Enter your API key\"\n              value={apiKey}\n              onChange={(e) => setApiKey(e.target.value)}\n              data-testid=\"input-llm-api-key\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              Your API key for {LLM_PROVIDERS.find(p => p.value === provider)?.label}\n            </p>\n          </div>\n        )}\n\n        {/* Configuration Status */}\n        {provider && (\n          <div className=\"bg-muted rounded-lg p-4 space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <h4 className=\"font-medium text-foreground\">Current Configuration</h4>\n              <div className=\"flex items-center gap-2\">\n                <span className={`px-2 py-1 text-xs rounded-full ${\n                  isConfigured ? 'bg-success/10 text-success' : 'bg-muted-foreground/10 text-muted-foreground'\n                }`}>\n                  {isConfigured ? 'Configured' : 'Not Configured'}\n                </span>\n                <span className=\"text-xs text-muted-foreground\">Stored Locally</span>\n              </div>\n            </div>\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <span className=\"text-muted-foreground\">Provider:</span>\n                <span className=\"ml-2 font-mono\" data-testid=\"text-current-provider\">\n                  {LLM_PROVIDERS.find(p => p.value === provider)?.label || 'Not set'}\n                </span>\n              </div>\n              <div>\n                <span className=\"text-muted-foreground\">Model:</span>\n                <span className=\"ml-2 font-mono\" data-testid=\"text-current-model\">\n                  {selectedModel || 'Not set'}\n                </span>\n              </div>\n              {requiresEndpoint() && (\n                <div className=\"col-span-2\">\n                  <span className=\"text-muted-foreground\">Endpoint:</span>\n                  <span className=\"ml-2 font-mono break-all\" data-testid=\"text-current-endpoint\">\n                    {endpoint || 'Not set'}\n                  </span>\n                </div>\n              )}\n              {requiresApiKey() && (\n                <div className=\"col-span-2\">\n                  <span className=\"text-muted-foreground\">API Key:</span>\n                  <span className=\"ml-2 font-mono\" data-testid=\"text-current-api-key\">\n                    {apiKey ? 'â€¢'.repeat(20) : 'Not set'}\n                  </span>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n        \n        {/* Performance Stats */}\n        {isConnected && (\n          <>\n            <div className=\"space-y-2\">\n              <Label className=\"text-sm font-medium text-foreground\">Response Time</Label>\n              <div className=\"text-sm text-muted-foreground\">\n                Last query: <span data-testid=\"text-llm-response-time\">{responseTime}s</span>\n              </div>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label className=\"text-sm font-medium text-foreground\">Success Rate</Label>\n              <div className=\"flex items-center space-x-2\">\n                <Progress value={successRate} className=\"flex-1\" />\n                <span className=\"text-sm text-success\" data-testid=\"text-llm-success-rate\">{successRate}%</span>\n              </div>\n            </div>\n          </>\n        )}\n\n        {/* Action Buttons */}\n        <div className=\"flex gap-3 pt-4\">\n          <Button \n            onClick={handleUpdateConfiguration}\n            disabled={saveConfigurationMutation.isPending}\n            className=\"flex-1 bg-primary text-primary-foreground hover:bg-primary/90\"\n            data-testid=\"button-update-llm-config\"\n          >\n            {saveConfigurationMutation.isPending ? (\n              <RefreshCw className=\"w-4 h-4 mr-2 animate-spin\" />\n            ) : (\n              <Save className=\"w-4 h-4 mr-2\" />\n            )}\n            Update Configuration\n          </Button>\n          \n          <Button \n            onClick={() => testConnectionMutation.mutate()}\n            disabled={testConnectionMutation.isPending || !provider}\n            variant=\"outline\"\n            className=\"flex-1\"\n            data-testid=\"button-test-llm-connection\"\n          >\n            {testConnectionMutation.isPending ? (\n              <RefreshCw className=\"w-4 h-4 mr-2 animate-spin\" />\n            ) : (\n              <TestTubeDiagonal className=\"w-4 h-4 mr-2\" />\n            )}\n            Test Connection\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":15342},"client/src/components/MCPPanel.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { RefreshCw } from \"lucide-react\";\n\ninterface MCPPanelProps {\n  status?: {\n    id: string;\n    component: string;\n    status: string;\n    lastCheck: string;\n    metadata: any;\n  };\n}\n\ninterface MCPResource {\n  name: string;\n  type: 'las_file' | 'script' | 'tool';\n  path: string;\n  size?: number;\n  lastModified?: Date;\n}\n\nexport default function MCPPanel({ status }: MCPPanelProps) {\n  const { data: resources, refetch } = useQuery<MCPResource[]>({\n    queryKey: [\"/api/mcp-resources\"],\n    refetchInterval: 60000, // Refresh every minute\n  });\n\n  const isInitializing = status?.status === 'warning';\n  const isOnline = status?.status === 'online';\n\n  const lasFiles = resources?.filter(r => r.type === 'las_file') || [];\n  const scripts = resources?.filter(r => r.type === 'script') || [];\n  const tools = resources?.filter(r => r.type === 'tool') || [];\n\n  return (\n    <div className=\"bg-card rounded-lg border border-border\">\n      <div className=\"p-6 border-b border-border\">\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold text-foreground\">MCP Server</h3>\n          <span className={`px-2 py-1 text-xs rounded-full ${\n            isOnline ? 'bg-success/10 text-success' : \n            isInitializing ? 'bg-warning/10 text-warning' : \n            'bg-destructive/10 text-destructive'\n          }`}>\n            {isOnline ? 'Online' : isInitializing ? 'Initializing' : 'Offline'}\n          </span>\n        </div>\n      </div>\n      <div className=\"p-6 space-y-4\">\n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium text-foreground\">Available Resources</label>\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-foreground\">LAS Files</span>\n              <span className=\"text-success\" data-testid=\"text-mcp-las-files\">{lasFiles.length} available</span>\n            </div>\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-foreground\">Processing Scripts</span>\n              <span className=\"text-success\" data-testid=\"text-mcp-scripts\">{scripts.length} available</span>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium text-foreground\">Active Tools</label>\n          <div className=\"flex flex-wrap gap-1\">\n            {tools.slice(0, 3).map((tool) => (\n              <span key={tool.name} className=\"px-2 py-1 bg-accent text-accent-foreground text-xs rounded\" data-testid={`tool-${tool.name}`}>\n                {tool.name}\n              </span>\n            ))}\n            {tools.length > 3 && (\n              <span className=\"px-2 py-1 bg-accent text-accent-foreground text-xs rounded\">\n                +{tools.length - 3} more\n              </span>\n            )}\n          </div>\n        </div>\n        \n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium text-foreground\">Output Directory</label>\n          <div className=\"bg-muted rounded-md px-3 py-2\">\n            <span className=\"text-sm font-mono text-foreground\" data-testid=\"text-mcp-output-dir\">./output/</span>\n          </div>\n        </div>\n\n        <Button \n          className=\"w-full bg-secondary text-secondary-foreground hover:bg-secondary/90\"\n          onClick={() => refetch()}\n          data-testid=\"button-refresh-mcp-resources\"\n        >\n          <RefreshCw className=\"w-4 h-4 mr-2\" />\n          Refresh Resources\n        </Button>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3722},"client/src/components/ProcessingQueue.tsx":{"content":"import { FileCode, Download, Trash2, Brain, Code, Play, Image, CheckCircle2, AlertCircle, Clock } from \"lucide-react\";\nimport { Progress } from \"@/components/ui/progress\";\n\ninterface EmailLog {\n  id: string;\n  sender: string;\n  subject: string;\n  body: string;\n  status: string;\n  createdAt: string;\n  processingTime: number;\n  outputFile: string;\n  errorMessage: string;\n  mcpScript?: string;\n  lasFile?: string;\n  llmResponse?: {\n    script: string;\n    lasFile: string;\n    tool: string;\n    confidence: number;\n    reasoning: string;\n  };\n  completedAt?: string;\n}\n\ninterface ProcessingQueueProps {\n  emailLogs: EmailLog[];\n}\n\nconst getStatusBadge = (status: string) => {\n  switch (status) {\n    case 'completed':\n      return <span className=\"px-2 py-1 bg-success/10 text-success text-xs rounded-full\">Completed</span>;\n    case 'processing':\n      return <span className=\"px-2 py-1 bg-warning/10 text-warning text-xs rounded-full\">Processing</span>;\n    case 'error':\n      return <span className=\"px-2 py-1 bg-destructive/10 text-destructive text-xs rounded-full\">Error</span>;\n    default:\n      return <span className=\"px-2 py-1 bg-muted/10 text-muted-foreground text-xs rounded-full\">Pending</span>;\n  }\n};\n\nconst formatProcessingTime = (time: number | null) => {\n  if (!time) return 'N/A';\n  if (time < 1000) return `${time}ms`;\n  return `${(time / 1000).toFixed(1)}s`;\n};\n\nconst formatTimestamp = (timestamp: string) => {\n  return new Date(timestamp).toLocaleString();\n};\n\nconst getProcessingSteps = (log: EmailLog) => {\n  const steps = [\n    {\n      id: 'received',\n      title: 'Query Received',\n      description: `Received query: \"${log.body.substring(0, 50)}${log.body.length > 50 ? '...' : ''}\"`,\n      icon: <FileCode className=\"h-4 w-4\" />,\n      status: 'completed',\n      timestamp: log.createdAt\n    },\n    {\n      id: 'llm_analysis',\n      title: 'LLM Analysis',\n      description: log.llmResponse ? \n        `AI selected: ${log.llmResponse.script} with ${log.llmResponse.lasFile} (${(log.llmResponse.confidence * 100).toFixed(0)}% confidence)` :\n        'Analyzing query with AI to determine script and data requirements',\n      icon: <Brain className=\"h-4 w-4\" />,\n      status: log.llmResponse ? 'completed' : (log.status === 'processing' ? 'processing' : 'pending'),\n      timestamp: log.createdAt\n    },\n    {\n      id: 'script_selection',\n      title: 'Script & File Selection',\n      description: log.llmResponse ? \n        `Script: ${log.llmResponse.script}, LAS File: ${log.llmResponse.lasFile}, Tool: ${log.llmResponse.tool}` :\n        'Waiting for LLM analysis completion',\n      icon: <Code className=\"h-4 w-4\" />,\n      status: log.llmResponse ? 'completed' : 'pending',\n      timestamp: log.createdAt\n    },\n    {\n      id: 'execution',\n      title: 'Script Execution',\n      description: log.status === 'completed' ? \n        `Python script executed successfully in ${formatProcessingTime(log.processingTime)}` :\n        log.status === 'processing' ? 'Running Python analysis script...' :\n        log.status === 'error' ? `Execution failed: ${log.errorMessage}` :\n        'Waiting to execute script',\n      icon: <Play className=\"h-4 w-4\" />,\n      status: log.status === 'completed' ? 'completed' : \n              log.status === 'processing' ? 'processing' : \n              log.status === 'error' ? 'error' : 'pending',\n      timestamp: log.createdAt\n    },\n    {\n      id: 'output_generation',\n      title: 'Output Generation',\n      description: log.outputFile ? \n        `Generated visualization: ${log.outputFile.split('/').pop()}` :\n        log.status === 'error' ? 'Output generation failed' :\n        'Generating visualization file...',\n      icon: <Image className=\"h-4 w-4\" />,\n      status: log.outputFile ? 'completed' : \n              log.status === 'error' ? 'error' : \n              log.status === 'processing' ? 'processing' : 'pending',\n      timestamp: log.completedAt || log.createdAt\n    }\n  ];\n  \n  return steps;\n};\n\nconst getStepIcon = (status: string) => {\n  switch (status) {\n    case 'completed':\n      return <CheckCircle2 className=\"h-4 w-4 text-green-500\" />;\n    case 'processing':\n      return <Clock className=\"h-4 w-4 text-blue-500 animate-pulse\" />;\n    case 'error':\n      return <AlertCircle className=\"h-4 w-4 text-red-500\" />;\n    default:\n      return <div className=\"h-4 w-4 rounded-full border-2 border-gray-300\" />;\n  }\n};\n\nconst getStepColor = (status: string) => {\n  switch (status) {\n    case 'completed':\n      return 'text-green-600 border-green-300 bg-green-50';\n    case 'processing':\n      return 'text-blue-600 border-blue-300 bg-blue-50';\n    case 'error':\n      return 'text-red-600 border-red-300 bg-red-50';\n    default:\n      return 'text-gray-400 border-gray-300 bg-gray-50';\n  }\n};\n\nexport default function ProcessingQueue({ emailLogs }: ProcessingQueueProps) {\n  return (\n    <div className=\"bg-card rounded-lg border border-border\">\n      <div className=\"p-6 border-b border-border\">\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold text-foreground\">Processing Queue & Logs</h3>\n          <div className=\"flex items-center space-x-2\">\n            <button className=\"text-muted-foreground hover:text-foreground\" data-testid=\"button-download-logs\">\n              <Download className=\"h-4 w-4\" />\n            </button>\n            <button className=\"text-muted-foreground hover:text-foreground\" data-testid=\"button-clear-logs\">\n              <Trash2 className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n      </div>\n      <div className=\"p-6\">\n        <div className=\"space-y-4\">\n          {emailLogs.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <FileCode className=\"h-8 w-8 text-muted-foreground mx-auto mb-3\" />\n              <p className=\"text-muted-foreground\">No processing logs available</p>\n            </div>\n          ) : (\n            emailLogs.map((log) => (\n              <div key={log.id} className=\"border border-border rounded-lg p-4\" data-testid={`processing-log-${log.id}`}>\n                <div className=\"flex items-center justify-between mb-3\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div className=\"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center\">\n                      <FileCode className=\"h-5 w-5 text-primary\" />\n                    </div>\n                    <div>\n                      <p className=\"font-medium text-foreground\" data-testid={`text-log-filename-${log.id}`}>\n                        {log.lasFile || 'Unknown LAS file'}\n                      </p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Requested by: <span data-testid={`text-log-requester-${log.id}`}>{log.sender}</span>\n                      </p>\n                    </div>\n                  </div>\n                  {getStatusBadge(log.status)}\n                </div>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\n                  <div>\n                    <label className=\"text-muted-foreground\">Script Used</label>\n                    <p className=\"text-foreground\" data-testid={`text-log-script-${log.id}`}>\n                      {log.mcpScript || 'N/A'}\n                    </p>\n                  </div>\n                  <div>\n                    <label className=\"text-muted-foreground\">Processing Time</label>\n                    <p className=\"text-foreground\" data-testid={`text-log-processing-time-${log.id}`}>\n                      {formatProcessingTime(log.processingTime)}\n                    </p>\n                  </div>\n                  <div>\n                    <label className=\"text-muted-foreground\">Output</label>\n                    <p className={`cursor-pointer hover:underline ${log.outputFile ? 'text-primary' : 'text-muted-foreground'}`}>\n                      {log.outputFile ? log.outputFile.split('/').pop() : 'No output'}\n                    </p>\n                  </div>\n                </div>\n                \n                {log.status === 'processing' && (\n                  <div className=\"mt-3 pt-3 border-t border-border\">\n                    <div className=\"flex items-center space-x-2\">\n                      <label className=\"text-sm text-muted-foreground\">Progress</label>\n                      <div className=\"flex-1\">\n                        <Progress value={75} className=\"h-2\" />\n                      </div>\n                      <span className=\"text-xs text-muted-foreground\">~30 seconds</span>\n                    </div>\n                  </div>\n                )}\n                \n                {/* Processing Timeline */}\n                <div className=\"mt-4 pt-4 border-t border-border\">\n                  <h4 className=\"text-sm font-medium mb-3 text-foreground\">Processing Timeline</h4>\n                  <div className=\"space-y-3\">\n                    {getProcessingSteps(log).map((step, index) => (\n                      <div key={step.id} className=\"flex items-start space-x-3\">\n                        <div className={`w-8 h-8 rounded-full border-2 flex items-center justify-center ${getStepColor(step.status)}`}>\n                          {getStepIcon(step.status)}\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center justify-between\">\n                            <p className=\"text-sm font-medium text-foreground\">{step.title}</p>\n                            <span className=\"text-xs text-muted-foreground\">\n                              {formatTimestamp(step.timestamp)}\n                            </span>\n                          </div>\n                          <p className=\"text-xs text-muted-foreground mt-1\">\n                            {step.description}\n                          </p>\n                          {step.status === 'processing' && (\n                            <div className=\"mt-2\">\n                              <Progress value={60} className=\"h-1\" />\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {log.errorMessage && (\n                  <div className=\"mt-3 pt-3 border-t border-border\">\n                    <div className=\"bg-destructive/10 rounded-md p-3\">\n                      <p className=\"text-sm text-destructive font-medium\">Error Details:</p>\n                      <p className=\"text-sm text-destructive mt-1\" data-testid={`text-log-error-${log.id}`}>\n                        {log.errorMessage}\n                      </p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":10924},"client/src/components/Sidebar.tsx":{"content":"import { Mail, BarChart3, MessageSquare, Server, FileCode, History, Settings } from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\n\ninterface NavItem {\n  name: string;\n  icon: React.ComponentType<{ className?: string }>;\n  href: string;\n}\n\nconst navigation: NavItem[] = [\n  { name: 'Dashboard', icon: BarChart3, href: '/' },\n  { name: 'Email Monitor', icon: Mail, href: '#' },\n  { name: 'Langchain Agent', icon: MessageSquare, href: '/langchain-agent' },\n  { name: 'MCP Server', icon: Server, href: '#' },\n  { name: 'LAS Files', icon: FileCode, href: '#' },\n  { name: 'Processing Logs', icon: History, href: '#' },\n  { name: 'Settings', icon: Settings, href: '/settings' },\n];\n\nexport default function Sidebar() {\n  const [location] = useLocation();\n\n  return (\n    <div className=\"sidebar w-64 p-6 border-r border-border flex flex-col\">\n      <div className=\"flex items-center space-x-3 mb-8\">\n        <div className=\"w-8 h-8 bg-primary rounded-lg flex items-center justify-center\">\n          <Mail className=\"h-4 w-4 text-primary-foreground\" />\n        </div>\n        <div>\n          <h1 className=\"text-lg font-semibold text-foreground\">Email Automation</h1>\n          <p className=\"text-xs text-muted-foreground\">LAS Processing System</p>\n        </div>\n      </div>\n      \n      <nav className=\"space-y-2 flex-1\">\n        {navigation.map((item) => {\n          const Icon = item.icon;\n          const isActive = location === item.href;\n          return (\n            <Link\n              key={item.name}\n              href={item.href}\n              className={`flex items-center space-x-3 px-3 py-2 rounded-md transition-colors ${\n                isActive\n                  ? 'bg-accent text-accent-foreground font-medium'\n                  : 'text-muted-foreground hover:bg-accent hover:text-accent-foreground'\n              }`}\n              data-testid={`nav-${item.name.toLowerCase().replace(' ', '-')}`}\n            >\n              <Icon className=\"w-4 h-4\" />\n              <span>{item.name}</span>\n            </Link>\n          );\n        })}\n      </nav>\n      \n      <div className=\"mt-auto pt-4 border-t border-border\">\n        <div className=\"flex items-center space-x-3 text-sm\">\n          <div className=\"w-8 h-8 bg-muted rounded-full flex items-center justify-center\">\n            <Settings className=\"h-4 w-4 text-muted-foreground\" />\n          </div>\n          <div>\n            <p className=\"font-medium text-foreground\">dhanushahane01@gmail.com</p>\n            <p className=\"text-muted-foreground\">System Admin</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":2612},"client/src/components/StatusCard.tsx":{"content":"import { Mail, MessageSquare, Server, TrendingUp } from \"lucide-react\";\n\ninterface StatusCardProps {\n  title: string;\n  value: string;\n  icon: 'envelope' | 'robot' | 'server' | 'chart-line';\n  status: 'online' | 'warning' | 'offline';\n  subtitle: string;\n}\n\nconst iconMap = {\n  envelope: Mail,\n  robot: MessageSquare,\n  server: Server,\n  'chart-line': TrendingUp,\n};\n\nconst statusClasses = {\n  online: 'status-online',\n  warning: 'status-warning', \n  offline: 'status-offline',\n};\n\nconst iconColorClasses = {\n  online: 'text-primary',\n  warning: 'text-warning',\n  offline: 'text-destructive',\n  'chart-line': 'text-success',\n};\n\nexport default function StatusCard({ title, value, icon, status, subtitle }: StatusCardProps) {\n  const Icon = iconMap[icon];\n  const statusClass = statusClasses[status] || statusClasses.offline;\n  const iconColorClass = icon === 'chart-line' ? iconColorClasses['chart-line'] : iconColorClasses[status] || iconColorClasses.offline;\n\n  return (\n    <div className=\"metric-card rounded-lg p-6\" data-testid={`status-card-${title.toLowerCase().replace(' ', '-')}`}>\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center\">\n          <Icon className={`h-5 w-5 ${iconColorClass}`} />\n        </div>\n        <span className={`status-indicator ${statusClass}`}></span>\n      </div>\n      <h3 className=\"text-2xl font-bold mb-1 text-foreground\" data-testid={`text-${title.toLowerCase().replace(' ', '-')}-value`}>\n        {value}\n      </h3>\n      <p className=\"text-sm text-muted-foreground\">{title}</p>\n      <p className={`text-xs mt-2 ${status === 'online' || icon === 'chart-line' ? 'text-success' : status === 'warning' ? 'text-warning' : 'text-destructive'}`}>\n        {subtitle}\n      </p>\n    </div>\n  );\n}\n","size_bytes":1836},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/dashboard.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useEffect, useState } from \"react\";\nimport Sidebar from \"@/components/Sidebar\";\nimport StatusCard from \"@/components/StatusCard\";\nimport ActivityLog from \"@/components/ActivityLog\";\nimport EmailConfig from \"@/components/EmailConfig\";\nimport LLMPanel from \"@/components/LLMPanel\";\nimport MCPPanel from \"@/components/MCPPanel\";\nimport ProcessingQueue from \"@/components/ProcessingQueue\";\nimport DirectQueryPanel from \"@/components/DirectQueryPanel\";\nimport OutputViewer from \"@/components/OutputViewer\";\nimport { Button } from \"@/components/ui/button\";\nimport { RefreshCw, Play } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface DashboardData {\n  systemStatus: Array<{\n    id: string;\n    component: string;\n    status: string;\n    lastCheck: string;\n    metadata: any;\n  }>;\n  emailLogs: Array<{\n    id: string;\n    sender: string;\n    subject: string;\n    body: string;\n    status: string;\n    createdAt: string;\n    processingTime: number;\n    outputFile: string;\n    errorMessage: string;\n  }>;\n  stats: {\n    processedToday: number;\n    totalProcessed: number;\n    successRate: number;\n  };\n}\n\nexport default function Dashboard() {\n  const { toast } = useToast();\n  const [wsConnected, setWsConnected] = useState(false);\n\n  const { data: dashboardData, isLoading } = useQuery<DashboardData>({\n    queryKey: [\"/api/dashboard\"],\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  const manualTriggerMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch(\"/api/trigger-manual\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n      });\n      if (!response.ok) throw new Error(\"Failed to trigger manual process\");\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Manual Trigger Initiated\",\n        description: \"Email processing has been triggered manually.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard\"] });\n    },\n    onError: () => {\n      toast({\n        title: \"Trigger Failed\",\n        description: \"Failed to initiate manual trigger.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const refreshMutation = useMutation({\n    mutationFn: async () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/email-logs\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/system-status\"] });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Dashboard Refreshed\",\n        description: \"All data has been refreshed successfully.\",\n      });\n    },\n  });\n\n  // WebSocket connection for real-time updates\n  useEffect(() => {\n    const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n    const wsUrl = `${protocol}//${window.location.host}/api/ws`;\n    \n    try {\n      const ws = new WebSocket(wsUrl);\n      \n      ws.onopen = () => {\n        console.log('WebSocket connected');\n        setWsConnected(true);\n      };\n      \n      ws.onmessage = (event) => {\n        const data = JSON.parse(event.data);\n        console.log('WebSocket message:', data);\n        \n        if (data.type === 'status_update' || data.type === 'new_email' || data.type === 'email_processed') {\n          queryClient.invalidateQueries({ queryKey: [\"/api/dashboard\"] });\n        }\n      };\n      \n      ws.onclose = () => {\n        console.log('WebSocket disconnected');\n        setWsConnected(false);\n      };\n      \n      ws.onerror = (error) => {\n        console.error('WebSocket error:', error);\n        setWsConnected(false);\n      };\n      \n      return () => {\n        ws.close();\n      };\n    } catch (error) {\n      console.error('Failed to connect WebSocket:', error);\n    }\n  }, []);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <RefreshCw className=\"h-8 w-8 animate-spin mx-auto mb-4 text-primary\" />\n          <p className=\"text-muted-foreground\">Loading dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const systemStatus = dashboardData?.systemStatus || [];\n  const emailLogs = dashboardData?.emailLogs || [];\n  const stats = dashboardData?.stats || { processedToday: 0, totalProcessed: 0, successRate: 0 };\n\n  const emailMonitorStatus = systemStatus.find(s => s.component === 'email_monitor');\n  const llmStatus = systemStatus.find(s => s.component === 'llm');\n  const mcpStatus = systemStatus.find(s => s.component === 'mcp_server');\n\n  return (\n    <div className=\"flex h-screen overflow-hidden bg-background\">\n      <Sidebar />\n      \n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        {/* Header */}\n        <header className=\"bg-card border-b border-border px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h2 className=\"text-xl font-semibold text-foreground\">System Dashboard</h2>\n              <p className=\"text-muted-foreground\">Monitor and manage your email automation workflow</p>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"flex items-center space-x-2\">\n                <div className={`w-2 h-2 rounded-full ${wsConnected ? 'bg-success' : 'bg-destructive'}`} />\n                <span className=\"text-xs text-muted-foreground\">\n                  {wsConnected ? 'Connected' : 'Disconnected'}\n                </span>\n              </div>\n              <Button\n                onClick={() => manualTriggerMutation.mutate()}\n                disabled={manualTriggerMutation.isPending}\n                className=\"bg-primary text-primary-foreground hover:bg-primary/90\"\n                data-testid=\"button-manual-trigger\"\n              >\n                <Play className=\"w-4 h-4 mr-2\" />\n                Manual Trigger\n              </Button>\n              <Button\n                onClick={() => refreshMutation.mutate()}\n                disabled={refreshMutation.isPending}\n                variant=\"secondary\"\n                data-testid=\"button-refresh\"\n              >\n                <RefreshCw className={`w-4 h-4 mr-2 ${refreshMutation.isPending ? 'animate-spin' : ''}`} />\n                Refresh\n              </Button>\n            </div>\n          </div>\n        </header>\n\n        {/* Main Content */}\n        <main className=\"flex-1 overflow-auto p-6 space-y-6\">\n          {/* System Status Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            <StatusCard\n              title=\"Email Monitor\"\n              value={emailMonitorStatus?.status === 'online' ? 'Active' : emailMonitorStatus?.status === 'warning' ? 'Processing' : 'Offline'}\n              icon=\"envelope\"\n              status={emailMonitorStatus?.status as 'online' | 'warning' | 'offline' || 'offline'}\n              subtitle={emailMonitorStatus?.metadata?.lastCheck ? `Last check: ${new Date(emailMonitorStatus.metadata.lastCheck).toLocaleTimeString()}` : 'No data'}\n            />\n            \n            <StatusCard\n              title={llmStatus?.metadata?.provider ? `${llmStatus.metadata.provider.charAt(0).toUpperCase() + llmStatus.metadata.provider.slice(1)} LLM` : 'LLM Integration'}\n              value={llmStatus?.status === 'online' ? 'Connected' : 'Disconnected'}\n              icon=\"robot\"\n              status={llmStatus?.status as 'online' | 'warning' | 'offline' || 'offline'}\n              subtitle={llmStatus?.metadata?.model ? `Model: ${llmStatus.metadata.model}` : 'Not configured'}\n            />\n            \n            <StatusCard\n              title=\"MCP Server\"\n              value={mcpStatus?.status === 'online' ? 'Online' : mcpStatus?.status === 'warning' ? 'Initializing' : 'Offline'}\n              icon=\"server\"\n              status={mcpStatus?.status as 'online' | 'warning' | 'offline' || 'offline'}\n              subtitle={mcpStatus?.status === 'warning' ? 'Starting resources...' : 'Ready'}\n            />\n            \n            <StatusCard\n              title=\"Processed Today\"\n              value={stats.processedToday.toString()}\n              icon=\"chart-line\"\n              status=\"online\"\n              subtitle={`+${stats.processedToday} from yesterday`}\n            />\n          </div>\n\n          {/* Direct Query and Output Viewer */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <DirectQueryPanel />\n            <OutputViewer />\n          </div>\n\n          <div className=\"grid grid-cols-1 gap-6\">\n            <ActivityLog emailLogs={emailLogs} />\n          </div>\n\n          <ProcessingQueue emailLogs={emailLogs} />\n        </main>\n      </div>\n    </div>\n  );\n}\n","size_bytes":8859},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"mcp_resources/scripts/depth_visualization.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nDepth visualization script for LAS file processing\nGenerates depth vs log curves visualization\n\"\"\"\n\nimport sys\nimport matplotlib.pyplot as plt\nimport numpy as np\nfrom datetime import datetime\n\ndef process_las_file(las_file_path, output_path):\n    \"\"\"\n    Process LAS file and generate depth visualization\n    \"\"\"\n    print(f\"Processing LAS file: {las_file_path}\")\n    print(f\"Output will be saved to: {output_path}\")\n    \n    # Simulate processing\n    depths = np.linspace(8500, 8600, 200)\n    gamma_ray = 65 + 20 * np.sin(depths/50) + np.random.normal(0, 5, len(depths))\n    \n    # Create visualization\n    fig, ax = plt.subplots(figsize=(8, 10))\n    ax.plot(gamma_ray, depths, 'g-', linewidth=1.5, label='Gamma Ray')\n    ax.set_ylabel('Depth (ft)')\n    ax.set_xlabel('Gamma Ray (GAPI)')\n    ax.set_title('Depth vs Gamma Ray Log')\n    ax.invert_yaxis()\n    ax.grid(True, alpha=0.3)\n    ax.legend()\n    \n    plt.tight_layout()\n    plt.savefig(output_path, dpi=150, bbox_inches='tight')\n    plt.close()\n    \n    print(f\"Visualization saved successfully to {output_path}\")\n    return True\n\nif __name__ == \"__main__\":\n    if len(sys.argv) != 3:\n        print(\"Usage: python depth_visualization.py <las_file> <output_file>\")\n        sys.exit(1)\n    \n    las_file = sys.argv[1]\n    output_file = sys.argv[2]\n    \n    success = process_las_file(las_file, output_file)\n    if success:\n        print(\"Processing completed successfully\")\n    else:\n        print(\"Processing failed\")\n        sys.exit(1)","size_bytes":1520},"mcp_resources/scripts/gamma_ray_analyzer.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nGamma ray analysis script for LAS file processing\nAnalyzes gamma ray logs and generates statistical visualization\n\"\"\"\n\nimport sys\nimport matplotlib.pyplot as plt\nimport numpy as np\nfrom datetime import datetime\n\ndef analyze_gamma_ray(las_file_path, output_path):\n    \"\"\"\n    Analyze gamma ray data from LAS file\n    \"\"\"\n    print(f\"Analyzing gamma ray data from: {las_file_path}\")\n    print(f\"Output will be saved to: {output_path}\")\n    \n    # Simulate gamma ray analysis\n    depths = np.linspace(8500, 8600, 200)\n    gamma_ray = 65 + 20 * np.sin(depths/50) + np.random.normal(0, 5, len(depths))\n    \n    # Create analysis visualization\n    fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, figsize=(12, 10))\n    \n    # Plot 1: Gamma Ray vs Depth\n    ax1.plot(gamma_ray, depths, 'r-', linewidth=1.5)\n    ax1.set_xlabel('Gamma Ray (GAPI)')\n    ax1.set_ylabel('Depth (ft)')\n    ax1.set_title('Gamma Ray Log')\n    ax1.invert_yaxis()\n    ax1.grid(True, alpha=0.3)\n    \n    # Plot 2: Histogram\n    ax2.hist(gamma_ray, bins=20, alpha=0.7, color='red', edgecolor='black')\n    ax2.set_xlabel('Gamma Ray (GAPI)')\n    ax2.set_ylabel('Frequency')\n    ax2.set_title('Gamma Ray Distribution')\n    ax2.grid(True, alpha=0.3)\n    \n    # Plot 3: Statistics\n    mean_gr = np.mean(gamma_ray)\n    std_gr = np.std(gamma_ray)\n    ax3.text(0.1, 0.8, f'Mean: {mean_gr:.2f} GAPI', transform=ax3.transAxes, fontsize=12)\n    ax3.text(0.1, 0.6, f'Std Dev: {std_gr:.2f} GAPI', transform=ax3.transAxes, fontsize=12)\n    ax3.text(0.1, 0.4, f'Min: {np.min(gamma_ray):.2f} GAPI', transform=ax3.transAxes, fontsize=12)\n    ax3.text(0.1, 0.2, f'Max: {np.max(gamma_ray):.2f} GAPI', transform=ax3.transAxes, fontsize=12)\n    ax3.set_title('Statistics')\n    ax3.set_xlim(0, 1)\n    ax3.set_ylim(0, 1)\n    ax3.axis('off')\n    \n    # Plot 4: Moving average\n    window_size = 10\n    moving_avg = np.convolve(gamma_ray, np.ones(window_size)/window_size, mode='valid')\n    depths_ma = depths[:len(moving_avg)]\n    ax4.plot(gamma_ray, depths, 'lightgray', alpha=0.5, label='Raw Data')\n    ax4.plot(moving_avg, depths_ma, 'red', linewidth=2, label=f'{window_size}-point MA')\n    ax4.set_xlabel('Gamma Ray (GAPI)')\n    ax4.set_ylabel('Depth (ft)')\n    ax4.set_title('Smoothed Gamma Ray')\n    ax4.invert_yaxis()\n    ax4.grid(True, alpha=0.3)\n    ax4.legend()\n    \n    plt.tight_layout()\n    plt.savefig(output_path, dpi=150, bbox_inches='tight')\n    plt.close()\n    \n    print(f\"Analysis completed and saved to {output_path}\")\n    return True\n\nif __name__ == \"__main__\":\n    if len(sys.argv) != 3:\n        print(\"Usage: python gamma_ray_analyzer.py <las_file> <output_file>\")\n        sys.exit(1)\n    \n    las_file = sys.argv[1]\n    output_file = sys.argv[2]\n    \n    success = analyze_gamma_ray(las_file, output_file)\n    if success:\n        print(\"Analysis completed successfully\")\n    else:\n        print(\"Analysis failed\")\n        sys.exit(1)","size_bytes":2926},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"httpx>=0.28.1\",\n    \"langchain-ollama>=0.3.7\",\n    \"langchain>=0.3.27\",\n    \"langchain-anthropic>=0.3.19\",\n    \"langchain-mcp-adapters>=0.1.9\",\n    \"langchain-openai>=0.3.32\",\n    \"langgraph>=0.6.7\",\n    \"lasio>=0.32\",\n    \"matplotlib>=3.10.6\",\n    \"mcp>=1.13.1\",\n    \"numpy>=2.3.2\",\n    \"pandas>=2.3.2\",\n    \"python-dotenv>=1.1.1\",\n]\n","size_bytes":482},"client/src/components/DirectQueryPanel.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Send, Loader2, AlertCircle, CheckCircle, Bot, User, Brain, Code, Play, Image } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { llmConfigStorage } from \"@/lib/llmConfigStorage\";\n\ninterface QueryResult {\n  id: string;\n  query: string;\n  llmResponse: {\n    script: string;\n    lasFile: string;\n    tool: string;\n    confidence: number;\n    reasoning: string;\n  };\n  outputFile?: string;\n  status: \"processing\" | \"completed\" | \"error\";\n  errorMessage?: string;\n  processingTime?: number;\n}\n\ninterface ChatMessage {\n  id: string;\n  type: 'user' | 'ai' | 'system';\n  content: string;\n  timestamp: Date;\n  status?: 'processing' | 'completed' | 'error';\n  metadata?: {\n    llmResponse?: QueryResult['llmResponse'];\n    outputFile?: string;\n    processingTime?: number;\n    clarificationOptions?: string[];\n  };\n}\n\ninterface ClarificationResponse {\n  needsClarification: boolean;\n  confidence: number;\n  suggestions: string[];\n  message: string;\n}\n\nexport default function DirectQueryPanel() {\n  const [currentInput, setCurrentInput] = useState(\"\");\n  const [chatMessages, setChatMessages] = useState<ChatMessage[]>([\n    {\n      id: '1',\n      type: 'ai',\n      content: \"Hello! I'm your LAS file analysis assistant. I can help you analyze well log data using gamma ray analysis or depth visualization. What would you like to analyze today?\",\n      timestamp: new Date()\n    }\n  ]);\n  const [isWaitingForResponse, setIsWaitingForResponse] = useState(false);\n  const scrollAreaRef = useRef<HTMLDivElement>(null);\n  const { toast } = useToast();\n\n  // Auto-scroll to bottom when new messages are added\n  useEffect(() => {\n    if (scrollAreaRef.current) {\n      scrollAreaRef.current.scrollTop = scrollAreaRef.current.scrollHeight;\n    }\n  }, [chatMessages]);\n\n  // Check if query needs clarification\n  const checkClarificationMutation = useMutation({\n    mutationFn: async (queryText: string): Promise<ClarificationResponse> => {\n      // Get LLM configuration from localStorage\n      const llmConfig = llmConfigStorage.get();\n      \n      const response = await fetch(\"/api/check-clarification\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ query: queryText, llmConfig }),\n      });\n      if (!response.ok) {\n        throw new Error(`LLM service returned ${response.status}: ${response.statusText}`);\n      }\n      return response.json();\n    }\n  });\n\n  const processQueryMutation = useMutation({\n    mutationFn: async (queryText: string) => {\n      // Get LLM configuration from localStorage\n      const llmConfig = llmConfigStorage.get();\n      \n      const response = await fetch(\"/api/process-query\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ query: queryText, llmConfig }),\n      });\n      if (!response.ok) throw new Error(\"Failed to process query\");\n      return response.json();\n    },\n    onSuccess: (data: QueryResult) => {\n      // Update the processing message with completed status\n      setChatMessages(prev => prev.map(msg => \n        msg.id === 'processing' \n          ? {\n              ...msg,\n              type: 'ai' as const,\n              content: data.status === 'completed' \n                ? `Great! I've successfully analyzed your data. The ${data.llmResponse.tool} analysis is complete.`\n                : data.status === 'error'\n                ? `I encountered an error while processing your request: ${data.errorMessage}`\n                : 'Processing your request...',\n              status: data.status,\n              metadata: {\n                llmResponse: data.llmResponse,\n                outputFile: data.outputFile,\n                processingTime: data.processingTime\n              }\n            }\n          : msg\n      ));\n      \n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard\"] });\n      setIsWaitingForResponse(false);\n    },\n    onError: (error) => {\n      setChatMessages(prev => prev.map(msg => \n        msg.id === 'processing' \n          ? {\n              ...msg,\n              type: 'ai' as const,\n              content: `I'm sorry, I encountered an error: ${error instanceof Error ? error.message : 'Unknown error'}`,\n              status: 'error' as const\n            }\n          : msg\n      ));\n      setIsWaitingForResponse(false);\n    },\n  });\n\n  const addMessage = (type: 'user' | 'ai' | 'system', content: string, metadata?: ChatMessage['metadata']) => {\n    const newMessage: ChatMessage = {\n      id: Date.now().toString(),\n      type,\n      content,\n      timestamp: new Date(),\n      metadata\n    };\n    setChatMessages(prev => [...prev, newMessage]);\n    return newMessage.id;\n  };\n\n  const handleSubmit = async () => {\n    if (!currentInput.trim() || isWaitingForResponse) return;\n\n    const userMessage = currentInput.trim();\n    setCurrentInput(\"\");\n    setIsWaitingForResponse(true);\n\n    // Add user message\n    addMessage('user', userMessage);\n\n    try {\n      // First check if we need clarification\n      const clarificationResult = await checkClarificationMutation.mutateAsync(userMessage);\n      \n      if (clarificationResult.needsClarification) {\n        // Add AI clarification message\n        addMessage('ai', clarificationResult.message, {\n          clarificationOptions: clarificationResult.suggestions\n        });\n        setIsWaitingForResponse(false);\n      } else {\n        // Add processing message\n        const processingId = addMessage('ai', 'Let me analyze your request and process the data...', {});\n        \n        // Update message ID for tracking\n        setChatMessages(prev => prev.map(msg => \n          msg.id === processingId ? { ...msg, id: 'processing' } : msg\n        ));\n        \n        // Process the query\n        processQueryMutation.mutate(userMessage);\n      }\n    } catch (error) {\n      addMessage('ai', \"I'm having trouble understanding your request. Could you try rephrasing it?\");\n      setIsWaitingForResponse(false);\n    }\n  };\n\n  const handleClarificationClick = (suggestion: string) => {\n    setCurrentInput(suggestion);\n  };\n\n  const formatTimestamp = (timestamp: Date) => {\n    return timestamp.toLocaleTimeString('en-US', { \n      hour: '2-digit', \n      minute: '2-digit' \n    });\n  };\n\n  const getMessageIcon = (type: ChatMessage['type']) => {\n    switch (type) {\n      case 'user':\n        return <User className=\"w-4 h-4\" />;\n      case 'ai':\n        return <Bot className=\"w-4 h-4\" />;\n      case 'system':\n        return <Brain className=\"w-4 h-4\" />;\n    }\n  };\n\n  const getProcessingSteps = (metadata?: ChatMessage['metadata']) => {\n    if (!metadata?.llmResponse) return [];\n    \n    return [\n      { icon: <Brain className=\"w-3 h-3\" />, text: `AI Analysis: ${metadata.llmResponse.confidence > 0.8 ? 'High' : 'Medium'} confidence` },\n      { icon: <Code className=\"w-3 h-3\" />, text: `Script: ${metadata.llmResponse.script}` },\n      { icon: <Play className=\"w-3 h-3\" />, text: `LAS File: ${metadata.llmResponse.lasFile}` },\n      { icon: <Image className=\"w-3 h-3\" />, text: metadata.outputFile ? `Output: ${metadata.outputFile.split('/').pop()}` : 'Generating output...' }\n    ];\n  };\n\n  return (\n    <Card className=\"w-full h-[600px] flex flex-col\" data-testid=\"card-direct-query\">\n      <CardHeader className=\"flex-shrink-0\">\n        <CardTitle className=\"flex items-center gap-2\">\n          <Bot className=\"w-5 h-5\" />\n          AI Query Assistant\n        </CardTitle>\n        <CardDescription>\n          Chat with AI to analyze your LAS files. Ask questions and get step-by-step guidance.\n        </CardDescription>\n      </CardHeader>\n      \n      <CardContent className=\"flex-1 flex flex-col space-y-4 overflow-hidden\">\n        {/* Chat Messages */}\n        <ScrollArea className=\"flex-1 pr-4 min-h-0\" ref={scrollAreaRef}>\n          <div className=\"space-y-4 min-h-full\">\n            {chatMessages.map((message) => (\n              <div key={message.id} className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}>\n                <div className={`max-w-[80%] ${message.type === 'user' ? 'order-2' : 'order-1'}`}>\n                  <div className={`flex items-start space-x-2 ${message.type === 'user' ? 'flex-row-reverse space-x-reverse' : ''}`}>\n                    <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\n                      message.type === 'user' \n                        ? 'bg-primary text-primary-foreground' \n                        : 'bg-secondary text-secondary-foreground'\n                    }`}>\n                      {getMessageIcon(message.type)}\n                    </div>\n                    <div className={`rounded-lg p-3 ${\n                      message.type === 'user'\n                        ? 'bg-primary text-primary-foreground'\n                        : 'bg-secondary text-secondary-foreground'\n                    }`}>\n                      <p className=\"text-sm\">{message.content}</p>\n                      \n                      {/* Show clarification options */}\n                      {message.metadata?.clarificationOptions && (\n                        <div className=\"mt-3 space-y-2\">\n                          <p className=\"text-xs font-medium opacity-80\">Try these suggestions:</p>\n                          {message.metadata.clarificationOptions.map((option, index) => (\n                            <button\n                              key={index}\n                              onClick={() => handleClarificationClick(option)}\n                              className=\"block w-full text-left p-2 text-xs rounded border border-current/20 hover:bg-current/10 transition-colors\"\n                            >\n                              {option}\n                            </button>\n                          ))}\n                        </div>\n                      )}\n                      \n                      {/* Show processing steps */}\n                      {message.metadata?.llmResponse && (\n                        <div className=\"mt-3 space-y-2\">\n                          <p className=\"text-xs font-medium opacity-80\">Analysis Details:</p>\n                          <div className=\"space-y-1\">\n                            {getProcessingSteps(message.metadata).map((step, index) => (\n                              <div key={index} className=\"flex items-center space-x-2 text-xs opacity-80\">\n                                {step.icon}\n                                <span>{step.text}</span>\n                              </div>\n                            ))}\n                          </div>\n                          {message.metadata.processingTime && (\n                            <p className=\"text-xs opacity-60 mt-2\">\n                              Completed in {message.metadata.processingTime}ms\n                            </p>\n                          )}\n                        </div>\n                      )}\n                      \n                      <p className=\"text-xs opacity-60 mt-2\">\n                        {formatTimestamp(message.timestamp)}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n            \n            {isWaitingForResponse && (\n              <div className=\"flex justify-start\">\n                <div className=\"max-w-[80%]\">\n                  <div className=\"flex items-start space-x-2\">\n                    <div className=\"w-8 h-8 rounded-full flex items-center justify-center bg-secondary text-secondary-foreground\">\n                      <Bot className=\"w-4 h-4\" />\n                    </div>\n                    <div className=\"rounded-lg p-3 bg-secondary text-secondary-foreground\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Loader2 className=\"w-4 h-4 animate-spin\" />\n                        <span className=\"text-sm\">Thinking...</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </ScrollArea>\n        \n        {/* Input Area */}\n        <div className=\"flex-shrink-0 flex space-x-2\">\n          <Input\n            placeholder=\"Ask about gamma ray analysis, depth visualization, or LAS file processing...\"\n            value={currentInput}\n            onChange={(e) => setCurrentInput(e.target.value)}\n            onKeyPress={(e) => e.key === 'Enter' && handleSubmit()}\n            disabled={isWaitingForResponse}\n            className=\"flex-1\"\n            data-testid=\"input-chat\"\n          />\n          <Button\n            onClick={handleSubmit}\n            disabled={!currentInput.trim() || isWaitingForResponse}\n            size=\"icon\"\n            data-testid=\"button-send\"\n          >\n            <Send className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":13450},"client/src/components/OutputViewer.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Folder, FileImage, Eye, Download, RefreshCw, Calendar, Clock, FolderOpen, X } from \"lucide-react\";\nimport { format } from \"date-fns\";\n\ninterface OutputFile {\n  path: string;\n  name: string;\n  timestamp: string;\n  size: number;\n  isImage: boolean;\n}\n\ninterface OutputFolder {\n  name: string;\n  files: OutputFile[];\n  createdAt: string;\n}\n\nexport default function OutputViewer() {\n  const [selectedFolder, setSelectedFolder] = useState<OutputFolder | null>(null);\n  const [selectedImage, setSelectedImage] = useState<OutputFile | null>(null);\n  const [isFolderDialogOpen, setIsFolderDialogOpen] = useState(false);\n  const [isImageDialogOpen, setIsImageDialogOpen] = useState(false);\n  const [previousFileCount, setPreviousFileCount] = useState<{[key: string]: number}>({});\n\n  const { data: outputFiles, isLoading, refetch } = useQuery<OutputFolder[]>({\n    queryKey: [\"/api/output-files\"],\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const getImageUrl = (filePath: string) => {\n    return `/api/output-files/view?path=${encodeURIComponent(filePath)}`;\n  };\n\n  const downloadFile = (filePath: string, fileName: string) => {\n    const link = document.createElement('a');\n    link.href = `/api/output-files/download?path=${encodeURIComponent(filePath)}`;\n    link.download = fileName;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const openFolder = (folder: OutputFolder) => {\n    setSelectedFolder(folder);\n    setIsFolderDialogOpen(true);\n  };\n\n  const openImageViewer = (file: OutputFile) => {\n    setSelectedImage(file);\n    setIsImageDialogOpen(true);\n  };\n\n  // Track new files for blink indicator\n  useEffect(() => {\n    if (outputFiles) {\n      const newCounts: {[key: string]: number} = {};\n      outputFiles.forEach(folder => {\n        newCounts[folder.name] = folder.files.length;\n      });\n      setPreviousFileCount(newCounts);\n    }\n  }, [outputFiles]);\n\n  const hasNewFiles = (folderName: string, currentCount: number) => {\n    const prevCount = previousFileCount[folderName] || 0;\n    return currentCount > prevCount;\n  };\n\n  return (\n    <Card className=\"w-full\" data-testid=\"card-output-viewer\">\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Folder className=\"w-5 h-5\" />\n              Output Files\n            </CardTitle>\n            <CardDescription>\n              View and download generated visualizations and analysis results\n            </CardDescription>\n          </div>\n          <Button\n            onClick={() => refetch()}\n            variant=\"outline\"\n            size=\"sm\"\n            data-testid=\"button-refresh-files\"\n          >\n            <RefreshCw className=\"w-4 h-4 mr-2\" />\n            Refresh\n          </Button>\n        </div>\n      </CardHeader>\n      <CardContent>\n        {isLoading ? (\n          <div className=\"flex items-center justify-center py-8\">\n            <RefreshCw className=\"w-6 h-6 animate-spin mr-2\" />\n            <span>Loading output files...</span>\n          </div>\n        ) : !outputFiles || outputFiles.length === 0 ? (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            <FolderOpen className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n            <p>No output folders found</p>\n            <p className=\"text-sm\">Process some queries to generate visualizations</p>\n          </div>\n        ) : (\n          <ScrollArea className=\"h-[400px]\">\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 p-2\">\n              {outputFiles.map((folder) => (\n                <div\n                  key={folder.name}\n                  className=\"flex flex-col items-center p-4 rounded-lg hover:bg-secondary/50 cursor-pointer transition-colors group\"\n                  onClick={() => openFolder(folder)}\n                  data-testid={`folder-${folder.name}`}\n                >\n                  <div className=\"relative mb-2\">\n                    <Folder className=\"w-12 h-12 text-blue-500 group-hover:text-blue-600 transition-colors\" />\n                    <Badge \n                      variant=\"secondary\" \n                      className={`absolute -top-1 -right-1 text-xs px-1 py-0 min-w-0 h-5 rounded-full ${\n                        hasNewFiles(folder.name, folder.files.length) \n                          ? 'bg-red-500 text-white animate-pulse' \n                          : ''\n                      }`}\n                    >\n                      {folder.files.length}\n                    </Badge>\n                    {hasNewFiles(folder.name, folder.files.length) && (\n                      <div className=\"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping\" />\n                    )}\n                  </div>\n                  <p className=\"text-sm font-medium text-center line-clamp-2 leading-tight\">\n                    {folder.name}\n                  </p>\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    {folder.createdAt ? format(new Date(folder.createdAt), 'MMM dd, HH:mm') : 'Unknown time'}\n                  </p>\n                </div>\n              ))}\n            </div>\n          </ScrollArea>\n        )}\n\n        {/* Folder Contents Dialog */}\n        <Dialog open={isFolderDialogOpen} onOpenChange={setIsFolderDialogOpen}>\n          <DialogContent className=\"max-w-4xl max-h-[80vh]\">\n            <DialogHeader>\n              <DialogTitle className=\"flex items-center gap-2\">\n                <FolderOpen className=\"w-5 h-5 text-blue-500\" />\n                {selectedFolder?.name}\n              </DialogTitle>\n              <DialogDescription>\n                Created on {selectedFolder && selectedFolder.createdAt ? format(new Date(selectedFolder.createdAt), 'MMMM dd, yyyy at HH:mm') : 'Unknown date'} â€¢ {selectedFolder?.files.length} files\n              </DialogDescription>\n            </DialogHeader>\n            <ScrollArea className=\"max-h-[60vh]\">\n              <div className=\"grid grid-cols-1 gap-3 p-2\">\n                {selectedFolder?.files.map((file) => (\n                  <div\n                    key={file.path}\n                    className=\"flex items-center justify-between p-3 bg-secondary/30 rounded-md hover:bg-secondary/50 transition-colors\"\n                    data-testid={`file-${file.name}`}\n                  >\n                    <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                      <FileImage className=\"w-5 h-5 text-green-500 flex-shrink-0\" />\n                      <div className=\"min-w-0 flex-1\">\n                        <p className=\"font-medium text-sm truncate\">{file.name}</p>\n                        <div className=\"flex items-center gap-3 text-xs text-muted-foreground\">\n                          <span>{formatFileSize(file.size)}</span>\n                          <div className=\"flex items-center\">\n                            <Clock className=\"w-3 h-3 mr-1\" />\n                            {format(new Date(file.timestamp), 'MMM dd, HH:mm:ss')}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-2 flex-shrink-0\">\n                      {file.isImage && (\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => openImageViewer(file)}\n                          data-testid={`button-view-${file.name}`}\n                        >\n                          <Eye className=\"w-3 h-3 mr-1\" />\n                          View\n                        </Button>\n                      )}\n                      \n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => downloadFile(file.path, file.name)}\n                        data-testid={`button-download-${file.name}`}\n                      >\n                        <Download className=\"w-3 h-3 mr-1\" />\n                        Download\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </ScrollArea>\n          </DialogContent>\n        </Dialog>\n\n        {/* Image Viewer Dialog */}\n        <Dialog open={isImageDialogOpen} onOpenChange={setIsImageDialogOpen}>\n          <DialogContent className=\"max-w-4xl w-[90vw] max-h-[85vh]\">\n            <DialogHeader>\n              <DialogTitle>{selectedImage?.name}</DialogTitle>\n              <DialogDescription>\n                {selectedImage && (\n                  <div className=\"flex items-center gap-4 text-sm\">\n                    <span>{formatFileSize(selectedImage.size)}</span>\n                    <span>{format(new Date(selectedImage.timestamp), 'MMM dd, yyyy HH:mm:ss')}</span>\n                  </div>\n                )}\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"flex flex-col items-center p-4 max-h-[55vh]\">\n              {selectedImage && (\n                <img\n                  src={getImageUrl(selectedImage.path)}\n                  alt={selectedImage.name}\n                  className=\"max-w-full max-h-[50vh] object-contain rounded-lg shadow-lg\"\n                  data-testid={`image-${selectedImage.name}`}\n                  onError={(e) => {\n                    const target = e.target as HTMLImageElement;\n                    target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTkgOUgxNVYxNUg5VjlaIiBzdHJva2U9IiM5OTk5OTkiIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4K';\n                  }}\n                />\n              )}\n            </div>\n            {selectedImage && (\n              <div className=\"flex justify-center pt-2 border-t\">\n                <Button\n                  onClick={() => downloadFile(selectedImage.path, selectedImage.name)}\n                  className=\"flex items-center gap-2\"\n                >\n                  <Download className=\"w-4 h-4\" />\n                  Download Image\n                </Button>\n              </div>\n            )}\n          </DialogContent>\n        </Dialog>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":11180},"client/src/pages/settings.tsx":{"content":"import Sidebar from \"@/components/Sidebar\";\nimport EmailConfig from \"@/components/EmailConfig\";\nimport LLMPanel from \"@/components/LLMPanel\";\nimport MCPPanel from \"@/components/MCPPanel\";\nimport { Button } from \"@/components/ui/button\";\nimport { Settings, Save, RefreshCw } from \"lucide-react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface SystemStatus {\n  id: string;\n  component: string;\n  status: string;\n  lastCheck: string;\n  metadata: any;\n}\n\nexport default function SettingsPage() {\n  const { toast } = useToast();\n\n  const { data: systemStatus, isLoading } = useQuery<SystemStatus[]>({\n    queryKey: [\"/api/system-status\"],\n    refetchInterval: 30000,\n  });\n\n  const testConnectionsMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch(\"/api/test-connections\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n      });\n      if (!response.ok) throw new Error(\"Failed to test connections\");\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Connections Tested\",\n        description: \"All service connections have been tested successfully.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/system-status\"] });\n    },\n    onError: () => {\n      toast({\n        title: \"Test Failed\",\n        description: \"Failed to test service connections.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <RefreshCw className=\"h-8 w-8 animate-spin mx-auto mb-4 text-primary\" />\n          <p className=\"text-muted-foreground\">Loading settings...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const llmStatus = systemStatus?.find(s => s.component === 'llm');\n  const mcpStatus = systemStatus?.find(s => s.component === 'mcp_server');\n\n  return (\n    <div className=\"flex h-screen overflow-hidden bg-background\">\n      <Sidebar />\n      \n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        {/* Header */}\n        <header className=\"bg-card border-b border-border px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h2 className=\"text-xl font-semibold text-foreground flex items-center gap-2\">\n                <Settings className=\"w-5 h-5\" />\n                System Settings\n              </h2>\n              <p className=\"text-muted-foreground\">Configure email processing, LLM integration, and MCP services</p>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <Button\n                onClick={() => testConnectionsMutation.mutate()}\n                disabled={testConnectionsMutation.isPending}\n                variant=\"outline\"\n                data-testid=\"button-test-connections\"\n              >\n                <RefreshCw className={`w-4 h-4 mr-2 ${testConnectionsMutation.isPending ? 'animate-spin' : ''}`} />\n                Test Connections\n              </Button>\n            </div>\n          </div>\n        </header>\n\n        {/* Main Content */}\n        <main className=\"flex-1 overflow-auto p-6\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\n            {/* Email Configuration */}\n            <div className=\"space-y-4\">\n              <div className=\"border-b pb-2\">\n                <h3 className=\"text-lg font-semibold text-foreground\">Email Configuration</h3>\n                <p className=\"text-sm text-muted-foreground\">\n                  Configure IMAP and SMTP settings for email processing automation\n                </p>\n              </div>\n              <EmailConfig />\n            </div>\n\n            {/* LLM Integration */}\n            <div className=\"space-y-4\">\n              <div className=\"border-b pb-2\">\n                <h3 className=\"text-lg font-semibold text-foreground\">LLM Integration</h3>\n                <p className=\"text-sm text-muted-foreground\">\n                  Configure connection to Ollama LLM service for email content analysis\n                </p>\n              </div>\n              <LLMPanel status={llmStatus} />\n            </div>\n\n            {/* MCP Server */}\n            <div className=\"space-y-4\">\n              <div className=\"border-b pb-2\">\n                <h3 className=\"text-lg font-semibold text-foreground\">MCP Server Configuration</h3>\n                <p className=\"text-sm text-muted-foreground\">\n                  Manage Model Context Protocol server for LAS file processing and script execution\n                </p>\n              </div>\n              <MCPPanel status={mcpStatus} />\n            </div>\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}","size_bytes":4892},"client/src/lib/llmConfigStorage.ts":{"content":"// Local storage utilities for LLM configuration\n\nexport interface LLMConfig {\n  provider: string;\n  model: string;\n  endpoint?: string;\n  apiKey?: string;\n}\n\nconst LLM_CONFIG_KEY = 'llm_integration_config';\n\nexport const llmConfigStorage = {\n  // Get LLM configuration from localStorage\n  get(): LLMConfig | null {\n    try {\n      const stored = localStorage.getItem(LLM_CONFIG_KEY);\n      if (!stored) return null;\n      return JSON.parse(stored);\n    } catch (error) {\n      console.error('Failed to parse LLM config from localStorage:', error);\n      return null;\n    }\n  },\n\n  // Save LLM configuration to localStorage\n  set(config: LLMConfig): void {\n    try {\n      localStorage.setItem(LLM_CONFIG_KEY, JSON.stringify(config));\n    } catch (error) {\n      console.error('Failed to save LLM config to localStorage:', error);\n      throw error;\n    }\n  },\n\n  // Remove LLM configuration from localStorage\n  remove(): void {\n    try {\n      localStorage.removeItem(LLM_CONFIG_KEY);\n    } catch (error) {\n      console.error('Failed to remove LLM config from localStorage:', error);\n    }\n  },\n\n  // Check if configuration exists\n  exists(): boolean {\n    return localStorage.getItem(LLM_CONFIG_KEY) !== null;\n  },\n\n  // Get default/fallback configuration\n  getDefault(): LLMConfig {\n    return {\n      provider: 'ollama',\n      model: 'llama3.2:1b',\n      endpoint: 'https://88c46355da8c.ngrok-free.app'\n    };\n  }\n};","size_bytes":1421},"mcp_resources/scripts/lithology_classifier.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nLithology classification script for LAS file processing\nClassifies rock types based on well log responses\n\"\"\"\n\nimport sys\nimport matplotlib.pyplot as plt\nimport numpy as np\nfrom datetime import datetime\n\ndef classify_lithology(las_file_path, output_path):\n    \"\"\"\n    Classify lithology from well log data\n    \"\"\"\n    print(f\"Classifying lithology from: {las_file_path}\")\n    print(f\"Output will be saved to: {output_path}\")\n    \n    # Simulate well log data\n    depths = np.linspace(8500, 8600, 200)\n    gamma_ray = 65 + 20 * np.sin(depths/50) + np.random.normal(0, 5, len(depths))\n    neutron = 0.15 + 0.1 * np.sin(depths/30) + np.random.normal(0, 0.03, len(depths))\n    density = 2.4 + 0.3 * np.sin(depths/40) + np.random.normal(0, 0.1, len(depths))\n    \n    # Classify lithology based on log responses\n    lithology = np.full(len(depths), 'Unknown', dtype='U20')\n    \n    # Sandstone: Low GR, medium density, variable neutron\n    sandstone_mask = (gamma_ray < 60) & (density > 2.2) & (density < 2.7)\n    lithology[sandstone_mask] = 'Sandstone'\n    \n    # Shale: High GR, high neutron, variable density\n    shale_mask = (gamma_ray > 80) & (neutron > 0.2)\n    lithology[shale_mask] = 'Shale'\n    \n    # Limestone: Medium GR, low neutron, high density\n    limestone_mask = (gamma_ray < 70) & (neutron < 0.15) & (density > 2.6)\n    lithology[limestone_mask] = 'Limestone'\n    \n    # Dolomite: Low GR, very low neutron, high density\n    dolomite_mask = (gamma_ray < 50) & (neutron < 0.1) & (density > 2.8)\n    lithology[dolomite_mask] = 'Dolomite'\n    \n    # Create visualization\n    fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, figsize=(16, 12))\n    \n    # Plot 1: Well logs\n    ax1_twin1 = ax1.twiny()\n    ax1_twin2 = ax1.twiny()\n    \n    ax1.plot(gamma_ray, depths, 'g-', linewidth=1.5, label='Gamma Ray')\n    ax1_twin1.plot(neutron*100, depths, 'b-', linewidth=1.5, label='Neutron')\n    ax1_twin2.plot(density, depths, 'r-', linewidth=1.5, label='Density')\n    \n    ax1.set_xlabel('Gamma Ray (GAPI)', color='g')\n    ax1_twin1.set_xlabel('Neutron Porosity (%)', color='b')\n    ax1_twin2.set_xlabel('Density (g/cc)', color='r')\n    ax1.set_ylabel('Depth (ft)')\n    ax1.set_title('Well Log Data')\n    ax1.invert_yaxis()\n    ax1.grid(True, alpha=0.3)\n    \n    # Offset the twin axes\n    ax1_twin2.spines['top'].set_position(('outward', 60))\n    \n    # Plot 2: Lithology column\n    unique_lithologies = np.unique(lithology)\n    colors = {'Sandstone': 'yellow', 'Shale': 'gray', 'Limestone': 'lightblue', \n              'Dolomite': 'lightgreen', 'Unknown': 'white'}\n    \n    for i, lith in enumerate(unique_lithologies):\n        mask = lithology == lith\n        if np.any(mask):\n            ax2.fill_betweenx(depths[mask], 0, 1, alpha=0.8, color=colors.get(lith, 'white'), \n                             label=f'{lith} ({np.sum(mask)} samples)')\n    \n    ax2.set_xlim(0, 1)\n    ax2.set_ylabel('Depth (ft)')\n    ax2.set_title('Lithology Column')\n    ax2.invert_yaxis()\n    ax2.legend(loc='center left', bbox_to_anchor=(1, 0.5))\n    ax2.set_xticks([])\n    \n    # Plot 3: Neutron-Density crossplot\n    for lith in unique_lithologies:\n        mask = lithology == lith\n        if np.any(mask) and lith != 'Unknown':\n            ax3.scatter(density[mask], neutron[mask]*100, alpha=0.7, \n                       color=colors.get(lith, 'black'), label=lith, s=30)\n    \n    ax3.set_xlabel('Density (g/cc)')\n    ax3.set_ylabel('Neutron Porosity (%)')\n    ax3.set_title('Neutron-Density Crossplot')\n    ax3.grid(True, alpha=0.3)\n    ax3.legend()\n    \n    # Plot 4: Lithology statistics\n    lith_counts = {}\n    for lith in unique_lithologies:\n        count = np.sum(lithology == lith)\n        percentage = count / len(lithology) * 100\n        lith_counts[lith] = percentage\n    \n    # Bar chart of lithology percentages\n    bars = ax4.bar(range(len(lith_counts)), list(lith_counts.values()), \n                   color=[colors.get(lith, 'gray') for lith in lith_counts.keys()])\n    ax4.set_xlabel('Lithology Type')\n    ax4.set_ylabel('Percentage (%)')\n    ax4.set_title('Lithology Distribution')\n    ax4.set_xticks(range(len(lith_counts)))\n    ax4.set_xticklabels(list(lith_counts.keys()), rotation=45)\n    ax4.grid(True, alpha=0.3)\n    \n    # Add percentage labels on bars\n    for bar, percentage in zip(bars, lith_counts.values()):\n        height = bar.get_height()\n        ax4.text(bar.get_x() + bar.get_width()/2., height + 0.5,\n                f'{percentage:.1f}%', ha='center', va='bottom')\n    \n    plt.tight_layout()\n    plt.savefig(output_path, dpi=150, bbox_inches='tight')\n    plt.close()\n    \n    print(f\"Lithology classification completed and saved to {output_path}\")\n    return True\n\nif __name__ == \"__main__\":\n    if len(sys.argv) != 3:\n        print(\"Usage: python lithology_classifier.py <las_file> <output_file>\")\n        sys.exit(1)\n    \n    las_file = sys.argv[1]\n    output_file = sys.argv[2]\n    \n    success = classify_lithology(las_file, output_file)\n    if success:\n        print(\"Analysis completed successfully\")\n    else:\n        print(\"Analysis failed\")\n        sys.exit(1)","size_bytes":5118},"mcp_resources/scripts/porosity_calculator.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nPorosity calculation script for LAS file processing\nCalculates porosity from neutron and density logs\n\"\"\"\n\nimport sys\nimport matplotlib.pyplot as plt\nimport numpy as np\nfrom datetime import datetime\n\ndef calculate_porosity(las_file_path, output_path):\n    \"\"\"\n    Calculate porosity from well log data\n    \"\"\"\n    print(f\"Calculating porosity from: {las_file_path}\")\n    print(f\"Output will be saved to: {output_path}\")\n    \n    # Simulate porosity calculation\n    depths = np.linspace(8500, 8600, 200)\n    neutron_porosity = 0.15 + 0.1 * np.sin(depths/30) + np.random.normal(0, 0.03, len(depths))\n    density_porosity = 0.12 + 0.08 * np.sin(depths/35) + np.random.normal(0, 0.025, len(depths))\n    \n    # Keep porosity values between 0 and 0.4\n    neutron_porosity = np.clip(neutron_porosity, 0, 0.4)\n    density_porosity = np.clip(density_porosity, 0, 0.4)\n    \n    # Calculate average porosity\n    avg_porosity = (neutron_porosity + density_porosity) / 2\n    \n    # Create visualization\n    fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, figsize=(14, 10))\n    \n    # Plot 1: Porosity vs Depth\n    ax1.plot(neutron_porosity*100, depths, 'b-', linewidth=1.5, label='Neutron Porosity')\n    ax1.plot(density_porosity*100, depths, 'r-', linewidth=1.5, label='Density Porosity')\n    ax1.plot(avg_porosity*100, depths, 'k-', linewidth=2, label='Average Porosity')\n    ax1.set_xlabel('Porosity (%)')\n    ax1.set_ylabel('Depth (ft)')\n    ax1.set_title('Porosity Logs')\n    ax1.invert_yaxis()\n    ax1.grid(True, alpha=0.3)\n    ax1.legend()\n    \n    # Plot 2: Neutron vs Density Porosity\n    ax2.scatter(density_porosity*100, neutron_porosity*100, alpha=0.6, c='purple')\n    ax2.plot([0, 40], [0, 40], 'k--', alpha=0.5, label='1:1 Line')\n    ax2.set_xlabel('Density Porosity (%)')\n    ax2.set_ylabel('Neutron Porosity (%)')\n    ax2.set_title('Neutron vs Density Porosity')\n    ax2.grid(True, alpha=0.3)\n    ax2.legend()\n    \n    # Plot 3: Porosity quality zones\n    high_porosity = avg_porosity > 0.2\n    medium_porosity = (avg_porosity >= 0.1) & (avg_porosity <= 0.2)\n    low_porosity = avg_porosity < 0.1\n    \n    ax3.fill_betweenx(depths[high_porosity], 0, 1, alpha=0.3, color='green', label='High Porosity (>20%)')\n    ax3.fill_betweenx(depths[medium_porosity], 0, 1, alpha=0.3, color='yellow', label='Medium Porosity (10-20%)')\n    ax3.fill_betweenx(depths[low_porosity], 0, 1, alpha=0.3, color='red', label='Low Porosity (<10%)')\n    ax3.set_xlim(0, 1)\n    ax3.set_ylabel('Depth (ft)')\n    ax3.set_title('Porosity Quality Zones')\n    ax3.invert_yaxis()\n    ax3.legend()\n    ax3.set_xticks([])\n    \n    # Plot 4: Statistics and histograms\n    ax4_sub1 = plt.subplot2grid((2, 2), (1, 1), rowspan=1, colspan=1)\n    ax4_sub1.hist(avg_porosity*100, bins=15, alpha=0.7, color='orange', edgecolor='black')\n    ax4_sub1.set_xlabel('Average Porosity (%)')\n    ax4_sub1.set_ylabel('Frequency')\n    ax4_sub1.set_title('Porosity Distribution')\n    ax4_sub1.grid(True, alpha=0.3)\n    \n    # Add statistics text\n    mean_por = np.mean(avg_porosity) * 100\n    std_por = np.std(avg_porosity) * 100\n    min_por = np.min(avg_porosity) * 100\n    max_por = np.max(avg_porosity) * 100\n    high_per = np.sum(high_porosity) / len(high_porosity) * 100\n    \n    stats_text = f'Mean: {mean_por:.1f}%\\nStd: {std_por:.1f}%\\nMin: {min_por:.1f}%\\nMax: {max_por:.1f}%\\nHigh Quality: {high_per:.1f}%'\n    ax4_sub1.text(0.7, 0.7, stats_text, transform=ax4_sub1.transAxes, fontsize=10, \n                  bbox=dict(boxstyle=\"round,pad=0.3\", facecolor=\"lightblue\", alpha=0.8))\n    \n    plt.tight_layout()\n    plt.savefig(output_path, dpi=150, bbox_inches='tight')\n    plt.close()\n    \n    print(f\"Porosity calculation completed and saved to {output_path}\")\n    return True\n\nif __name__ == \"__main__\":\n    if len(sys.argv) != 3:\n        print(\"Usage: python porosity_calculator.py <las_file> <output_file>\")\n        sys.exit(1)\n    \n    las_file = sys.argv[1]\n    output_file = sys.argv[2]\n    \n    success = calculate_porosity(las_file, output_file)\n    if success:\n        print(\"Analysis completed successfully\")\n    else:\n        print(\"Analysis failed\")\n        sys.exit(1)","size_bytes":4171},"mcp_resources/scripts/resistivity_analyzer.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nResistivity analysis script for LAS file processing\nAnalyzes resistivity logs and generates formation evaluation\n\"\"\"\n\nimport sys\nimport matplotlib.pyplot as plt\nimport numpy as np\nfrom datetime import datetime\n\ndef analyze_resistivity(las_file_path, output_path):\n    \"\"\"\n    Analyze resistivity data from LAS file\n    \"\"\"\n    print(f\"Analyzing resistivity data from: {las_file_path}\")\n    print(f\"Output will be saved to: {output_path}\")\n    \n    # Simulate resistivity analysis\n    depths = np.linspace(8500, 8600, 200)\n    deep_res = 50 + 30 * np.sin(depths/40) + np.random.normal(0, 8, len(depths))\n    shallow_res = deep_res * 0.7 + np.random.normal(0, 5, len(depths))\n    \n    # Keep values positive\n    deep_res = np.abs(deep_res)\n    shallow_res = np.abs(shallow_res)\n    \n    # Create analysis visualization\n    fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, figsize=(14, 10))\n    \n    # Plot 1: Resistivity vs Depth\n    ax1.semilogx(deep_res, depths, 'b-', linewidth=1.5, label='Deep Resistivity')\n    ax1.semilogx(shallow_res, depths, 'g-', linewidth=1.5, label='Shallow Resistivity')\n    ax1.set_xlabel('Resistivity (ohm-m)')\n    ax1.set_ylabel('Depth (ft)')\n    ax1.set_title('Resistivity Logs')\n    ax1.invert_yaxis()\n    ax1.grid(True, alpha=0.3)\n    ax1.legend()\n    \n    # Plot 2: Deep vs Shallow Resistivity\n    ax2.scatter(shallow_res, deep_res, alpha=0.6, c='red')\n    ax2.set_xlabel('Shallow Resistivity (ohm-m)')\n    ax2.set_ylabel('Deep Resistivity (ohm-m)')\n    ax2.set_title('Deep vs Shallow Resistivity')\n    ax2.grid(True, alpha=0.3)\n    \n    # Plot 3: Formation evaluation zones\n    hydrocarbon_zones = deep_res > 20\n    water_zones = deep_res <= 20\n    \n    ax3.fill_betweenx(depths[hydrocarbon_zones], 0, 1, alpha=0.3, color='green', label='Potential Hydrocarbon')\n    ax3.fill_betweenx(depths[water_zones], 0, 1, alpha=0.3, color='blue', label='Water-bearing')\n    ax3.set_xlim(0, 1)\n    ax3.set_ylabel('Depth (ft)')\n    ax3.set_title('Formation Evaluation')\n    ax3.invert_yaxis()\n    ax3.legend()\n    ax3.set_xticks([])\n    \n    # Plot 4: Statistics\n    mean_deep = np.mean(deep_res)\n    mean_shallow = np.mean(shallow_res)\n    hc_percentage = np.sum(hydrocarbon_zones) / len(hydrocarbon_zones) * 100\n    \n    ax4.text(0.1, 0.8, f'Deep Res Mean: {mean_deep:.1f} ohm-m', transform=ax4.transAxes, fontsize=12)\n    ax4.text(0.1, 0.7, f'Shallow Res Mean: {mean_shallow:.1f} ohm-m', transform=ax4.transAxes, fontsize=12)\n    ax4.text(0.1, 0.6, f'HC Zones: {hc_percentage:.1f}%', transform=ax4.transAxes, fontsize=12)\n    ax4.text(0.1, 0.5, f'Water Zones: {100-hc_percentage:.1f}%', transform=ax4.transAxes, fontsize=12)\n    ax4.text(0.1, 0.4, f'Depth Range: {depths[0]:.0f}-{depths[-1]:.0f} ft', transform=ax4.transAxes, fontsize=12)\n    ax4.set_title('Analysis Summary')\n    ax4.set_xlim(0, 1)\n    ax4.set_ylim(0, 1)\n    ax4.axis('off')\n    \n    plt.tight_layout()\n    plt.savefig(output_path, dpi=150, bbox_inches='tight')\n    plt.close()\n    \n    print(f\"Resistivity analysis completed and saved to {output_path}\")\n    return True\n\nif __name__ == \"__main__\":\n    if len(sys.argv) != 3:\n        print(\"Usage: python resistivity_analyzer.py <las_file> <output_file>\")\n        sys.exit(1)\n    \n    las_file = sys.argv[1]\n    output_file = sys.argv[2]\n    \n    success = analyze_resistivity(las_file, output_file)\n    if success:\n        print(\"Analysis completed successfully\")\n    else:\n        print(\"Analysis failed\")\n        sys.exit(1)","size_bytes":3499},"server/services/mcpResourceService.ts":{"content":"import fs from 'fs';\nimport path from 'path';\n\nexport interface MCPScript {\n  name: string;\n  path: string;\n  description: string;\n  tool: string;\n  suitableFor: string[];\n}\n\nexport interface MCPLasFile {\n  name: string;\n  path: string;\n  description: string;\n  logs: string[];\n  wellType: string;\n}\n\nexport interface MCPResources {\n  scripts: MCPScript[];\n  lasFiles: MCPLasFile[];\n  tools: string[];\n}\n\nclass MCPResourceService {\n  private resources: MCPResources | null = null;\n\n  async discoverResources(): Promise<MCPResources> {\n    if (this.resources) {\n      return this.resources;\n    }\n\n    const scriptsDir = path.join(process.cwd(), 'mcp_resources', 'scripts');\n    const lasFilesDir = path.join(process.cwd(), 'mcp_resources', 'las_files');\n\n    // Discover scripts\n    const scripts: MCPScript[] = [];\n    if (fs.existsSync(scriptsDir)) {\n      const scriptFiles = fs.readdirSync(scriptsDir).filter(f => f.endsWith('.py'));\n      \n      for (const scriptFile of scriptFiles) {\n        const scriptPath = path.join(scriptsDir, scriptFile);\n        const content = fs.readFileSync(scriptPath, 'utf-8');\n        \n        // Extract metadata from script content\n        scripts.push(this.parseScriptMetadata(scriptFile, content));\n      }\n    }\n\n    // Discover LAS files\n    const lasFiles: MCPLasFile[] = [];\n    if (fs.existsSync(lasFilesDir)) {\n      const lasFileList = fs.readdirSync(lasFilesDir).filter(f => f.endsWith('.las'));\n      \n      for (const lasFile of lasFileList) {\n        const lasPath = path.join(lasFilesDir, lasFile);\n        const content = fs.readFileSync(lasPath, 'utf-8');\n        \n        // Extract metadata from LAS file content\n        lasFiles.push(this.parseLasMetadata(lasFile, content));\n      }\n    }\n\n    // Define available tools\n    const tools = scripts.map(s => s.tool);\n\n    this.resources = { scripts, lasFiles, tools };\n    return this.resources;\n  }\n\n  private parseScriptMetadata(filename: string, content: string): MCPScript {\n    const name = filename;\n    const path = `scripts/${filename}`;\n    \n    // Extract description and metadata from comments\n    let description = '';\n    let tool = '';\n    let suitableFor: string[] = [];\n\n    if (filename === 'depth_visualization.py') {\n      description = 'Creates depth-based visualization plots from LAS well log data';\n      tool = 'depth_plotter';\n      suitableFor = ['depth analysis', 'visualization', 'plotting', 'charts'];\n    } else if (filename === 'gamma_ray_analyzer.py') {\n      description = 'Analyzes gamma ray logs for radioactivity and formation evaluation';\n      tool = 'gamma_analyzer';\n      suitableFor = ['gamma ray', 'radioactivity', 'formation evaluation', 'statistical analysis'];\n    } else if (filename === 'resistivity_analyzer.py') {\n      description = 'Analyzes resistivity logs for formation evaluation and hydrocarbon detection';\n      tool = 'resistivity_analyzer';\n      suitableFor = ['resistivity', 'formation evaluation', 'hydrocarbon detection', 'electrical properties'];\n    } else if (filename === 'porosity_calculator.py') {\n      description = 'Calculates porosity from neutron and density logs';\n      tool = 'porosity_calculator';\n      suitableFor = ['porosity', 'neutron logs', 'density logs', 'pore space', 'reservoir quality'];\n    } else if (filename === 'lithology_classifier.py') {\n      description = 'Classifies rock types using multiple log responses';\n      tool = 'lithology_classifier';\n      suitableFor = ['lithology', 'rock classification', 'formation typing', 'geology'];\n    }\n\n    return { name, path, description, tool, suitableFor };\n  }\n\n  private parseLasMetadata(filename: string, content: string): MCPLasFile {\n    const name = filename;\n    const path = `las_files/${filename}`;\n    \n    // Extract logs from LAS file header\n    const logs: string[] = [];\n    const lines = content.split('\\n');\n    let inCurveSection = false;\n    \n    for (const line of lines) {\n      if (line.startsWith('~C') || line.includes('CURVE INFORMATION')) {\n        inCurveSection = true;\n        continue;\n      }\n      if (line.startsWith('~') && inCurveSection) {\n        break;\n      }\n      if (inCurveSection && line.trim() && !line.startsWith('#')) {\n        const parts = line.split('.');\n        if (parts.length > 0) {\n          const logName = parts[0].trim();\n          if (logName && !logs.includes(logName)) {\n            logs.push(logName);\n          }\n        }\n      }\n    }\n\n    // Define metadata based on filename\n    let description = '';\n    let wellType = '';\n\n    if (filename === 'sample_well_01.las') {\n      description = 'Basic well log data with depth, gamma ray, and resistivity measurements';\n      wellType = 'development';\n    } else if (filename === 'production_well_02.las') {\n      description = 'Production well data with comprehensive gamma ray analysis logs';\n      wellType = 'production';\n    } else if (filename === 'offshore_well_03.las') {\n      description = 'Offshore drilling data with neutron and density porosity logs';\n      wellType = 'offshore';\n    } else if (filename === 'exploration_well_04.las') {\n      description = 'Deep exploration data with comprehensive resistivity logging suite';\n      wellType = 'exploration';\n    } else if (filename === 'development_well_05.las') {\n      description = 'Development well with advanced logging suite for lithology analysis';\n      wellType = 'development';\n    }\n\n    return { name, path, description, logs, wellType };\n  }\n\n  getResourcesForLLM(): string {\n    if (!this.resources) {\n      return 'No MCP resources discovered yet.';\n    }\n\n    const { scripts, lasFiles } = this.resources;\n\n    let output = 'AVAILABLE MCP RESOURCES:\\n\\n';\n    \n    output += 'ðŸ“ SCRIPTS (@mcp.tool):\\n';\n    scripts.forEach(script => {\n      output += `  â€¢ ${script.name}\\n`;\n      output += `    Tool: ${script.tool}\\n`;\n      output += `    Purpose: ${script.description}\\n`;\n      output += `    Best for: ${script.suitableFor.join(', ')}\\n\\n`;\n    });\n\n    output += 'ðŸ“„ LAS FILES (@mcp.resource):\\n';\n    lasFiles.forEach(file => {\n      output += `  â€¢ ${file.name}\\n`;\n      output += `    Type: ${file.wellType} well\\n`;\n      output += `    Description: ${file.description}\\n`;\n      output += `    Available logs: ${file.logs.slice(0, 5).join(', ')}${file.logs.length > 5 ? '...' : ''}\\n\\n`;\n    });\n\n    return output;\n  }\n\n  async findBestMatch(query: string): Promise<{script: string, lasFile: string, tool: string, reasoning: string}> {\n    const resources = await this.discoverResources();\n    const resourceInfo = this.getResourcesForLLM();\n    \n    // Use keyword matching logic\n    const queryLower = query.toLowerCase();\n    \n    // Check for specific script mentions\n    for (const script of resources.scripts) {\n      if (queryLower.includes(script.name.replace('.py', ''))) {\n        const defaultLasFile = this.getDefaultLasForScript(script.name);\n        return {\n          script: script.name,\n          lasFile: defaultLasFile,\n          tool: script.tool,\n          reasoning: `User specifically requested ${script.name}`\n        };\n      }\n    }\n\n    // Check for keyword matches\n    for (const script of resources.scripts) {\n      for (const keyword of script.suitableFor) {\n        if (queryLower.includes(keyword.toLowerCase())) {\n          const defaultLasFile = this.getDefaultLasForScript(script.name);\n          return {\n            script: script.name,\n            lasFile: defaultLasFile,\n            tool: script.tool,\n            reasoning: `Query mentions \"${keyword}\" which matches ${script.name}`\n          };\n        }\n      }\n    }\n\n    // Default fallback\n    return {\n      script: 'depth_visualization.py',\n      lasFile: 'sample_well_01.las',\n      tool: 'depth_plotter',\n      reasoning: 'No specific match found, using default depth visualization'\n    };\n  }\n\n  private getDefaultLasForScript(scriptName: string): string {\n    const mapping: Record<string, string> = {\n      'depth_visualization.py': 'sample_well_01.las',\n      'gamma_ray_analyzer.py': 'production_well_02.las',\n      'resistivity_analyzer.py': 'exploration_well_04.las',\n      'porosity_calculator.py': 'offshore_well_03.las',\n      'lithology_classifier.py': 'development_well_05.las'\n    };\n    return mapping[scriptName] || 'sample_well_01.las';\n  }\n}\n\nexport const mcpResourceService = new MCPResourceService();","size_bytes":8384},"SETUP.md":{"content":"# Email-to-LAS Processing Automation System - Local Setup Guide\n\nThis guide provides step-by-step instructions for setting up the Email-to-LAS Processing Automation System on your local PC.\n\n## Prerequisites\n\nBefore you begin, ensure you have the following installed on your system:\n\n### 1. Node.js and npm\n- **Download**: Visit [nodejs.org](https://nodejs.org/)\n- **Version Required**: Node.js 18.x or higher\n- **Installation**: Download the LTS version and follow the installer instructions\n- **Verify Installation**:\n  ```bash\n  node --version\n  npm --version\n  ```\n\n### 2. Python (for MCP resources and scripts)\n- **Download**: Visit [python.org](https://python.org/)\n- **Version Required**: Python 3.8 or higher\n- **Installation**: Download and install, ensure \"Add Python to PATH\" is checked\n- **Verify Installation**:\n  ```bash\n  python --version\n  # or\n  python3 --version\n  ```\n\n### 3. Git\n- **Download**: Visit [git-scm.com](https://git-scm.com/)\n- **Installation**: Follow the installer instructions for your operating system\n- **Verify Installation**:\n  ```bash\n  git --version\n  ```\n\n**Note**: This project now uses JSON files for data storage instead of a database, making setup much simpler!\n\n## Project Setup Instructions\n\n### Step 1: Clone the Repository\n```bash\ngit clone <your-repository-url>\ncd <project-directory>\n```\n\n### Step 2: Install Node.js Dependencies\n```bash\nnpm install\n```\n\nThis will install all the required dependencies including:\n- Express.js (backend framework)\n- React + Vite (frontend)\n- Drizzle ORM (database)\n- TypeScript\n- Tailwind CSS\n- And many other packages listed in package.json\n\n### Step 3: Install Python Dependencies\n\nThis project uses `uv` for Python package management, which provides faster and more reliable dependency resolution.\n\n#### Option 1: Automatic Installation (Recommended)\nThe Python dependencies will be automatically installed when you run the application for the first time. The project includes a `pyproject.toml` file that defines all required packages.\n\n#### Option 2: Manual Installation\nIf you want to install Python dependencies manually:\n\n```bash\n# Navigate to the project root\ncd <project-directory>\n\n# Install uv (Python package manager)\npip install uv\n\n# Install project dependencies\nuv add matplotlib numpy pandas lasio\n\n# Or install individually if needed\nuv add matplotlib\nuv add numpy  \nuv add pandas\nuv add lasio\n```\n\n#### Required Python Packages:\n- **matplotlib**: For generating data visualizations and charts\n- **numpy**: For numerical computations and data processing\n- **pandas**: For data manipulation and analysis\n- **lasio**: For reading and processing LAS (Log ASCII Standard) files\n\n### Step 4: Configuration Setup (Optional)\n\nThe application now uses JSON files for data storage, so no database setup is required! However, you can still configure optional features:\n\n1. Create a `.env` file in the project root (optional):\n```bash\ntouch .env\n```\n\n2. Add optional configuration to `.env`:\n```env\n# Email Configuration (optional for initial setup)\nIMAP_HOST=\"imap.gmail.com\"\nIMAP_PORT=993\nIMAP_USER=\"your-email@gmail.com\"\nIMAP_PASSWORD=\"your-app-password\"\n\nSMTP_HOST=\"smtp.gmail.com\"\nSMTP_PORT=587\nSMTP_USER=\"your-email@gmail.com\"\nSMTP_PASSWORD=\"your-app-password\"\n\n# LLM Configuration (optional)\nLLM_ENDPOINT=\"http://localhost:11434\"\nLLM_MODEL=\"llama3.2:1b\"\n\n# Session Secret (optional, will use default if not provided)\nSESSION_SECRET=\"your-secret-key-here\"\n```\n\n**Data Storage**: The application automatically creates a `data/storage.json` file to store all your data. No setup required!\n\n### Step 5: Email Configuration (Optional)\n\nIf you want to enable email processing features:\n\n#### For Gmail:\n1. Enable 2-Factor Authentication on your Gmail account\n2. Generate an App Password:\n   - Go to Google Account settings\n   - Security â†’ 2-Step Verification â†’ App passwords\n   - Generate a password for \"Mail\"\n3. Use this app password in your `.env` file\n\n#### For Other Email Providers:\n- Update the IMAP/SMTP settings in `.env` according to your provider's documentation\n\n### Step 6: LLM Setup (Optional)\n\nFor AI-powered email processing:\n\n#### Option 1: Ollama (Local)\n```bash\n# Install Ollama from https://ollama.com/\n# Then pull the required model\nollama pull llama3.2:1b\n```\n\n#### Option 2: OpenAI API\nUpdate your `.env` file:\n```env\nLLM_ENDPOINT=\"https://api.openai.com/v1\"\nLLM_MODEL=\"gpt-3.5-turbo\"\nOPENAI_API_KEY=\"your-openai-api-key\"\n```\n\n### Step 5: Start the Development Server\n```bash\nnpm run dev\n```\n\nThis command will:\n- Start the Express.js backend server\n- Start the Vite development server for the React frontend\n- Enable hot module replacement for development\n\nThe application will be available at: `http://localhost:5000`\n\n## Python Environment Verification\n\nBefore testing the main application, verify that the Python environment is working correctly:\n\n### Test Python Dependencies\n```bash\n# Test that all packages are available\nuv run python -c \"import matplotlib, numpy, pandas, lasio; print('All Python dependencies are working!')\"\n\n# Test a specific analysis script\ncd mcp_resources\nuv run python scripts/gamma_ray_analyzer.py las_files/production_well_02.las ../output/test_gamma.png\n\n# Check if the output file was created\nls -la output/test_gamma.png\n```\n\n### Verify LAS File Processing\n```bash\n# List available LAS files\nls -la mcp_resources/las_files/\n\n# List available analysis scripts  \nls -la mcp_resources/scripts/\n```\n\nYou should see files like:\n- `production_well_02.las` - Sample LAS data file\n- `gamma_ray_analyzer.py` - Gamma ray analysis script\n- `depth_visualization.py` - Depth plotting script\n- And other analysis scripts\n\n## Verification Steps\n\n### 1. Check Frontend\n- Open `http://localhost:5000` in your browser\n- You should see the dashboard with system status indicators\n- Verify that the navigation works (Dashboard, Settings pages)\n\n### 2. Check Backend API\n- Open `http://localhost:5000/api/dashboard` in your browser\n- You should see JSON data with system status\n\n### 3. Check Data Storage\n- The dashboard should show system status indicators\n- Data is automatically saved to `data/storage.json`\n- No database setup required!\n\n### 4. Check Email Integration (if configured)\n- Navigate to Settings page\n- Configure email credentials\n- Test email connection\n\n## Production Build\n\nTo build for production:\n\n```bash\n# Build the application\nnpm run build\n\n# Start production server\nnpm run start\n```\n\n## File Structure Overview\n\n```\nproject-root/\nâ”œâ”€â”€ client/                 # React frontend\nâ”‚   â”œâ”€â”€ src/\nâ”‚   â”‚   â”œâ”€â”€ components/     # React components\nâ”‚   â”‚   â”œâ”€â”€ pages/         # Page components\nâ”‚   â”‚   â”œâ”€â”€ lib/           # Utility functions\nâ”‚   â”‚   â””â”€â”€ hooks/         # Custom React hooks\nâ”‚   â””â”€â”€ index.html\nâ”œâ”€â”€ server/                 # Express backend\nâ”‚   â”œâ”€â”€ services/          # Business logic services\nâ”‚   â”œâ”€â”€ routes.ts          # API routes\nâ”‚   â”œâ”€â”€ index.ts           # Server entry point\nâ”‚   â””â”€â”€ vite.ts            # Vite integration\nâ”œâ”€â”€ shared/                 # Shared TypeScript types\nâ”œâ”€â”€ mcp_resources/          # Python scripts and LAS files\nâ”‚   â”œâ”€â”€ scripts/           # Data processing scripts\nâ”‚   â””â”€â”€ las_files/         # Sample LAS files\nâ”œâ”€â”€ package.json           # Node.js dependencies\nâ”œâ”€â”€ pyproject.toml         # Python project configuration\nâ”œâ”€â”€ vite.config.ts         # Vite configuration\nâ”œâ”€â”€ drizzle.config.ts      # Database configuration\nâ””â”€â”€ .env                   # Environment variables (create this)\n```\n\n## Common Issues and Solutions\n\n### Issue: \"Data not saving or loading\"\n- **Solution**: Check that the application has write permissions in the project directory\n- Ensure the `data/` folder can be created\n- Check file system permissions\n\n### Issue: \"Module not found\" errors\n- **Solution**: Run `npm install` again\n- Delete `node_modules` and `package-lock.json`, then run `npm install`\n\n### Issue: Python scripts not working\n- **Solution**: Ensure Python dependencies are installed using uv: `uv add matplotlib numpy pandas lasio`\n- Verify uv is installed: `pip install uv`\n- Test Python environment: `uv run python -c \"import matplotlib; print('Working!')\"`\n- Check that scripts are being executed with `uv run python` not plain `python3`\n\n### Issue: Email features not working\n- **Solution**: Verify email credentials in `.env`\n- For Gmail, ensure you're using an App Password, not your regular password\n- Check IMAP/SMTP settings for your email provider\n\n### Issue: Port 5000 already in use\n- **Solution**: Kill the process using port 5000 or change the port in `server/index.ts`\n- On macOS/Linux: `lsof -ti:5000 | xargs kill -9`\n- On Windows: `netstat -ano | findstr :5000` then `taskkill /PID <PID> /F`\n\n## Support\n\nIf you encounter any issues during setup:\n1. Check the console output for specific error messages\n2. Verify all prerequisites are properly installed\n3. Ensure your `.env` file is correctly configured\n4. Check that all required services (database, email) are accessible\n\n## Next Steps\n\nAfter successful setup:\n1. Configure email credentials in the Settings page\n2. Upload LAS files to the `mcp_resources/las_files/` directory\n3. Test the email processing workflow\n4. Monitor the dashboard for system status and processing logs","size_bytes":9383},"langchain_scripts/langchain_agent.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nLangchain MCP Agent for LAS file analysis\nProduction-ready agent using Model Context Protocol (MCP) servers with proper Langchain integration.\nNo fallback code - pure MCP server integration using langchain-mcp-adapters.\n\"\"\"\n\nimport asyncio\nimport json\nimport sys\nimport os\nfrom typing import Dict, List, Any, Optional\nfrom pathlib import Path\n\nfrom langchain_mcp_adapters.client import MultiServerMCPClient\nfrom langgraph.prebuilt import create_react_agent\nfrom langchain_core.messages import SystemMessage, HumanMessage\nfrom langchain_ollama import ChatOllama\n\nclass LangchainMCPAgent:\n    def __init__(self):\n        self.mcp_resources_path = os.environ.get('MCP_RESOURCES_PATH', './mcp_resources')\n        self.output_path = os.environ.get('MCP_OUTPUT_PATH', './output')\n        self.mcp_client = None\n        self.agent = None\n        self.tools = []\n\n    async def initialize_agent(self, llm_config: Optional[Dict] = None):\n        \"\"\"Initialize Langchain MCP agent with real MCP server connections\"\"\"\n        try:\n            # Configure MCP servers for LAS analysis tools\n            mcp_servers_config = {\n                \"depth_plotter\": {\n                    \"command\": sys.executable,\n                    \"args\": [str(Path(\"./mcp_servers/depth_plotter_server.py\"))],\n                    \"transport\": \"stdio\",\n                    \"env\": {\n                        \"PYTHONPATH\": str(Path.cwd()),\n                        \"MCP_RESOURCES_PATH\": self.mcp_resources_path,\n                        \"MCP_OUTPUT_PATH\": self.output_path\n                    }\n                },\n                \"gamma_ray_analyzer\": {\n                    \"command\": sys.executable,\n                    \"args\": [str(Path(\"./mcp_servers/gamma_ray_server.py\"))],\n                    \"transport\": \"stdio\",\n                    \"env\": {\n                        \"PYTHONPATH\": str(Path.cwd()),\n                        \"MCP_RESOURCES_PATH\": self.mcp_resources_path,\n                        \"MCP_OUTPUT_PATH\": self.output_path\n                    }\n                },\n                \"porosity_calculator\": {\n                    \"command\": sys.executable,\n                    \"args\": [str(Path(\"./mcp_servers/porosity_server.py\"))],\n                    \"transport\": \"stdio\",\n                    \"env\": {\n                        \"PYTHONPATH\": str(Path.cwd()),\n                        \"MCP_RESOURCES_PATH\": self.mcp_resources_path,\n                        \"MCP_OUTPUT_PATH\": self.output_path\n                    }\n                }\n            }\n            \n            # Initialize MCP client with server configurations\n            self.mcp_client = MultiServerMCPClient(mcp_servers_config)\n            \n            # Get tools from MCP servers\n            self.tools = await self.mcp_client.get_tools()\n            \n            # Initialize LLM using Ollama\n            model = ChatOllama(\n                model='llama3.2:1b',\n                base_url='https://bc49b6571423.ngrok-free.app',\n                temperature=0.1\n            )\n            \n            # Create React agent with MCP tools\n            self.agent = create_react_agent(model, self.tools)\n            \n            return True\n            \n        except Exception as e:\n            print(f\"Error initializing Langchain MCP agent: {e}\", file=sys.stderr)\n            return False\n\n    async def check_clarification(self, query: str, llm_config: Optional[Dict] = None) -> Dict:\n        \"\"\"Check if the query needs clarification using Langchain MCP integration\"\"\"\n        try:\n            # Initialize agent if not already done\n            if not self.agent:\n                success = await self.initialize_agent(llm_config)\n                if not success:\n                    return {\n                        \"needsClarification\": True,\n                        \"confidence\": 0.0,\n                        \"suggestions\": [\"Unable to initialize MCP agent\"],\n                        \"message\": \"Langchain MCP agent initialization failed\",\n                        \"agentPlan\": None\n                    }\n            \n            # Check if we have any MCP tools available\n            if not self.tools:\n                return {\n                    \"needsClarification\": True,\n                    \"confidence\": 0.0,\n                    \"suggestions\": [\"Please ensure MCP servers are running\"],\n                    \"message\": \"No MCP tools available for LAS analysis\",\n                    \"agentPlan\": None\n                }\n            \n            # Check if LAS files are available\n            las_files = await self._discover_las_files()\n            if not las_files:\n                return {\n                    \"needsClarification\": True,\n                    \"confidence\": 0.1,\n                    \"suggestions\": [\"Upload LAS files to enable analysis\"],\n                    \"message\": \"No LAS files available for analysis\",\n                    \"agentPlan\": None\n                }\n            \n            # Analyze query complexity and available tools\n            tool_names = [tool.name for tool in self.tools]\n            \n            # Simple confidence assessment based on tool availability and query\n            query_lower = query.lower()\n            relevant_tools = []\n            \n            for tool in self.tools:\n                if any(keyword in query_lower for keyword in ['depth', 'plot', 'chart'] if 'depth' in tool.name.lower()):\n                    relevant_tools.append(tool.name)\n                elif any(keyword in query_lower for keyword in ['gamma', 'formation', 'analyze'] if 'gamma' in tool.name.lower()):\n                    relevant_tools.append(tool.name)\n                elif any(keyword in query_lower for keyword in ['porosity', 'neutron', 'density'] if 'porosity' in tool.name.lower()):\n                    relevant_tools.append(tool.name)\n            \n            confidence = len(relevant_tools) / len(self.tools) if self.tools else 0.0\n            \n            if confidence > 0.3 and relevant_tools:\n                # Agent can proceed with analysis\n                execution_plan = [\n                    {\n                        \"step\": 1,\n                        \"description\": f\"Langchain MCP Agent identified relevant tools: {', '.join(relevant_tools)}\",\n                        \"action\": \"mcp_tool_selection\",\n                        \"confidence\": confidence\n                    },\n                    {\n                        \"step\": 2,\n                        \"description\": f\"Execute MCP tools with available LAS files: {', '.join(las_files[:2])}\",\n                        \"action\": \"mcp_execution\",\n                        \"params\": {\"tools\": relevant_tools, \"las_files\": las_files}\n                    }\n                ]\n                \n                return {\n                    \"needsClarification\": False,\n                    \"confidence\": confidence,\n                    \"suggestions\": [],\n                    \"message\": f\"Langchain MCP Agent ready to process with {len(relevant_tools)} relevant tools\",\n                    \"agentPlan\": execution_plan,\n                    \"available_tools\": tool_names,\n                    \"available_las_files\": las_files\n                }\n            else:\n                # Need more specific information\n                suggestions = [\n                    f\"Use {tool.name.replace('_', ' ')} for {tool.description}\" \n                    for tool in self.tools[:3]\n                ]\n                \n                return {\n                    \"needsClarification\": True,\n                    \"confidence\": confidence,\n                    \"suggestions\": suggestions,\n                    \"message\": \"Please specify which type of LAS analysis you need\",\n                    \"agentPlan\": None,\n                    \"available_tools\": tool_names\n                }\n                \n        except Exception as e:\n            return {\n                \"needsClarification\": True,\n                \"confidence\": 0.0,\n                \"suggestions\": [\"Please check MCP server configuration\"],\n                \"message\": f\"Langchain MCP Agent error: {str(e)}\",\n                \"agentPlan\": None\n            }\n\n    async def process_query(self, query: str, llm_config: Optional[Dict] = None) -> Dict:\n        \"\"\"Process query using Langchain MCP agent with full MCP server integration\"\"\"\n        try:\n            start_time = asyncio.get_event_loop().time()\n            \n            # Initialize agent if needed\n            if not self.agent:\n                success = await self.initialize_agent(llm_config)\n                if not success:\n                    raise Exception(\"Failed to initialize Langchain MCP agent\")\n            \n            if not self.tools:\n                raise Exception(\"No MCP tools available\")\n            \n            # System message for the Langchain agent\n            system_message = SystemMessage(content=(\n                \"You are a specialized LAS (Log ASCII Standard) file analysis agent. \"\n                \"You have access to MCP (Model Context Protocol) servers that provide \"\n                \"depth plotting, gamma ray analysis, and porosity calculation tools. \"\n                \"Use these tools intelligently based on the user's query to provide \"\n                \"comprehensive well log analysis results.\"\n            ))\n            \n            # Process query through Langchain React agent\n            agent_response = await self.agent.ainvoke({\n                \"messages\": [system_message, HumanMessage(content=query)]\n            })\n            \n            # Extract the final response\n            final_message = agent_response[\"messages\"][-1]\n            \n            processing_time = (asyncio.get_event_loop().time() - start_time) * 1000\n            \n            return {\n                \"id\": f\"langchain_mcp_{int(asyncio.get_event_loop().time())}\",\n                \"query\": query,\n                \"agentResponse\": {\n                    \"steps\": [\n                        {\n                            \"tool\": \"langchain_mcp_client\",\n                            \"action\": \"mcp_server_coordination\",\n                            \"result\": f\"Connected to {len(self.tools)} MCP tools\",\n                            \"confidence\": 0.95\n                        },\n                        {\n                            \"tool\": \"react_agent\",\n                            \"action\": \"query_processing\",\n                            \"result\": \"Processed query through Langchain React agent\",\n                            \"confidence\": 0.9\n                        }\n                    ],\n                    \"finalResult\": {\n                        \"content\": final_message.content,\n                        \"tool_calls\": getattr(final_message, 'tool_calls', []),\n                        \"mcp_tools_used\": [tool.name for tool in self.tools],\n                        \"reasoning\": \"Langchain MCP Agent: Processed query using Model Context Protocol servers\"\n                    }\n                },\n                \"status\": \"completed\",\n                \"processingTime\": int(processing_time)\n            }\n            \n        except Exception as e:\n            return {\n                \"id\": f\"error_{int(asyncio.get_event_loop().time())}\",\n                \"query\": query,\n                \"agentResponse\": {\n                    \"steps\": [],\n                    \"finalResult\": {\n                        \"content\": f\"Error: {str(e)}\",\n                        \"tool_calls\": [],\n                        \"mcp_tools_used\": [],\n                        \"reasoning\": f\"Langchain MCP Agent error: {str(e)}\"\n                    }\n                },\n                \"status\": \"error\",\n                \"errorMessage\": str(e),\n                \"processingTime\": 0\n            }\n\n    async def _discover_las_files(self) -> List[str]:\n        \"\"\"Discover available LAS files from MCP resources\"\"\"\n        las_dir = Path(self.mcp_resources_path) / \"las_files\"\n        if las_dir.exists():\n            return [f.name for f in las_dir.glob(\"*.las\")]\n        return []\n\n    async def close(self):\n        \"\"\"Clean up MCP client connections\"\"\"\n        if self.mcp_client:\n            try:\n                # Use the proper cleanup method for MultiServerMCPClient\n                if hasattr(self.mcp_client, '__aexit__'):\n                    await self.mcp_client.__aexit__(None, None, None)\n            except Exception:\n                pass  # Ignore cleanup errors\n\nasync def main():\n    \"\"\"Main entry point for the Langchain MCP agent\"\"\"\n    if len(sys.argv) < 3:\n        print(\"Usage: python langchain_agent.py <action> <query> [llm_config_json]\")\n        sys.exit(1)\n    \n    action = sys.argv[1]\n    query = sys.argv[2]\n    llm_config = None\n    \n    if len(sys.argv) > 3:\n        try:\n            llm_config = json.loads(sys.argv[3])\n        except json.JSONDecodeError:\n            print(\"Warning: Invalid JSON for llm_config, using defaults\")\n    \n    agent = LangchainMCPAgent()\n    \n    try:\n        if action == \"check_clarification\":\n            result = await agent.check_clarification(query, llm_config)\n        elif action == \"process_query\":\n            result = await agent.process_query(query, llm_config)\n        else:\n            result = {\"error\": f\"Unknown action: {action}\"}\n        \n        print(json.dumps(result, indent=2))\n        \n    except Exception as e:\n        error_result = {\n            \"error\": str(e),\n            \"action\": action,\n            \"query\": query\n        }\n        print(json.dumps(error_result, indent=2))\n        sys.exit(1)\n    finally:\n        await agent.close()\n\nif __name__ == \"__main__\":\n    asyncio.run(main())","size_bytes":13631},"mcp_servers/langchain_agent.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nLangchain MCP Agent for LAS file analysis\nThis script uses Langchain with MCP adapters to connect to multiple MCP servers\nand coordinate intelligent analysis of LAS files.\n\"\"\"\n\nimport asyncio\nimport json\nimport sys\nimport os\nfrom typing import Dict, List, Any, Optional\nfrom pathlib import Path\n\ntry:\n    from langchain_mcp_adapters.client import MultiServerMCPClient\n    from langchain_mcp_adapters.tools import load_mcp_tools\n    from langgraph.prebuilt import create_react_agent\n    from langchain_openai import ChatOpenAI\n    from langchain_anthropic import ChatAnthropic\n    from langchain_core.messages import HumanMessage, SystemMessage\nexcept ImportError as e:\n    print(f\"Error importing required packages: {e}\")\n    print(\"Please ensure langchain-mcp-adapters, langgraph, langchain, and related packages are installed\")\n    sys.exit(1)\n\nclass LangchainMCPAgent:\n    def __init__(self):\n        self.base_path = Path(__file__).parent.parent\n        self.mcp_servers_path = self.base_path / \"mcp_servers\"\n        self.output_path = self.base_path / \"output\"\n        self.model = None\n        self.mcp_client = None\n        self.tools = []\n        \n    async def initialize_mcp_servers(self):\n        \"\"\"Initialize connection to MCP servers\"\"\"\n        try:\n            # Configure MCP servers\n            server_config = {\n                \"scripts\": {\n                    \"command\": \"python\",\n                    \"args\": [str(self.mcp_servers_path / \"scripts_server.py\")],\n                    \"transport\": \"stdio\",\n                },\n                \"resources\": {\n                    \"command\": \"python\", \n                    \"args\": [str(self.mcp_servers_path / \"resources_server.py\")],\n                    \"transport\": \"stdio\",\n                },\n                \"tools\": {\n                    \"command\": \"python\",\n                    \"args\": [str(self.mcp_servers_path / \"tools_server.py\")],\n                    \"transport\": \"stdio\",\n                }\n            }\n            \n            # Initialize MultiServerMCPClient\n            self.mcp_client = MultiServerMCPClient(server_config)\n            \n            # Load tools from all MCP servers\n            self.tools = await self.mcp_client.get_tools()\n            \n            return True\n            \n        except Exception as e:\n            print(f\"Error initializing MCP servers: {e}\")\n            return False\n        \n    async def initialize_llm(self, llm_config: Optional[Dict] = None):\n        \"\"\"Initialize the LLM based on configuration\"\"\"\n        try:\n            # Configure LLM based on provided config\n            if llm_config and llm_config.get('provider'):\n                if llm_config['provider'] == 'openai':\n                    self.model = ChatOpenAI(\n                        model=llm_config.get('model', 'gpt-3.5-turbo'),\n                        api_key=llm_config.get('apiKey'),\n                        temperature=0.1\n                    )\n                elif llm_config['provider'] == 'anthropic':\n                    self.model = ChatAnthropic(\n                        model=llm_config.get('model', 'claude-3-sonnet-20240229'),\n                        api_key=llm_config.get('apiKey'),\n                        temperature=0.1\n                    )\n                else:\n                    raise ValueError(f\"Unsupported provider: {llm_config['provider']}\")\n            else:\n                # Default to OpenAI if no config provided\n                self.model = ChatOpenAI(\n                    model='gpt-3.5-turbo',\n                    temperature=0.1\n                )\n                \n            return True\n            \n        except Exception as e:\n            print(f\"Error initializing LLM: {e}\")\n            return False\n\n    async def create_agent(self):\n        \"\"\"Create the LangGraph agent with MCP tools\"\"\"\n        try:\n            if not self.model:\n                raise ValueError(\"LLM not initialized\")\n            if not self.tools:\n                raise ValueError(\"MCP tools not loaded\")\n                \n            # Create the React agent with loaded tools\n            self.agent = create_react_agent(self.model, self.tools)\n            \n            return True\n            \n        except Exception as e:\n            print(f\"Error creating agent: {e}\")\n            return False\n\n    async def process_query(self, query: str) -> Dict[str, Any]:\n        \"\"\"Process a user query using the Langchain agent\"\"\"\n        try:\n            # Prepare the query for the agent\n            messages = [\n                SystemMessage(content=\"You are an expert in LAS (Log ASCII Standard) file analysis. Use the available MCP tools to analyze user requests and determine the appropriate scripts, tools, and LAS files to use. Always provide clear reasoning for your decisions.\"),\n                HumanMessage(content=query)\n            ]\n            \n            # Execute the agent\n            response = await self.agent.ainvoke({\"messages\": messages})\n            \n            # Extract the final recommendation from agent response\n            # This is a simplified approach - in practice, you'd parse the agent's tool calls\n            agent_steps = []\n            \n            # For now, use the tools to get a recommendation\n            if hasattr(self.mcp_client, 'session'):\n                async with self.mcp_client.session(\"tools\") as session:\n                    # Use tools server to match query to appropriate tool\n                    tools_from_session = await load_mcp_tools(session)\n                    \n                    # Find the tool matching function\n                    for tool in tools_from_session:\n                        if tool.name == \"match_tool_to_query\":\n                            tool_result = await tool.ainvoke({\"query\": query})\n                            \n                            if tool_result.get(\"success\"):\n                                agent_steps.append({\n                                    \"tool\": \"match_tool_to_query\",\n                                    \"action\": \"analyze_query\",\n                                    \"result\": json.dumps(tool_result),\n                                    \"confidence\": tool_result.get(\"confidence\", 0.7)\n                                })\n                                \n                                return {\n                                    \"steps\": agent_steps,\n                                    \"finalResult\": {\n                                        \"script\": tool_result.get(\"script\", \"depth_visualization.py\"),\n                                        \"lasFile\": tool_result.get(\"las_file\", \"sample_well_01.las\"),\n                                        \"tool\": tool_result.get(\"tool\", \"depth_plotter\"),\n                                        \"confidence\": tool_result.get(\"confidence\", 0.7),\n                                        \"reasoning\": tool_result.get(\"reasoning\", \"Matched based on query analysis\")\n                                    }\n                                }\n            \n            # Fallback response if MCP tools aren't available\n            return {\n                \"steps\": [{\n                    \"tool\": \"fallback\",\n                    \"action\": \"default_analysis\",\n                    \"result\": \"Used fallback analysis\",\n                    \"confidence\": 0.5\n                }],\n                \"finalResult\": {\n                    \"script\": \"depth_visualization.py\",\n                    \"lasFile\": \"sample_well_01.las\", \n                    \"tool\": \"depth_plotter\",\n                    \"confidence\": 0.5,\n                    \"reasoning\": \"Fallback: default depth visualization\"\n                }\n            }\n            \n        except Exception as e:\n            print(f\"Error processing query: {e}\")\n            raise e\n\n    async def check_clarification(self, query: str) -> Dict[str, Any]:\n        \"\"\"Check if query needs clarification\"\"\"\n        try:\n            # Simple keyword-based check for now\n            query_lower = query.lower()\n            \n            # Check if query is clear enough\n            key_terms = [\"las\", \"log\", \"well\", \"depth\", \"gamma\", \"porosity\", \"permeability\", \"analysis\", \"plot\", \"visualization\"]\n            has_key_terms = any(term in query_lower for term in key_terms)\n            \n            if len(query.split()) < 3 or not has_key_terms:\n                return {\n                    \"needsClarification\": True,\n                    \"confidence\": 0.3,\n                    \"suggestions\": [\n                        \"Could you specify which type of analysis you need?\",\n                        \"Which LAS file would you like to analyze?\",\n                        \"What kind of visualization or calculation are you looking for?\"\n                    ],\n                    \"message\": \"Could you provide more details about your analysis request?\",\n                    \"agentPlan\": [\n                        {\"step\": 1, \"description\": \"Identify analysis type\", \"tool\": \"tools_server\"},\n                        {\"step\": 2, \"description\": \"Select appropriate script\", \"tool\": \"scripts_server\"},\n                        {\"step\": 3, \"description\": \"Execute analysis\", \"tool\": \"scripts_server\"}\n                    ]\n                }\n            else:\n                return {\n                    \"needsClarification\": False,\n                    \"confidence\": 0.8,\n                    \"suggestions\": [],\n                    \"message\": \"Query is clear for processing\",\n                    \"agentPlan\": [\n                        {\"step\": 1, \"description\": \"Analyze query requirements\", \"tool\": \"tools_server\"},\n                        {\"step\": 2, \"description\": \"Execute selected script\", \"tool\": \"scripts_server\"}\n                    ]\n                }\n                \n        except Exception as e:\n            print(f\"Error checking clarification: {e}\")\n            return {\n                \"needsClarification\": True,\n                \"confidence\": 0.0,\n                \"suggestions\": [\"Please try rephrasing your request\"],\n                \"message\": \"Error analyzing your request\",\n                \"agentPlan\": None\n            }\n\nasync def main():\n    if len(sys.argv) < 3:\n        print(\"Usage: python langchain_agent.py <action> <query> [config_json]\")\n        sys.exit(1)\n    \n    action = sys.argv[1]\n    query = sys.argv[2]\n    config_json = sys.argv[3] if len(sys.argv) > 3 else \"{}\"\n    \n    try:\n        config = json.loads(config_json)\n    except json.JSONDecodeError:\n        config = {}\n    \n    agent = LangchainMCPAgent()\n    \n    try:\n        # Initialize MCP servers\n        mcp_initialized = await agent.initialize_mcp_servers()\n        if not mcp_initialized:\n            raise Exception(\"Failed to initialize MCP servers\")\n        \n        # Initialize LLM\n        llm_initialized = await agent.initialize_llm(config)\n        if not llm_initialized:\n            raise Exception(\"Failed to initialize LLM\")\n        \n        # Create agent\n        agent_created = await agent.create_agent()\n        if not agent_created:\n            raise Exception(\"Failed to create agent\")\n        \n        if action == \"check_clarification\":\n            result = await agent.check_clarification(query)\n        elif action == \"process_query\":\n            result = await agent.process_query(query)\n        else:\n            raise ValueError(f\"Unknown action: {action}\")\n        \n        print(json.dumps(result, indent=2))\n        \n    except Exception as e:\n        error_result = {\n            \"error\": str(e),\n            \"success\": False\n        }\n        print(json.dumps(error_result, indent=2))\n        sys.exit(1)\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n","size_bytes":11690},"mcp_servers/resources_server.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nMCP Server for LAS file resources\nProvides access to LAS files and processing resources\n\"\"\"\n\nimport os\nimport json\nfrom pathlib import Path\nfrom typing import Dict, Any, List, Optional\nfrom mcp.server.fastmcp import FastMCP\nfrom mcp.server import NotificationOptions, Server\nfrom mcp.types import Resource, TextResourceContents, BlobResourceContents\n\n# Initialize FastMCP server\nmcp = FastMCP(\"LAS Resources Server\")\n\n# Base paths for resources\nBASE_DIR = Path(__file__).parent.parent\nLAS_FILES_DIR = BASE_DIR / \"mcp_resources\" / \"las_files\"\nSCRIPTS_DIR = BASE_DIR / \"mcp_resources\" / \"scripts\"\nOUTPUT_DIR = BASE_DIR / \"output\"\n\n@mcp.resource(\"las://files/list\")\ndef list_las_files() -> TextResourceContents:\n    \"\"\"List all available LAS files\"\"\"\n    las_files = []\n    \n    if LAS_FILES_DIR.exists():\n        for las_file in LAS_FILES_DIR.glob(\"*.las\"):\n            file_info = {\n                \"name\": las_file.stem,\n                \"filename\": las_file.name,\n                \"path\": str(las_file.relative_to(BASE_DIR)),\n                \"size\": las_file.stat().st_size,\n                \"uri\": f\"las://files/{las_file.stem}\"\n            }\n            las_files.append(file_info)\n    \n    return TextResourceContents(\n        uri=\"las://files/list\",\n        text=json.dumps(las_files, indent=2)\n    )\n\n@mcp.resource(\"las://files/{file_name}\")\ndef get_las_file(file_name: str) -> TextResourceContents:\n    \"\"\"Get the contents of a specific LAS file\"\"\"\n    las_file_path = LAS_FILES_DIR / f\"{file_name}.las\"\n    \n    if not las_file_path.exists():\n        # Try with .las extension if not provided\n        if not file_name.endswith('.las'):\n            las_file_path = LAS_FILES_DIR / f\"{file_name}.las\"\n        else:\n            las_file_path = LAS_FILES_DIR / file_name\n    \n    if not las_file_path.exists():\n        available_files = [f.stem for f in LAS_FILES_DIR.glob(\"*.las\")] if LAS_FILES_DIR.exists() else []\n        error_msg = {\n            \"error\": f\"LAS file '{file_name}' not found\",\n            \"available_files\": available_files\n        }\n        return TextResourceContents(\n            uri=f\"las://files/{file_name}\",\n            text=json.dumps(error_msg, indent=2)\n        )\n    \n    try:\n        content = las_file_path.read_text()\n        return TextResourceContents(\n            uri=f\"las://files/{file_name}\",\n            text=content\n        )\n    except Exception as e:\n        error_msg = {\n            \"error\": f\"Failed to read LAS file: {str(e)}\",\n            \"file\": file_name\n        }\n        return TextResourceContents(\n            uri=f\"las://files/{file_name}\",\n            text=json.dumps(error_msg, indent=2)\n        )\n\n@mcp.resource(\"las://scripts/list\")\ndef list_scripts() -> TextResourceContents:\n    \"\"\"List all available processing scripts\"\"\"\n    scripts = []\n    \n    if SCRIPTS_DIR.exists():\n        for script_file in SCRIPTS_DIR.glob(\"*.py\"):\n            script_info = {\n                \"name\": script_file.stem,\n                \"filename\": script_file.name,\n                \"path\": str(script_file.relative_to(BASE_DIR)),\n                \"size\": script_file.stat().st_size,\n                \"uri\": f\"las://scripts/{script_file.stem}\"\n            }\n            scripts.append(script_info)\n    \n    return TextResourceContents(\n        uri=\"las://scripts/list\",\n        text=json.dumps(scripts, indent=2)\n    )\n\n@mcp.resource(\"las://scripts/{script_name}\")\ndef get_script(script_name: str) -> TextResourceContents:\n    \"\"\"Get the contents of a specific processing script\"\"\"\n    script_path = SCRIPTS_DIR / f\"{script_name}.py\"\n    \n    if not script_path.exists():\n        available_scripts = [f.stem for f in SCRIPTS_DIR.glob(\"*.py\")] if SCRIPTS_DIR.exists() else []\n        error_msg = {\n            \"error\": f\"Script '{script_name}' not found\",\n            \"available_scripts\": available_scripts\n        }\n        return TextResourceContents(\n            uri=f\"las://scripts/{script_name}\",\n            text=json.dumps(error_msg, indent=2)\n        )\n    \n    try:\n        content = script_path.read_text()\n        return TextResourceContents(\n            uri=f\"las://scripts/{script_name}\",\n            text=content\n        )\n    except Exception as e:\n        error_msg = {\n            \"error\": f\"Failed to read script: {str(e)}\",\n            \"script\": script_name\n        }\n        return TextResourceContents(\n            uri=f\"las://scripts/{script_name}\",\n            text=json.dumps(error_msg, indent=2)\n        )\n\n@mcp.resource(\"las://output/list\")\ndef list_output_folders() -> TextResourceContents:\n    \"\"\"List all output folders with generated files\"\"\"\n    output_folders = []\n    \n    if OUTPUT_DIR.exists():\n        for folder in OUTPUT_DIR.iterdir():\n            if folder.is_dir():\n                files = []\n                for file in folder.iterdir():\n                    if file.is_file():\n                        files.append({\n                            \"name\": file.name,\n                            \"path\": str(file.relative_to(BASE_DIR)),\n                            \"size\": file.stat().st_size,\n                            \"uri\": f\"las://output/{folder.name}/{file.name}\"\n                        })\n                \n                folder_info = {\n                    \"name\": folder.name,\n                    \"path\": str(folder.relative_to(BASE_DIR)),\n                    \"files\": files,\n                    \"uri\": f\"las://output/{folder.name}\"\n                }\n                output_folders.append(folder_info)\n    \n    # Sort by folder name (newest first)\n    output_folders.sort(key=lambda x: x[\"name\"], reverse=True)\n    \n    return TextResourceContents(\n        uri=\"las://output/list\",\n        text=json.dumps(output_folders, indent=2)\n    )\n\n@mcp.resource(\"las://output/{folder_name}\")\ndef get_output_folder(folder_name: str) -> TextResourceContents:\n    \"\"\"Get information about a specific output folder\"\"\"\n    folder_path = OUTPUT_DIR / folder_name\n    \n    if not folder_path.exists() or not folder_path.is_dir():\n        available_folders = [f.name for f in OUTPUT_DIR.iterdir() if f.is_dir()] if OUTPUT_DIR.exists() else []\n        error_msg = {\n            \"error\": f\"Output folder '{folder_name}' not found\",\n            \"available_folders\": available_folders\n        }\n        return TextResourceContents(\n            uri=f\"las://output/{folder_name}\",\n            text=json.dumps(error_msg, indent=2)\n        )\n    \n    files = []\n    for file in folder_path.iterdir():\n        if file.is_file():\n            files.append({\n                \"name\": file.name,\n                \"path\": str(file.relative_to(BASE_DIR)),\n                \"size\": file.stat().st_size,\n                \"is_image\": file.suffix.lower() in ['.png', '.jpg', '.jpeg', '.gif', '.bmp', '.svg'],\n                \"uri\": f\"las://output/{folder_name}/{file.name}\"\n            })\n    \n    folder_info = {\n        \"name\": folder_name,\n        \"path\": str(folder_path.relative_to(BASE_DIR)),\n        \"files\": files,\n        \"file_count\": len(files)\n    }\n    \n    return TextResourceContents(\n        uri=f\"las://output/{folder_name}\",\n        text=json.dumps(folder_info, indent=2)\n    )\n\n@mcp.tool()\ndef search_resources(query: str, resource_type: str = \"all\") -> Dict[str, Any]:\n    \"\"\"\n    Search for resources by name or content\n    \n    Args:\n        query: Search query\n        resource_type: Type of resource to search (\"las\", \"scripts\", \"output\", or \"all\")\n    \n    Returns:\n        Dictionary with search results\n    \"\"\"\n    results = {\n        \"query\": query,\n        \"resource_type\": resource_type,\n        \"las_files\": [],\n        \"scripts\": [],\n        \"output_folders\": []\n    }\n    \n    query_lower = query.lower()\n    \n    # Search LAS files\n    if resource_type in [\"las\", \"all\"] and LAS_FILES_DIR.exists():\n        for las_file in LAS_FILES_DIR.glob(\"*.las\"):\n            if query_lower in las_file.stem.lower():\n                results[\"las_files\"].append({\n                    \"name\": las_file.stem,\n                    \"filename\": las_file.name,\n                    \"path\": str(las_file.relative_to(BASE_DIR)),\n                    \"uri\": f\"las://files/{las_file.stem}\"\n                })\n    \n    # Search scripts\n    if resource_type in [\"scripts\", \"all\"] and SCRIPTS_DIR.exists():\n        for script_file in SCRIPTS_DIR.glob(\"*.py\"):\n            if query_lower in script_file.stem.lower():\n                results[\"scripts\"].append({\n                    \"name\": script_file.stem,\n                    \"filename\": script_file.name,\n                    \"path\": str(script_file.relative_to(BASE_DIR)),\n                    \"uri\": f\"las://scripts/{script_file.stem}\"\n                })\n    \n    # Search output folders\n    if resource_type in [\"output\", \"all\"] and OUTPUT_DIR.exists():\n        for folder in OUTPUT_DIR.iterdir():\n            if folder.is_dir() and query_lower in folder.name.lower():\n                files = [f.name for f in folder.iterdir() if f.is_file()]\n                results[\"output_folders\"].append({\n                    \"name\": folder.name,\n                    \"path\": str(folder.relative_to(BASE_DIR)),\n                    \"files\": files,\n                    \"uri\": f\"las://output/{folder.name}\"\n                })\n    \n    return results\n\n@mcp.tool()\ndef get_resource_stats() -> Dict[str, Any]:\n    \"\"\"Get statistics about available resources\"\"\"\n    stats = {\n        \"las_files\": 0,\n        \"scripts\": 0,\n        \"output_folders\": 0,\n        \"total_output_files\": 0\n    }\n    \n    # Count LAS files\n    if LAS_FILES_DIR.exists():\n        stats[\"las_files\"] = len(list(LAS_FILES_DIR.glob(\"*.las\")))\n    \n    # Count scripts\n    if SCRIPTS_DIR.exists():\n        stats[\"scripts\"] = len(list(SCRIPTS_DIR.glob(\"*.py\")))\n    \n    # Count output folders and files\n    if OUTPUT_DIR.exists():\n        folders = [f for f in OUTPUT_DIR.iterdir() if f.is_dir()]\n        stats[\"output_folders\"] = len(folders)\n        \n        total_files = 0\n        for folder in folders:\n            total_files += len([f for f in folder.iterdir() if f.is_file()])\n        stats[\"total_output_files\"] = total_files\n    \n    return stats\n\nif __name__ == \"__main__\":\n    # Run the MCP server\n    mcp.run(transport=\"stdio\")","size_bytes":10218},"mcp_servers/scripts_server.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nMCP Server for LAS file processing scripts\nProvides tools for executing Python scripts on LAS files\n\"\"\"\n\nimport os\nimport sys\nimport subprocess\nimport json\nfrom pathlib import Path\nfrom typing import Dict, Any, List\nfrom mcp.server.fastmcp import FastMCP\n\n# Initialize FastMCP server\nmcp = FastMCP(\"LAS Scripts Server\")\n\n# Base paths for resources\nBASE_DIR = Path(__file__).parent.parent\nSCRIPTS_DIR = BASE_DIR / \"mcp_resources\" / \"scripts\"\nLAS_FILES_DIR = BASE_DIR / \"mcp_resources\" / \"las_files\"\nOUTPUT_DIR = BASE_DIR / \"output\"\n\n@mcp.tool()\ndef list_available_scripts() -> List[Dict[str, str]]:\n    \"\"\"List all available Python scripts for LAS file processing\"\"\"\n    scripts = []\n    \n    if SCRIPTS_DIR.exists():\n        for script_file in SCRIPTS_DIR.glob(\"*.py\"):\n            scripts.append({\n                \"name\": script_file.stem,\n                \"filename\": script_file.name,\n                \"path\": str(script_file),\n                \"description\": f\"Python script: {script_file.stem}\"\n            })\n    \n    return scripts\n\n@mcp.tool()\ndef list_available_las_files() -> List[Dict[str, str]]:\n    \"\"\"List all available LAS files for processing\"\"\"\n    las_files = []\n    \n    if LAS_FILES_DIR.exists():\n        for las_file in LAS_FILES_DIR.glob(\"*.las\"):\n            las_files.append({\n                \"name\": las_file.stem,\n                \"filename\": las_file.name,\n                \"path\": str(las_file),\n                \"size\": las_file.stat().st_size if las_file.exists() else 0\n            })\n    \n    return las_files\n\n@mcp.tool()\ndef execute_script(script_name: str, las_file: str, tool: str = None) -> Dict[str, Any]:\n    \"\"\"\n    Execute a Python script with the specified LAS file\n    \n    Args:\n        script_name: Name of the script to execute (without .py extension)\n        las_file: Name of the LAS file to process\n        tool: Optional tool parameter for the script\n    \n    Returns:\n        Dictionary with execution results\n    \"\"\"\n    try:\n        # Validate script exists\n        script_path = SCRIPTS_DIR / f\"{script_name}.py\"\n        if not script_path.exists():\n            return {\n                \"success\": False,\n                \"error\": f\"Script {script_name}.py not found\",\n                \"available_scripts\": [s[\"name\"] for s in list_available_scripts()]\n            }\n        \n        # Validate LAS file exists\n        las_path = LAS_FILES_DIR / las_file\n        if not las_path.exists():\n            return {\n                \"success\": False,\n                \"error\": f\"LAS file {las_file} not found\",\n                \"available_files\": [f[\"filename\"] for f in list_available_las_files()]\n            }\n        \n        # Create output directory with timestamp\n        from datetime import datetime\n        timestamp = datetime.now().strftime(\"%Y-%m-%d_%H-%M-%S\")\n        output_path = OUTPUT_DIR / timestamp\n        output_path.mkdir(parents=True, exist_ok=True)\n        \n        # Prepare command\n        cmd = [sys.executable, str(script_path), str(las_path)]\n        if tool:\n            cmd.extend([str(tool)])\n        \n        # Execute script\n        start_time = datetime.now()\n        result = subprocess.run(\n            cmd,\n            capture_output=True,\n            text=True,\n            cwd=BASE_DIR,\n            timeout=300  # 5 minute timeout\n        )\n        end_time = datetime.now()\n        processing_time = int((end_time - start_time).total_seconds() * 1000)\n        \n        if result.returncode == 0:\n            # Find generated output files\n            output_files = []\n            if output_path.exists():\n                for output_file in output_path.iterdir():\n                    if output_file.is_file():\n                        output_files.append({\n                            \"name\": output_file.name,\n                            \"path\": str(output_file.relative_to(BASE_DIR)),\n                            \"full_path\": str(output_file)\n                        })\n            \n            return {\n                \"success\": True,\n                \"script\": script_name,\n                \"las_file\": las_file,\n                \"tool\": tool,\n                \"output_files\": output_files,\n                \"processing_time\": processing_time,\n                \"stdout\": result.stdout,\n                \"stderr\": result.stderr if result.stderr else None\n            }\n        else:\n            return {\n                \"success\": False,\n                \"error\": f\"Script execution failed with code {result.returncode}\",\n                \"stdout\": result.stdout,\n                \"stderr\": result.stderr,\n                \"processing_time\": processing_time\n            }\n    \n    except subprocess.TimeoutExpired:\n        return {\n            \"success\": False,\n            \"error\": \"Script execution timed out (300 seconds)\",\n            \"processing_time\": 300000\n        }\n    except Exception as e:\n        return {\n            \"success\": False,\n            \"error\": f\"Execution error: {str(e)}\"\n        }\n\n@mcp.tool()\ndef get_script_info(script_name: str) -> Dict[str, Any]:\n    \"\"\"Get detailed information about a specific script\"\"\"\n    script_path = SCRIPTS_DIR / f\"{script_name}.py\"\n    \n    if not script_path.exists():\n        return {\n            \"exists\": False,\n            \"error\": f\"Script {script_name}.py not found\"\n        }\n    \n    try:\n        # Read script content to extract docstring and basic info\n        content = script_path.read_text()\n        \n        # Extract docstring (simple approach)\n        docstring = \"\"\n        lines = content.split('\\n')\n        in_docstring = False\n        for line in lines:\n            if '\"\"\"' in line or \"'''\" in line:\n                if in_docstring:\n                    break\n                else:\n                    in_docstring = True\n                    if line.strip() not in ['\"\"\"', \"'''\"]:\n                        docstring += line.split('\"\"\"')[1] if '\"\"\"' in line else line.split(\"'''\")[1]\n                    continue\n            if in_docstring:\n                docstring += line + \"\\n\"\n        \n        return {\n            \"exists\": True,\n            \"name\": script_name,\n            \"filename\": f\"{script_name}.py\",\n            \"path\": str(script_path),\n            \"size\": script_path.stat().st_size,\n            \"description\": docstring.strip() if docstring else f\"Python script: {script_name}\",\n            \"requires_las_file\": True,\n            \"supports_tools\": True\n        }\n    \n    except Exception as e:\n        return {\n            \"exists\": True,\n            \"error\": f\"Error reading script info: {str(e)}\"\n        }\n\nif __name__ == \"__main__\":\n    # Run the MCP server\n    mcp.run(transport=\"stdio\")","size_bytes":6686},"mcp_servers/tools_server.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nMCP Server for analysis tools\nProvides tools for determining which scripts and tools to use for LAS file processing\n\"\"\"\n\nimport json\nfrom pathlib import Path\nfrom typing import Dict, Any, List, Optional\nfrom mcp.server.fastmcp import FastMCP\n\n# Initialize FastMCP server\nmcp = FastMCP(\"LAS Tools Server\")\n\n# Tool definitions and mappings\nAVAILABLE_TOOLS = {\n    \"depth_plotter\": {\n        \"name\": \"depth_plotter\",\n        \"description\": \"Creates depth plots and visualizations from LAS file depth data\",\n        \"compatible_scripts\": [\"depth_visualization.py\"],\n        \"keywords\": [\"depth\", \"plot\", \"visualization\", \"curve\", \"log\"],\n        \"output_type\": \"visualization\"\n    },\n    \"gamma_analyzer\": {\n        \"name\": \"gamma_analyzer\", \n        \"description\": \"Analyzes gamma ray data for geological formations\",\n        \"compatible_scripts\": [\"gamma_analysis.py\"],\n        \"keywords\": [\"gamma\", \"ray\", \"formation\", \"geology\", \"analysis\"],\n        \"output_type\": \"analysis\"\n    },\n    \"porosity_calculator\": {\n        \"name\": \"porosity_calculator\",\n        \"description\": \"Calculates porosity from neutron and density logs\",\n        \"compatible_scripts\": [\"porosity_calculator.py\"],\n        \"keywords\": [\"porosity\", \"neutron\", \"density\", \"reservoir\", \"calculation\"],\n        \"output_type\": \"calculation\"\n    },\n    \"permeability_estimator\": {\n        \"name\": \"permeability_estimator\",\n        \"description\": \"Estimates permeability from porosity and other log data\",\n        \"compatible_scripts\": [\"permeability_analysis.py\"],\n        \"keywords\": [\"permeability\", \"flow\", \"reservoir\", \"estimation\", \"analysis\"],\n        \"output_type\": \"estimation\"\n    },\n    \"saturation_analyzer\": {\n        \"name\": \"saturation_analyzer\",\n        \"description\": \"Analyzes water and hydrocarbon saturation\",\n        \"compatible_scripts\": [\"saturation_analysis.py\"],\n        \"keywords\": [\"saturation\", \"water\", \"hydrocarbon\", \"oil\", \"gas\"],\n        \"output_type\": \"analysis\"\n    }\n}\n\n@mcp.tool()\ndef list_available_tools() -> List[Dict[str, Any]]:\n    \"\"\"List all available analysis tools\"\"\"\n    return list(AVAILABLE_TOOLS.values())\n\n@mcp.tool()\ndef get_tool_info(tool_name: str) -> Dict[str, Any]:\n    \"\"\"Get detailed information about a specific tool\"\"\"\n    if tool_name not in AVAILABLE_TOOLS:\n        return {\n            \"exists\": False,\n            \"error\": f\"Tool '{tool_name}' not found\",\n            \"available_tools\": list(AVAILABLE_TOOLS.keys())\n        }\n    \n    return {\n        \"exists\": True,\n        **AVAILABLE_TOOLS[tool_name]\n    }\n\n@mcp.tool()\ndef match_tool_to_query(query: str) -> Dict[str, Any]:\n    \"\"\"\n    Match user query to the most appropriate tool\n    \n    Args:\n        query: User's query or request\n    \n    Returns:\n        Dictionary with tool recommendation and confidence\n    \"\"\"\n    query_lower = query.lower()\n    \n    # Score each tool based on keyword matches\n    tool_scores = {}\n    \n    for tool_name, tool_info in AVAILABLE_TOOLS.items():\n        score = 0\n        matched_keywords = []\n        \n        # Check for keyword matches\n        for keyword in tool_info[\"keywords\"]:\n            if keyword in query_lower:\n                score += 1\n                matched_keywords.append(keyword)\n        \n        # Boost score if tool name is mentioned\n        if tool_name.replace(\"_\", \" \") in query_lower or tool_name in query_lower:\n            score += 2\n            matched_keywords.append(tool_name)\n        \n        if score > 0:\n            tool_scores[tool_name] = {\n                \"score\": score,\n                \"matched_keywords\": matched_keywords,\n                \"tool_info\": tool_info\n            }\n    \n    if not tool_scores:\n        return {\n            \"success\": False,\n            \"message\": \"No matching tools found for the query\",\n            \"query\": query,\n            \"available_tools\": list(AVAILABLE_TOOLS.keys())\n        }\n    \n    # Find the best match\n    best_tool = max(tool_scores.items(), key=lambda x: x[1][\"score\"])\n    tool_name, tool_data = best_tool\n    \n    # Calculate confidence (simple approach)\n    max_possible_score = len(tool_data[\"tool_info\"][\"keywords\"]) + 2  # keywords + name match\n    confidence = min(tool_data[\"score\"] / max_possible_score, 1.0)\n    \n    return {\n        \"success\": True,\n        \"tool\": tool_name,\n        \"confidence\": confidence,\n        \"matched_keywords\": tool_data[\"matched_keywords\"],\n        \"tool_info\": tool_data[\"tool_info\"],\n        \"query\": query\n    }\n\n@mcp.tool()\ndef recommend_script_and_tool(query: str, las_file: str = None) -> Dict[str, Any]:\n    \"\"\"\n    Recommend both script and tool based on query and optionally LAS file info\n    \n    Args:\n        query: User's query or request\n        las_file: Optional LAS file name for context\n    \n    Returns:\n        Dictionary with script and tool recommendations\n    \"\"\"\n    # Get tool recommendation\n    tool_match = match_tool_to_query(query)\n    \n    if not tool_match[\"success\"]:\n        return {\n            \"success\": False,\n            \"message\": \"Could not determine appropriate tool and script\",\n            \"query\": query,\n            \"las_file\": las_file\n        }\n    \n    tool_name = tool_match[\"tool\"]\n    tool_info = tool_match[\"tool_info\"]\n    \n    # Get compatible script (for now, assume first one)\n    if tool_info[\"compatible_scripts\"]:\n        script = tool_info[\"compatible_scripts\"][0]\n    else:\n        script = f\"{tool_name}.py\"  # fallback\n    \n    return {\n        \"success\": True,\n        \"script\": script,\n        \"tool\": tool_name,\n        \"las_file\": las_file if las_file else \"sample_well_01.las\",  # default fallback\n        \"confidence\": tool_match[\"confidence\"],\n        \"reasoning\": f\"Query matched '{tool_name}' based on keywords: {', '.join(tool_match['matched_keywords'])}\",\n        \"query\": query,\n        \"tool_info\": tool_info\n    }\n\n@mcp.tool()\ndef validate_script_tool_combination(script: str, tool: str) -> Dict[str, Any]:\n    \"\"\"\n    Validate that a script and tool combination is compatible\n    \n    Args:\n        script: Script filename\n        tool: Tool name\n    \n    Returns:\n        Dictionary with validation result\n    \"\"\"\n    if tool not in AVAILABLE_TOOLS:\n        return {\n            \"valid\": False,\n            \"error\": f\"Unknown tool: {tool}\",\n            \"available_tools\": list(AVAILABLE_TOOLS.keys())\n        }\n    \n    tool_info = AVAILABLE_TOOLS[tool]\n    \n    # Check if script is compatible with tool\n    if script in tool_info[\"compatible_scripts\"]:\n        return {\n            \"valid\": True,\n            \"script\": script,\n            \"tool\": tool,\n            \"tool_info\": tool_info\n        }\n    \n    return {\n        \"valid\": False,\n        \"error\": f\"Script '{script}' is not compatible with tool '{tool}'\",\n        \"compatible_scripts\": tool_info[\"compatible_scripts\"],\n        \"tool_info\": tool_info\n    }\n\n@mcp.tool()\ndef search_tools_by_keywords(keywords: List[str]) -> List[Dict[str, Any]]:\n    \"\"\"\n    Search for tools by keywords\n    \n    Args:\n        keywords: List of keywords to search for\n    \n    Returns:\n        List of matching tools with scores\n    \"\"\"\n    results = []\n    \n    for tool_name, tool_info in AVAILABLE_TOOLS.items():\n        matches = 0\n        matched_keywords = []\n        \n        for keyword in keywords:\n            keyword_lower = keyword.lower()\n            if keyword_lower in tool_info[\"keywords\"]:\n                matches += 1\n                matched_keywords.append(keyword_lower)\n        \n        if matches > 0:\n            results.append({\n                \"tool\": tool_name,\n                \"score\": matches,\n                \"matched_keywords\": matched_keywords,\n                \"tool_info\": tool_info\n            })\n    \n    # Sort by score (highest first)\n    results.sort(key=lambda x: x[\"score\"], reverse=True)\n    \n    return results\n\n@mcp.tool()\ndef get_tools_by_output_type(output_type: str) -> List[Dict[str, Any]]:\n    \"\"\"\n    Get tools by their output type\n    \n    Args:\n        output_type: Type of output (\"visualization\", \"analysis\", \"calculation\", \"estimation\")\n    \n    Returns:\n        List of tools that produce the specified output type\n    \"\"\"\n    matching_tools = []\n    \n    for tool_name, tool_info in AVAILABLE_TOOLS.items():\n        if tool_info[\"output_type\"] == output_type:\n            matching_tools.append({\n                \"tool\": tool_name,\n                \"tool_info\": tool_info\n            })\n    \n    return matching_tools\n\nif __name__ == \"__main__\":\n    # Run the MCP server\n    mcp.run(transport=\"stdio\")","size_bytes":8554},"server/services/langchainLlmService.ts":{"content":"import { spawn } from \"child_process\";\nimport * as path from \"path\";\nimport * as fs from \"fs\";\n\nexport interface LangchainAgentStep {\n  tool: string;\n  action: string;\n  result: string;\n  confidence: number;\n}\n\nexport interface LangchainAgentResponse {\n  steps: LangchainAgentStep[];\n  finalResult: {\n    script: string;\n    lasFile: string;\n    tool: string;\n    confidence: number;\n    reasoning: string;\n  };\n}\n\nexport interface LangchainQueryResult {\n  id: string;\n  query: string;\n  agentResponse: LangchainAgentResponse;\n  outputFile?: string;\n  status: \"processing\" | \"completed\" | \"error\";\n  errorMessage?: string;\n  processingTime?: number;\n}\n\nexport interface LangchainClarificationResponse {\n  needsClarification: boolean;\n  confidence: number;\n  suggestions: string[];\n  message: string;\n  agentPlan?: Array<{\n    step: number;\n    description: string;\n    tool: string;\n  }>;\n}\n\nexport class LangchainLlmService {\n  private pythonPath: string;\n  private mcpServersPath: string;\n  private outputPath: string;\n\n  constructor() {\n    this.pythonPath = \"python3\";\n    this.mcpServersPath = process.env.MCP_SERVERS_PATH || \"./mcp_servers\";\n    this.outputPath = process.env.MCP_OUTPUT_PATH || \"./output\";\n    \n    this.initializeDirectories();\n  }\n\n  private initializeDirectories(): void {\n    // Create MCP servers directory if it doesn't exist\n    if (!fs.existsSync(this.mcpServersPath)) {\n      fs.mkdirSync(this.mcpServersPath, { recursive: true });\n    }\n\n    // Create the main Langchain agent script if it doesn't exist\n    this.createLangchainAgentScript();\n  }\n\n  private createLangchainAgentScript(): void {\n    const agentScriptPath = path.join(this.mcpServersPath, \"langchain_agent.py\");\n    \n    if (!fs.existsSync(agentScriptPath)) {\n      const agentScript = `#!/usr/bin/env python3\n\"\"\"\nLangchain MCP Agent for LAS file analysis\nThis script uses Langchain with MCP adapters to connect to multiple MCP servers\nand coordinate intelligent analysis of LAS files.\n\"\"\"\n\nimport asyncio\nimport json\nimport sys\nimport os\nfrom typing import Dict, List, Any, Optional\nfrom pathlib import Path\n\ntry:\n    from langchain_mcp_adapters.client import MultiServerMCPClient\n    from langchain_mcp_adapters.tools import load_mcp_tools\n    from langgraph.prebuilt import create_react_agent\n    from langchain_openai import ChatOpenAI\n    from langchain_anthropic import ChatAnthropic\n    from langchain_core.messages import HumanMessage, SystemMessage\nexcept ImportError as e:\n    print(f\"Error importing required packages: {e}\")\n    print(\"Please ensure langchain-mcp-adapters, langgraph, langchain, and related packages are installed\")\n    sys.exit(1)\n\nclass LangchainMCPAgent:\n    def __init__(self):\n        self.base_path = Path(__file__).parent.parent\n        self.mcp_servers_path = self.base_path / \"mcp_servers\"\n        self.output_path = self.base_path / \"output\"\n        self.model = None\n        self.mcp_client = None\n        self.tools = []\n        \n    async def initialize_mcp_servers(self):\n        \"\"\"Initialize connection to MCP servers\"\"\"\n        try:\n            # Configure MCP servers\n            server_config = {\n                \"scripts\": {\n                    \"command\": \"python\",\n                    \"args\": [str(self.mcp_servers_path / \"scripts_server.py\")],\n                    \"transport\": \"stdio\",\n                },\n                \"resources\": {\n                    \"command\": \"python\", \n                    \"args\": [str(self.mcp_servers_path / \"resources_server.py\")],\n                    \"transport\": \"stdio\",\n                },\n                \"tools\": {\n                    \"command\": \"python\",\n                    \"args\": [str(self.mcp_servers_path / \"tools_server.py\")],\n                    \"transport\": \"stdio\",\n                }\n            }\n            \n            # Initialize MultiServerMCPClient\n            self.mcp_client = MultiServerMCPClient(server_config)\n            \n            # Load tools from all MCP servers\n            self.tools = await self.mcp_client.get_tools()\n            \n            return True\n            \n        except Exception as e:\n            print(f\"Error initializing MCP servers: {e}\")\n            return False\n        \n    async def initialize_llm(self, llm_config: Optional[Dict] = None):\n        \"\"\"Initialize the LLM based on configuration\"\"\"\n        try:\n            # Configure LLM based on provided config\n            if llm_config and llm_config.get('provider'):\n                if llm_config['provider'] == 'openai':\n                    self.model = ChatOpenAI(\n                        model=llm_config.get('model', 'gpt-3.5-turbo'),\n                        api_key=llm_config.get('apiKey'),\n                        temperature=0.1\n                    )\n                elif llm_config['provider'] == 'anthropic':\n                    self.model = ChatAnthropic(\n                        model=llm_config.get('model', 'claude-3-sonnet-20240229'),\n                        api_key=llm_config.get('apiKey'),\n                        temperature=0.1\n                    )\n                else:\n                    raise ValueError(f\"Unsupported provider: {llm_config['provider']}\")\n            else:\n                # Default to OpenAI if no config provided\n                self.model = ChatOpenAI(\n                    model='gpt-3.5-turbo',\n                    temperature=0.1\n                )\n                \n            return True\n            \n        except Exception as e:\n            print(f\"Error initializing LLM: {e}\")\n            return False\n\n    async def create_agent(self):\n        \"\"\"Create the LangGraph agent with MCP tools\"\"\"\n        try:\n            if not self.model:\n                raise ValueError(\"LLM not initialized\")\n            if not self.tools:\n                raise ValueError(\"MCP tools not loaded\")\n                \n            # Create the React agent with loaded tools\n            self.agent = create_react_agent(self.model, self.tools)\n            \n            return True\n            \n        except Exception as e:\n            print(f\"Error creating agent: {e}\")\n            return False\n\n    async def process_query(self, query: str) -> Dict[str, Any]:\n        \"\"\"Process a user query using the Langchain agent\"\"\"\n        try:\n            # Prepare the query for the agent\n            messages = [\n                SystemMessage(content=\"You are an expert in LAS (Log ASCII Standard) file analysis. Use the available MCP tools to analyze user requests and determine the appropriate scripts, tools, and LAS files to use. Always provide clear reasoning for your decisions.\"),\n                HumanMessage(content=query)\n            ]\n            \n            # Execute the agent\n            response = await self.agent.ainvoke({\"messages\": messages})\n            \n            # Extract the final recommendation from agent response\n            # This is a simplified approach - in practice, you'd parse the agent's tool calls\n            agent_steps = []\n            \n            # For now, use the tools to get a recommendation\n            if hasattr(self.mcp_client, 'session'):\n                async with self.mcp_client.session(\"tools\") as session:\n                    # Use tools server to match query to appropriate tool\n                    tools_from_session = await load_mcp_tools(session)\n                    \n                    # Find the tool matching function\n                    for tool in tools_from_session:\n                        if tool.name == \"match_tool_to_query\":\n                            tool_result = await tool.ainvoke({\"query\": query})\n                            \n                            if tool_result.get(\"success\"):\n                                agent_steps.append({\n                                    \"tool\": \"match_tool_to_query\",\n                                    \"action\": \"analyze_query\",\n                                    \"result\": json.dumps(tool_result),\n                                    \"confidence\": tool_result.get(\"confidence\", 0.7)\n                                })\n                                \n                                return {\n                                    \"steps\": agent_steps,\n                                    \"finalResult\": {\n                                        \"script\": tool_result.get(\"script\", \"depth_visualization.py\"),\n                                        \"lasFile\": tool_result.get(\"las_file\", \"sample_well_01.las\"),\n                                        \"tool\": tool_result.get(\"tool\", \"depth_plotter\"),\n                                        \"confidence\": tool_result.get(\"confidence\", 0.7),\n                                        \"reasoning\": tool_result.get(\"reasoning\", \"Matched based on query analysis\")\n                                    }\n                                }\n            \n            # Fallback response if MCP tools aren't available\n            return {\n                \"steps\": [{\n                    \"tool\": \"fallback\",\n                    \"action\": \"default_analysis\",\n                    \"result\": \"Used fallback analysis\",\n                    \"confidence\": 0.5\n                }],\n                \"finalResult\": {\n                    \"script\": \"depth_visualization.py\",\n                    \"lasFile\": \"sample_well_01.las\", \n                    \"tool\": \"depth_plotter\",\n                    \"confidence\": 0.5,\n                    \"reasoning\": \"Fallback: default depth visualization\"\n                }\n            }\n            \n        except Exception as e:\n            print(f\"Error processing query: {e}\")\n            raise e\n\n    async def check_clarification(self, query: str) -> Dict[str, Any]:\n        \"\"\"Check if query needs clarification\"\"\"\n        try:\n            # Simple keyword-based check for now\n            query_lower = query.lower()\n            \n            # Check if query is clear enough\n            key_terms = [\"las\", \"log\", \"well\", \"depth\", \"gamma\", \"porosity\", \"permeability\", \"analysis\", \"plot\", \"visualization\"]\n            has_key_terms = any(term in query_lower for term in key_terms)\n            \n            if len(query.split()) < 3 or not has_key_terms:\n                return {\n                    \"needsClarification\": True,\n                    \"confidence\": 0.3,\n                    \"suggestions\": [\n                        \"Could you specify which type of analysis you need?\",\n                        \"Which LAS file would you like to analyze?\",\n                        \"What kind of visualization or calculation are you looking for?\"\n                    ],\n                    \"message\": \"Could you provide more details about your analysis request?\",\n                    \"agentPlan\": [\n                        {\"step\": 1, \"description\": \"Identify analysis type\", \"tool\": \"tools_server\"},\n                        {\"step\": 2, \"description\": \"Select appropriate script\", \"tool\": \"scripts_server\"},\n                        {\"step\": 3, \"description\": \"Execute analysis\", \"tool\": \"scripts_server\"}\n                    ]\n                }\n            else:\n                return {\n                    \"needsClarification\": False,\n                    \"confidence\": 0.8,\n                    \"suggestions\": [],\n                    \"message\": \"Query is clear for processing\",\n                    \"agentPlan\": [\n                        {\"step\": 1, \"description\": \"Analyze query requirements\", \"tool\": \"tools_server\"},\n                        {\"step\": 2, \"description\": \"Execute selected script\", \"tool\": \"scripts_server\"}\n                    ]\n                }\n                \n        except Exception as e:\n            print(f\"Error checking clarification: {e}\")\n            return {\n                \"needsClarification\": True,\n                \"confidence\": 0.0,\n                \"suggestions\": [\"Please try rephrasing your request\"],\n                \"message\": \"Error analyzing your request\",\n                \"agentPlan\": None\n            }\n\nasync def main():\n    if len(sys.argv) < 3:\n        print(\"Usage: python langchain_agent.py <action> <query> [config_json]\")\n        sys.exit(1)\n    \n    action = sys.argv[1]\n    query = sys.argv[2]\n    config_json = sys.argv[3] if len(sys.argv) > 3 else \"{}\"\n    \n    try:\n        config = json.loads(config_json)\n    except json.JSONDecodeError:\n        config = {}\n    \n    agent = LangchainMCPAgent()\n    \n    try:\n        # Initialize MCP servers\n        mcp_initialized = await agent.initialize_mcp_servers()\n        if not mcp_initialized:\n            raise Exception(\"Failed to initialize MCP servers\")\n        \n        # Initialize LLM\n        llm_initialized = await agent.initialize_llm(config)\n        if not llm_initialized:\n            raise Exception(\"Failed to initialize LLM\")\n        \n        # Create agent\n        agent_created = await agent.create_agent()\n        if not agent_created:\n            raise Exception(\"Failed to create agent\")\n        \n        if action == \"check_clarification\":\n            result = await agent.check_clarification(query)\n        elif action == \"process_query\":\n            result = await agent.process_query(query)\n        else:\n            raise ValueError(f\"Unknown action: {action}\")\n        \n        print(json.dumps(result, indent=2))\n        \n    except Exception as e:\n        error_result = {\n            \"error\": str(e),\n            \"success\": False\n        }\n        print(json.dumps(error_result, indent=2))\n        sys.exit(1)\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n`;\n\n      fs.writeFileSync(agentScriptPath, agentScript);\n      console.log(`Created Langchain agent script at: ${agentScriptPath}`);\n    }\n  }\n\n  async checkClarification(\n    query: string,\n    config?: {\n      provider: string;\n      model: string;\n      endpoint?: string;\n      apiKey?: string;\n    }\n  ): Promise<LangchainClarificationResponse> {\n    try {\n      const agentScriptPath = path.join(\"langchain_scripts\", \"langchain_agent.py\");\n      const configJson = config ? JSON.stringify(config) : '{}';\n      \n      const result = await this.executeScript([\n        \"langchain_scripts/langchain_agent.py\",\n        \"check_clarification\",\n        query,\n        configJson\n      ]);\n\n      if (result.success && result.stdout) {\n        try {\n          // Extract JSON by finding the last complete JSON object in the output\n          // Split by lines and look for a block that starts with { and ends with }\n          const lines = result.stdout.split('\\n');\n          let jsonText = '';\n          let foundStart = false;\n          let braceCount = 0;\n          \n          // Go through lines looking for JSON block\n          for (let i = 0; i < lines.length; i++) {\n            const line = lines[i].trim();\n            \n            // Start capturing when we find a line that starts with {\n            if (!foundStart && line.startsWith('{')) {\n              foundStart = true;\n              jsonText = line;\n              braceCount = (line.match(/\\{/g) || []).length - (line.match(/\\}/g) || []).length;\n              continue;\n            }\n            \n            // If we're capturing, continue until braces are balanced\n            if (foundStart) {\n              jsonText += '\\n' + line;\n              braceCount += (line.match(/\\{/g) || []).length - (line.match(/\\}/g) || []).length;\n              \n              // When braces are balanced, we have complete JSON\n              if (braceCount === 0) {\n                break;\n              }\n            }\n          }\n          \n          if (!foundStart || braceCount !== 0) {\n            throw new Error('No valid JSON found in agent output');\n          }\n          \n          const response = JSON.parse(jsonText);\n          return response;\n        } catch (parseError) {\n          console.error('Failed to parse Langchain clarification response:', parseError);\n          console.error('Raw stdout:', result.stdout);\n          throw new Error(`Failed to parse agent response: ${parseError}`);\n        }\n      } else {\n        throw new Error(`Langchain agent unavailable: ${result.error || 'Unknown error'}`);\n      }\n    } catch (error) {\n      console.error('Langchain clarification error:', error);\n      throw error;\n    }\n  }\n\n  async processQuery(\n    query: string,\n    config?: {\n      provider: string;\n      model: string;\n      endpoint?: string;  \n      apiKey?: string;\n    }\n  ): Promise<LangchainQueryResult> {\n    try {\n      const agentScriptPath = path.join(\"langchain_scripts\", \"langchain_agent.py\");\n      const configJson = config ? JSON.stringify(config) : '{}';\n      \n      const result = await this.executeScript([\n        \"langchain_scripts/langchain_agent.py\",\n        \"process_query\",\n        query,\n        configJson\n      ]);\n\n      if (result.success && result.stdout) {\n        try {\n          // Extract JSON by finding the last complete JSON object in the output\n          // Split by lines and look for a block that starts with { and ends with }\n          const lines = result.stdout.split('\\n');\n          let jsonText = '';\n          let foundStart = false;\n          let braceCount = 0;\n          \n          // Go through lines looking for JSON block\n          for (let i = 0; i < lines.length; i++) {\n            const line = lines[i].trim();\n            \n            // Start capturing when we find a line that starts with {\n            if (!foundStart && line.startsWith('{')) {\n              foundStart = true;\n              jsonText = line;\n              braceCount = (line.match(/\\{/g) || []).length - (line.match(/\\}/g) || []).length;\n              continue;\n            }\n            \n            // If we're capturing, continue until braces are balanced\n            if (foundStart) {\n              jsonText += '\\n' + line;\n              braceCount += (line.match(/\\{/g) || []).length - (line.match(/\\}/g) || []).length;\n              \n              // When braces are balanced, we have complete JSON\n              if (braceCount === 0) {\n                break;\n              }\n            }\n          }\n          \n          if (!foundStart || braceCount !== 0) {\n            throw new Error('No valid JSON found in agent output');\n          }\n          \n          const agentResponse = JSON.parse(jsonText);\n          \n          return {\n            id: `langchain-${Date.now()}`,\n            query,\n            agentResponse,\n            status: \"completed\",\n            processingTime: result.processingTime,\n          };\n        } catch (parseError) {\n          console.error('Failed to parse Langchain query response:', parseError);\n          throw new Error(`Failed to parse agent response: ${parseError}`);\n        }\n      } else {\n        throw new Error(`Langchain processing failed: ${result.error || 'Unknown error'}`);\n      }\n    } catch (error) {\n      console.error('Langchain query processing error:', error);\n      throw error;\n    }\n  }\n\n  async testConnection(config?: {\n    provider: string;\n    model: string;\n    endpoint?: string;\n    apiKey?: string;\n  }): Promise<{ success: boolean; responseTime?: number; error?: string }> {\n    const startTime = Date.now();\n    \n    try {\n      // Test with a simple clarification check\n      const response = await this.checkClarification(\"test connection\", config);\n      const responseTime = Date.now() - startTime;\n      \n      return {\n        success: true,\n        responseTime\n      };\n    } catch (error) {\n      const responseTime = Date.now() - startTime;\n      return {\n        success: false,\n        responseTime,\n        error: error instanceof Error ? error.message : 'Unknown error'\n      };\n    }\n  }\n\n  private async executeScript(args: string[]): Promise<{\n    success: boolean;\n    stdout?: string;\n    stderr?: string;\n    error?: string;\n    processingTime?: number;\n  }> {\n    return new Promise((resolve) => {\n      const startTime = Date.now();\n      \n      // Set PYTHONPATH to include the langchain_scripts directory\n      const env = {\n        ...process.env,\n        PYTHONPATH: `${process.cwd()}/langchain_scripts:${process.env.PYTHONPATH || ''}`,\n        PATH: `/home/runner/workspace/.pythonlibs/bin:${process.env.PATH || ''}`,\n      };\n      \n      const child = spawn(this.pythonPath, args, {\n        cwd: process.cwd(),\n        stdio: ['pipe', 'pipe', 'pipe'],\n        env,\n      });\n\n      let stdout = '';\n      let stderr = '';\n\n      child.stdout.on('data', (data) => {\n        stdout += data.toString();\n      });\n\n      child.stderr.on('data', (data) => {\n        stderr += data.toString();\n      });\n\n      child.on('close', (code) => {\n        const processingTime = Date.now() - startTime;\n        \n        console.log(`Langchain script execution: exit code ${code}`);\n        console.log(`Langchain script stdout:`, stdout);\n        console.log(`Langchain script stderr:`, stderr);\n        \n        if (code === 0) {\n          resolve({\n            success: true,\n            stdout: stdout.trim(),\n            stderr: stderr.trim() || undefined,\n            processingTime\n          });\n        } else {\n          console.error('Langchain script stderr:', stderr);\n          resolve({\n            success: false,\n            stdout: stdout.trim() || undefined,\n            stderr: stderr.trim(),\n            error: `Langchain script execution failed with code ${code}: ${stderr}`,\n            processingTime\n          });\n        }\n      });\n\n      child.on('error', (error) => {\n        const processingTime = Date.now() - startTime;\n        resolve({\n          success: false,\n          error: `Failed to execute Langchain script: ${error.message}`,\n          processingTime\n        });\n      });\n    });\n  }\n}\n\n// Export singleton instance\nexport const langchainLlmService = new LangchainLlmService();","size_bytes":21705},"client/src/components/LangchainQueryPanel.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Send, Loader2, AlertCircle, CheckCircle, Bot, User, Brain, Code, Play, Image, Network, Zap } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { llmConfigStorage } from \"@/lib/llmConfigStorage\";\n\ninterface LangchainQueryResult {\n  id: string;\n  query: string;\n  agentResponse: {\n    steps: Array<{\n      tool: string;\n      action: string;\n      result: string;\n      confidence: number;\n    }>;\n    finalResult: {\n      script: string;\n      lasFile: string;\n      tool: string;\n      confidence: number;\n      reasoning: string;\n    };\n  };\n  outputFile?: string;\n  status: \"processing\" | \"completed\" | \"error\";\n  errorMessage?: string;\n  processingTime?: number;\n}\n\ninterface ChatMessage {\n  id: string;\n  type: 'user' | 'ai' | 'system';\n  content: string;\n  timestamp: Date;\n  status?: 'processing' | 'completed' | 'error';\n  metadata?: {\n    agentResponse?: LangchainQueryResult['agentResponse'];\n    outputFile?: string;\n    processingTime?: number;\n    clarificationOptions?: string[];\n    agentSteps?: Array<{\n      step: number;\n      description: string;\n      status: 'pending' | 'running' | 'completed' | 'error';\n      tool?: string;\n      result?: string;\n    }>;\n  };\n}\n\ninterface LangchainClarificationResponse {\n  needsClarification: boolean;\n  confidence: number;\n  suggestions: string[];\n  message: string;\n  agentPlan?: Array<{\n    step: number;\n    description: string;\n    tool: string;\n  }>;\n}\n\nexport default function LangchainQueryPanel() {\n  const [currentInput, setCurrentInput] = useState(\"\");\n  const [chatMessages, setChatMessages] = useState<ChatMessage[]>([\n    {\n      id: '1',\n      type: 'ai',\n      content: \"Hello! I'm your advanced AI agent powered by Langchain and MCP. I can understand complex queries, create execution plans, and coordinate multiple tools to analyze your LAS data. Ask me anything about your well log analysis!\",\n      timestamp: new Date()\n    }\n  ]);\n  const [isWaitingForResponse, setIsWaitingForResponse] = useState(false);\n  const scrollAreaRef = useRef<HTMLDivElement>(null);\n  const { toast } = useToast();\n\n  // Auto-scroll to bottom when new messages are added\n  useEffect(() => {\n    if (scrollAreaRef.current) {\n      scrollAreaRef.current.scrollTop = scrollAreaRef.current.scrollHeight;\n    }\n  }, [chatMessages]);\n\n  // Check if query needs clarification using Langchain agent\n  const checkLangchainClarificationMutation = useMutation({\n    mutationFn: async (queryText: string): Promise<LangchainClarificationResponse> => {\n      // Get LLM configuration from localStorage\n      const llmConfig = llmConfigStorage.get();\n      \n      const response = await fetch(\"/api/langchain/check-clarification\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ query: queryText, llmConfig }),\n      });\n      if (!response.ok) {\n        throw new Error(`Langchain agent returned ${response.status}: ${response.statusText}`);\n      }\n      return response.json();\n    }\n  });\n\n  const processLangchainQueryMutation = useMutation({\n    mutationFn: async (queryText: string) => {\n      // Get LLM configuration from localStorage\n      const llmConfig = llmConfigStorage.get();\n      \n      const response = await fetch(\"/api/langchain/process-query\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ query: queryText, llmConfig }),\n      });\n      if (!response.ok) throw new Error(\"Failed to process query with Langchain agent\");\n      return response.json();\n    },\n    onSuccess: (data: LangchainQueryResult) => {\n      // Update the processing message with completed status\n      setChatMessages(prev => prev.map(msg => \n        msg.id === 'processing' \n          ? {\n              ...msg,\n              type: 'ai' as const,\n              content: data.status === 'completed' \n                ? `Excellent! My AI agent has successfully executed your request through multiple coordinated steps. The final analysis using ${data.agentResponse.finalResult.tool} is complete.`\n                : data.status === 'error'\n                ? `I encountered an error during the AI agent execution: ${data.errorMessage}`\n                : 'Processing your request with the AI agent...',\n              status: data.status,\n              metadata: {\n                agentResponse: data.agentResponse,\n                outputFile: data.outputFile,\n                processingTime: data.processingTime\n              }\n            }\n          : msg\n      ));\n      \n      queryClient.invalidateQueries({ queryKey: [\"/api/output-files\"] });\n      setIsWaitingForResponse(false);\n    },\n    onError: (error) => {\n      setChatMessages(prev => prev.map(msg => \n        msg.id === 'processing' \n          ? {\n              ...msg,\n              type: 'ai' as const,\n              content: `I'm sorry, my AI agent encountered an error: ${error instanceof Error ? error.message : 'Unknown error'}`,\n              status: 'error' as const\n            }\n          : msg\n      ));\n      setIsWaitingForResponse(false);\n    },\n  });\n\n  const addMessage = (type: 'user' | 'ai' | 'system', content: string, metadata?: ChatMessage['metadata']) => {\n    const newMessage: ChatMessage = {\n      id: Date.now().toString(),\n      type,\n      content,\n      timestamp: new Date(),\n      metadata\n    };\n    setChatMessages(prev => [...prev, newMessage]);\n    return newMessage.id;\n  };\n\n  const handleSubmit = async () => {\n    if (!currentInput.trim() || isWaitingForResponse) return;\n\n    const userMessage = currentInput.trim();\n    setCurrentInput(\"\");\n    setIsWaitingForResponse(true);\n\n    // Add user message\n    addMessage('user', userMessage);\n\n    try {\n      // First check if we need clarification using Langchain agent\n      const clarificationResult = await checkLangchainClarificationMutation.mutateAsync(userMessage);\n      \n      if (clarificationResult.needsClarification) {\n        // Add AI clarification message with agent plan if available\n        let clarificationContent = clarificationResult.message;\n        \n        if (clarificationResult.agentPlan && clarificationResult.agentPlan.length > 0) {\n          clarificationContent += \"\\n\\nHere's my proposed execution plan:\";\n          clarificationResult.agentPlan.forEach((step, index) => {\n            clarificationContent += `\\n${step.step}. ${step.description} (using ${step.tool})`;\n          });\n        }\n\n        addMessage('ai', clarificationContent, {\n          clarificationOptions: clarificationResult.suggestions,\n          agentSteps: clarificationResult.agentPlan?.map(step => ({\n            step: step.step,\n            description: step.description,\n            status: 'pending' as const,\n            tool: step.tool\n          }))\n        });\n        setIsWaitingForResponse(false);\n      } else {\n        // Add processing message\n        const processingId = addMessage('ai', 'Let me analyze your request and create an execution plan using my AI agent...', {});\n        \n        // Update message ID for tracking\n        setChatMessages(prev => prev.map(msg => \n          msg.id === processingId ? { ...msg, id: 'processing' } : msg\n        ));\n        \n        // Process the query with Langchain agent\n        processLangchainQueryMutation.mutate(userMessage);\n      }\n    } catch (error) {\n      addMessage('ai', \"I'm having trouble understanding your request with my AI agent. Could you try rephrasing it?\");\n      setIsWaitingForResponse(false);\n    }\n  };\n\n  const handleClarificationClick = (suggestion: string) => {\n    setCurrentInput(suggestion);\n  };\n\n  const formatTimestamp = (timestamp: Date) => {\n    return timestamp.toLocaleTimeString('en-US', { \n      hour: '2-digit', \n      minute: '2-digit' \n    });\n  };\n\n  const getMessageIcon = (type: ChatMessage['type']) => {\n    switch (type) {\n      case 'user':\n        return <User className=\"w-4 h-4\" />;\n      case 'ai':\n        return <Brain className=\"w-4 h-4\" />;\n      case 'system':\n        return <Network className=\"w-4 h-4\" />;\n    }\n  };\n\n  const getAgentSteps = (metadata?: ChatMessage['metadata']) => {\n    if (!metadata?.agentResponse) return [];\n    \n    return [\n      { icon: <Brain className=\"w-3 h-3\" />, text: `AI Agent: ${metadata.agentResponse.steps.length} coordinated steps` },\n      { icon: <Network className=\"w-3 h-3\" />, text: `MCP Protocol: ${metadata.agentResponse.finalResult.confidence > 0.8 ? 'High' : 'Medium'} confidence` },\n      { icon: <Code className=\"w-3 h-3\" />, text: `Final Script: ${metadata.agentResponse.finalResult.script}` },\n      { icon: <Play className=\"w-3 h-3\" />, text: `LAS File: ${metadata.agentResponse.finalResult.lasFile}` },\n      { icon: <Image className=\"w-3 h-3\" />, text: metadata.outputFile ? `Output: ${metadata.outputFile.split('/').pop()}` : 'Generating output...' }\n    ];\n  };\n\n  const renderAgentSteps = (agentSteps?: Array<{\n    step: number;\n    description: string;\n    status: 'pending' | 'running' | 'completed' | 'error';\n    tool?: string;\n    result?: string;\n  }>) => {\n    if (!agentSteps || agentSteps.length === 0) return null;\n\n    return (\n      <div className=\"mt-3 space-y-2\">\n        <p className=\"text-xs font-medium opacity-80 flex items-center gap-1\">\n          <Zap className=\"w-3 h-3\" />\n          Agent Execution Plan:\n        </p>\n        <div className=\"space-y-1\">\n          {agentSteps.map((step, index: number) => (\n            <div key={index} className=\"flex items-center space-x-2 text-xs opacity-80\">\n              <span className={`w-4 h-4 rounded-full flex items-center justify-center text-xs ${\n                step.status === 'completed' ? 'bg-green-500' : \n                step.status === 'running' ? 'bg-blue-500' : \n                step.status === 'error' ? 'bg-red-500' : 'bg-gray-500'\n              }`}>\n                {step.step}\n              </span>\n              <span>{step.description}</span>\n              {step.tool && <Badge variant=\"outline\" className=\"text-xs px-1 py-0\">{step.tool}</Badge>}\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <Card className=\"w-full h-[600px] flex flex-col\" data-testid=\"card-langchain-query\">\n      <CardHeader className=\"flex-shrink-0\">\n        <CardTitle className=\"flex items-center gap-2\">\n          <Brain className=\"w-5 h-5 text-blue-500\" />\n          AI Query Assistant\n          <Badge variant=\"secondary\" className=\"ml-2\">Langchain + MCP</Badge>\n        </CardTitle>\n        <CardDescription>\n          Advanced AI agent that creates execution plans and coordinates multiple tools to analyze your data.\n        </CardDescription>\n      </CardHeader>\n      \n      <CardContent className=\"flex-1 flex flex-col space-y-4 overflow-hidden\">\n        {/* Chat Messages */}\n        <ScrollArea className=\"flex-1 pr-4 min-h-0\" ref={scrollAreaRef}>\n          <div className=\"space-y-4 min-h-full\">\n            {chatMessages.map((message) => (\n              <div key={message.id} className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}>\n                <div className={`max-w-[80%] ${message.type === 'user' ? 'order-2' : 'order-1'}`}>\n                  <div className={`flex items-start space-x-2 ${message.type === 'user' ? 'flex-row-reverse space-x-reverse' : ''}`}>\n                    <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\n                      message.type === 'user' \n                        ? 'bg-primary text-primary-foreground' \n                        : 'bg-blue-500 text-white'\n                    }`}>\n                      {getMessageIcon(message.type)}\n                    </div>\n                    <div className={`rounded-lg p-3 ${\n                      message.type === 'user'\n                        ? 'bg-primary text-primary-foreground'\n                        : 'bg-blue-50 dark:bg-blue-950 text-blue-900 dark:text-blue-100 border border-blue-200 dark:border-blue-800'\n                    }`}>\n                      <p className=\"text-sm whitespace-pre-wrap\">{message.content}</p>\n                      \n                      {/* Show clarification options */}\n                      {message.metadata?.clarificationOptions && (\n                        <div className=\"mt-3 space-y-2\">\n                          <p className=\"text-xs font-medium opacity-80\">Try these suggestions:</p>\n                          {message.metadata.clarificationOptions.map((option, index) => (\n                            <button\n                              key={index}\n                              onClick={() => handleClarificationClick(option)}\n                              className=\"block w-full text-left p-2 text-xs rounded border border-current/20 hover:bg-current/10 transition-colors\"\n                            >\n                              {option}\n                            </button>\n                          ))}\n                        </div>\n                      )}\n                      \n                      {/* Show agent execution plan */}\n                      {renderAgentSteps(message.metadata?.agentSteps)}\n                      \n                      {/* Show processing steps */}\n                      {message.metadata?.agentResponse && (\n                        <div className=\"mt-3 space-y-2\">\n                          <p className=\"text-xs font-medium opacity-80 flex items-center gap-1\">\n                            <Zap className=\"w-3 h-3\" />\n                            Agent Analysis Details:\n                          </p>\n                          <div className=\"space-y-1\">\n                            {getAgentSteps(message.metadata).map((step, index) => (\n                              <div key={index} className=\"flex items-center space-x-2 text-xs opacity-80\">\n                                {step.icon}\n                                <span>{step.text}</span>\n                              </div>\n                            ))}\n                          </div>\n                          {message.metadata.processingTime && (\n                            <p className=\"text-xs opacity-60 mt-2\">\n                              Completed in {message.metadata.processingTime}ms\n                            </p>\n                          )}\n                        </div>\n                      )}\n                      \n                      <p className=\"text-xs opacity-60 mt-2\">\n                        {formatTimestamp(message.timestamp)}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n            \n            {isWaitingForResponse && (\n              <div className=\"flex justify-start\">\n                <div className=\"max-w-[80%]\">\n                  <div className=\"flex items-start space-x-2\">\n                    <div className=\"w-8 h-8 rounded-full flex items-center justify-center bg-blue-500 text-white\">\n                      <Brain className=\"w-4 h-4\" />\n                    </div>\n                    <div className=\"rounded-lg p-3 bg-blue-50 dark:bg-blue-950 text-blue-900 dark:text-blue-100 border border-blue-200 dark:border-blue-800\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Loader2 className=\"w-4 h-4 animate-spin\" />\n                        <span className=\"text-sm\">AI agent is analyzing...</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </ScrollArea>\n        \n        {/* Input Area */}\n        <div className=\"flex-shrink-0 flex space-x-2\">\n          <Input\n            placeholder=\"Ask complex questions about LAS analysis. I'll create a plan and execute it for you...\"\n            value={currentInput}\n            onChange={(e) => setCurrentInput(e.target.value)}\n            onKeyPress={(e) => e.key === 'Enter' && handleSubmit()}\n            disabled={isWaitingForResponse}\n            className=\"flex-1\"\n            data-testid=\"input-langchain-chat\"\n          />\n          <Button\n            onClick={handleSubmit}\n            disabled={!currentInput.trim() || isWaitingForResponse}\n            size=\"icon\"\n            data-testid=\"button-langchain-send\"\n          >\n            <Send className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":16957},"client/src/pages/llm-integration.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState } from \"react\";\nimport Sidebar from \"@/components/Sidebar\";\nimport { Button } from \"@/components/ui/button\";\nimport { RefreshCw, Brain, Cpu } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport LangchainQueryPanel from \"@/components/LangchainQueryPanel\";\nimport OutputViewer from \"@/components/OutputViewer\";\n\ninterface SystemStatus {\n  id: string;\n  component: string;\n  status: string;\n  lastCheck: string;\n  metadata: any;\n}\n\nexport default function LLMIntegrationPage() {\n  const { toast } = useToast();\n  const [wsConnected, setWsConnected] = useState(false);\n\n  const { data: systemStatus, isLoading } = useQuery<SystemStatus[]>({\n    queryKey: [\"/api/system-status\"],\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <RefreshCw className=\"h-8 w-8 animate-spin mx-auto mb-4 text-primary\" />\n          <p className=\"text-muted-foreground\">Loading LLM Integration...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const langchainStatus = systemStatus?.find(s => s.component === 'langchain_llm');\n  const mcpStatus = systemStatus?.find(s => s.component === 'mcp_server');\n\n  return (\n    <div className=\"flex h-screen overflow-hidden bg-background\">\n      <Sidebar />\n      \n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        {/* Header */}\n        <header className=\"bg-card border-b border-border px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h2 className=\"text-xl font-semibold text-foreground\">LLM Integration</h2>\n              <p className=\"text-muted-foreground\">Advanced AI analysis using Langchain and MCP protocols</p>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"flex items-center space-x-2\">\n                <div className={`w-2 h-2 rounded-full ${wsConnected ? 'bg-success' : 'bg-destructive'}`} />\n                <span className=\"text-xs text-muted-foreground\">\n                  {wsConnected ? 'Connected' : 'Disconnected'}\n                </span>\n              </div>\n              <div className=\"flex items-center space-x-2 px-3 py-1 bg-secondary rounded-md\">\n                <Brain className=\"w-4 h-4 text-blue-500\" />\n                <span className=\"text-sm font-medium\">\n                  {langchainStatus?.status === 'online' ? 'Langchain Active' : 'Langchain Offline'}\n                </span>\n              </div>\n              <div className=\"flex items-center space-x-2 px-3 py-1 bg-secondary rounded-md\">\n                <Cpu className=\"w-4 h-4 text-green-500\" />\n                <span className=\"text-sm font-medium\">\n                  {mcpStatus?.status === 'online' ? 'MCP Ready' : 'MCP Offline'}\n                </span>\n              </div>\n            </div>\n          </div>\n        </header>\n\n        {/* Main Content */}\n        <main className=\"flex-1 overflow-auto p-6 space-y-6\">\n          {/* AI Query Assistant and Output Files - Same layout as dashboard */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <LangchainQueryPanel />\n            <OutputViewer />\n          </div>\n\n          {/* Additional Info Section */}\n          <div className=\"bg-card rounded-lg border border-border p-6\">\n            <h3 className=\"text-lg font-semibold mb-3 flex items-center gap-2\">\n              <Brain className=\"w-5 h-5 text-blue-500\" />\n              About Langchain Integration\n            </h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-muted-foreground\">\n              <div>\n                <h4 className=\"font-medium text-foreground mb-2\">Enhanced AI Capabilities</h4>\n                <ul className=\"space-y-1\">\n                  <li>â€¢ Advanced query understanding with Langchain agents</li>\n                  <li>â€¢ Multi-step reasoning and tool orchestration</li>\n                  <li>â€¢ Automatic tool selection and execution</li>\n                  <li>â€¢ Context-aware processing workflows</li>\n                </ul>\n              </div>\n              <div>\n                <h4 className=\"font-medium text-foreground mb-2\">MCP Protocol Benefits</h4>\n                <ul className=\"space-y-1\">\n                  <li>â€¢ Standardized tool and resource access</li>\n                  <li>â€¢ Seamless integration with external systems</li>\n                  <li>â€¢ Efficient data exchange and processing</li>\n                  <li>â€¢ Scalable architecture for AI workflows</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}","size_bytes":4827},"mcp_servers/depth_plotter_server.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nMCP Server for Depth Plotter Tool\nProvides depth visualization tools for LAS file analysis using the Model Context Protocol\n\"\"\"\n\nimport sys\nimport asyncio\nfrom pathlib import Path\nfrom mcp.server.fastmcp import FastMCP\n\n# Initialize MCP server\nmcp = FastMCP(\"DepthPlotter\")\n\n@mcp.tool()\nasync def create_depth_plot(las_file: str, output_dir: str = \"output\") -> dict:\n    \"\"\"\n    Create depth visualization plots from LAS file data\n    \n    Args:\n        las_file: Path to the LAS file to analyze\n        output_dir: Directory to save the generated plots\n        \n    Returns:\n        Dictionary containing plot information and file paths\n    \"\"\"\n    try:\n        import subprocess\n        import os\n        from datetime import datetime\n        \n        # Create timestamped output directory\n        timestamp = datetime.now().strftime(\"%Y-%m-%d_%H-%M-%S\")\n        full_output_dir = Path(output_dir) / timestamp\n        full_output_dir.mkdir(parents=True, exist_ok=True)\n        \n        # Get the depth_plotter script path\n        script_path = Path(\"./mcp_resources/scripts/depth_plotter.py\")\n        las_path = Path(\"./mcp_resources/las_files\") / las_file\n        \n        if not script_path.exists():\n            return {\"success\": False, \"error\": f\"Depth plotter script not found at {script_path}\"}\n        if not las_path.exists():\n            return {\"success\": False, \"error\": f\"LAS file not found at {las_path}\"}\n        \n        # Execute the depth plotting script\n        cmd = [sys.executable, str(script_path), str(las_path)]\n        result = subprocess.run(cmd, capture_output=True, text=True, cwd=Path.cwd(), timeout=300)\n        \n        # Collect generated plots\n        output_files = []\n        if full_output_dir.exists():\n            for output_file in full_output_dir.iterdir():\n                if output_file.is_file() and output_file.suffix in ['.png', '.jpg', '.pdf']:\n                    output_files.append({\n                        \"name\": output_file.name,\n                        \"path\": str(output_file.relative_to(Path.cwd())),\n                        \"full_path\": str(output_file)\n                    })\n        \n        return {\n            \"success\": result.returncode == 0,\n            \"las_file\": las_file,\n            \"output_directory\": str(full_output_dir),\n            \"plots_generated\": output_files,\n            \"execution_details\": {\n                \"stdout\": result.stdout,\n                \"stderr\": result.stderr if result.stderr else None\n            }\n        }\n        \n    except Exception as e:\n        return {\"success\": False, \"error\": f\"Depth plotting failed: {str(e)}\"}\n\n@mcp.tool()\nasync def analyze_depth_data(las_file: str) -> dict:\n    \"\"\"\n    Analyze depth data characteristics from LAS file\n    \n    Args:\n        las_file: Path to the LAS file to analyze\n        \n    Returns:\n        Dictionary containing depth data analysis results\n    \"\"\"\n    try:\n        # This would analyze the depth curve data\n        las_path = Path(\"./mcp_resources/las_files\") / las_file\n        \n        if not las_path.exists():\n            return {\"success\": False, \"error\": f\"LAS file not found: {las_file}\"}\n        \n        # Mock analysis for now - in real implementation would parse LAS file\n        return {\n            \"success\": True,\n            \"las_file\": las_file,\n            \"analysis\": {\n                \"depth_range\": \"1000-2500 feet\",\n                \"total_depth\": \"1500 feet\",\n                \"sampling_rate\": \"0.5 feet\",\n                \"curves_available\": [\"DEPTH\", \"GR\", \"NPHI\", \"RHOB\"]\n            }\n        }\n        \n    except Exception as e:\n        return {\"success\": False, \"error\": f\"Depth analysis failed: {str(e)}\"}\n\nif __name__ == \"__main__\":\n    mcp.run()","size_bytes":3759},"mcp_servers/gamma_ray_server.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nMCP Server for Gamma Ray Analyzer Tool\nProvides gamma ray analysis tools for geological formation identification using MCP\n\"\"\"\n\nimport sys\nimport asyncio\nfrom pathlib import Path\nfrom mcp.server.fastmcp import FastMCP\n\n# Initialize MCP server\nmcp = FastMCP(\"GammaRayAnalyzer\")\n\n@mcp.tool()\nasync def analyze_gamma_ray_formations(las_file: str, output_dir: str = \"output\") -> dict:\n    \"\"\"\n    Analyze gamma ray data for geological formation identification\n    \n    Args:\n        las_file: Path to the LAS file containing gamma ray data\n        output_dir: Directory to save analysis results\n        \n    Returns:\n        Dictionary containing gamma ray analysis results and generated files\n    \"\"\"\n    try:\n        import subprocess\n        import os\n        from datetime import datetime\n        \n        # Create timestamped output directory\n        timestamp = datetime.now().strftime(\"%Y-%m-%d_%H-%M-%S\")\n        full_output_dir = Path(output_dir) / timestamp\n        full_output_dir.mkdir(parents=True, exist_ok=True)\n        \n        # Get the gamma ray analyzer script path\n        script_path = Path(\"./mcp_resources/scripts/gamma_ray_analyzer.py\")\n        las_path = Path(\"./mcp_resources/las_files\") / las_file\n        \n        if not script_path.exists():\n            return {\"success\": False, \"error\": f\"Gamma ray analyzer script not found at {script_path}\"}\n        if not las_path.exists():\n            return {\"success\": False, \"error\": f\"LAS file not found at {las_path}\"}\n        \n        # Execute the gamma ray analysis script\n        cmd = [sys.executable, str(script_path), str(las_path)]\n        result = subprocess.run(cmd, capture_output=True, text=True, cwd=Path.cwd(), timeout=300)\n        \n        # Collect generated analysis files\n        output_files = []\n        if full_output_dir.exists():\n            for output_file in full_output_dir.iterdir():\n                if output_file.is_file():\n                    output_files.append({\n                        \"name\": output_file.name,\n                        \"path\": str(output_file.relative_to(Path.cwd())),\n                        \"full_path\": str(output_file)\n                    })\n        \n        return {\n            \"success\": result.returncode == 0,\n            \"las_file\": las_file,\n            \"analysis_type\": \"gamma_ray_formation_identification\",\n            \"output_directory\": str(full_output_dir),\n            \"files_generated\": output_files,\n            \"execution_details\": {\n                \"stdout\": result.stdout,\n                \"stderr\": result.stderr if result.stderr else None\n            }\n        }\n        \n    except Exception as e:\n        return {\"success\": False, \"error\": f\"Gamma ray analysis failed: {str(e)}\"}\n\n@mcp.tool()\nasync def calculate_formation_properties(las_file: str, depth_range: str = None) -> dict:\n    \"\"\"\n    Calculate geological formation properties from gamma ray data\n    \n    Args:\n        las_file: Path to the LAS file containing gamma ray data\n        depth_range: Optional depth range to analyze (e.g., \"1000-1500\")\n        \n    Returns:\n        Dictionary containing formation property calculations\n    \"\"\"\n    try:\n        las_path = Path(\"./mcp_resources/las_files\") / las_file\n        \n        if not las_path.exists():\n            return {\"success\": False, \"error\": f\"LAS file not found: {las_file}\"}\n        \n        # Mock formation properties calculation - real implementation would parse LAS data\n        return {\n            \"success\": True,\n            \"las_file\": las_file,\n            \"depth_range\": depth_range or \"full_well\",\n            \"formation_properties\": {\n                \"average_gamma_ray\": \"65 API\",\n                \"formation_types\": [\"Shale\", \"Sandstone\", \"Limestone\"],\n                \"clean_intervals\": [\"1200-1250 ft\", \"1400-1450 ft\"],\n                \"clay_content\": \"25-40%\",\n                \"net_to_gross\": \"0.65\"\n            }\n        }\n        \n    except Exception as e:\n        return {\"success\": False, \"error\": f\"Formation properties calculation failed: {str(e)}\"}\n\nif __name__ == \"__main__\":\n    mcp.run()","size_bytes":4112},"mcp_servers/porosity_server.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nMCP Server for Porosity Calculator Tool\nProvides porosity calculation tools from neutron and density logs using MCP\n\"\"\"\n\nimport sys\nimport asyncio\nfrom pathlib import Path\nfrom mcp.server.fastmcp import FastMCP\n\n# Initialize MCP server\nmcp = FastMCP(\"PorosityCalculator\")\n\n@mcp.tool()\nasync def calculate_porosity(las_file: str, output_dir: str = \"output\") -> dict:\n    \"\"\"\n    Calculate porosity from neutron and density logs\n    \n    Args:\n        las_file: Path to the LAS file containing neutron and density data\n        output_dir: Directory to save calculation results\n        \n    Returns:\n        Dictionary containing porosity calculation results and generated files\n    \"\"\"\n    try:\n        import subprocess\n        import os\n        from datetime import datetime\n        \n        # Create timestamped output directory\n        timestamp = datetime.now().strftime(\"%Y-%m-%d_%H-%M-%S\")\n        full_output_dir = Path(output_dir) / timestamp\n        full_output_dir.mkdir(parents=True, exist_ok=True)\n        \n        # Get the porosity calculator script path\n        script_path = Path(\"./mcp_resources/scripts/porosity_calculator.py\")\n        las_path = Path(\"./mcp_resources/las_files\") / las_file\n        \n        if not script_path.exists():\n            return {\"success\": False, \"error\": f\"Porosity calculator script not found at {script_path}\"}\n        if not las_path.exists():\n            return {\"success\": False, \"error\": f\"LAS file not found at {las_path}\"}\n        \n        # Execute the porosity calculation script\n        cmd = [sys.executable, str(script_path), str(las_path)]\n        result = subprocess.run(cmd, capture_output=True, text=True, cwd=Path.cwd(), timeout=300)\n        \n        # Collect generated calculation files\n        output_files = []\n        if full_output_dir.exists():\n            for output_file in full_output_dir.iterdir():\n                if output_file.is_file():\n                    output_files.append({\n                        \"name\": output_file.name,\n                        \"path\": str(output_file.relative_to(Path.cwd())),\n                        \"full_path\": str(output_file)\n                    })\n        \n        return {\n            \"success\": result.returncode == 0,\n            \"las_file\": las_file,\n            \"calculation_type\": \"neutron_density_porosity\",\n            \"output_directory\": str(full_output_dir),\n            \"files_generated\": output_files,\n            \"execution_details\": {\n                \"stdout\": result.stdout,\n                \"stderr\": result.stderr if result.stderr else None\n            }\n        }\n        \n    except Exception as e:\n        return {\"success\": False, \"error\": f\"Porosity calculation failed: {str(e)}\"}\n\n@mcp.tool()\nasync def analyze_reservoir_quality(las_file: str, porosity_cutoff: float = 0.12) -> dict:\n    \"\"\"\n    Analyze reservoir quality based on calculated porosity values\n    \n    Args:\n        las_file: Path to the LAS file containing porosity data\n        porosity_cutoff: Minimum porosity threshold for reservoir quality\n        \n    Returns:\n        Dictionary containing reservoir quality analysis\n    \"\"\"\n    try:\n        las_path = Path(\"./mcp_resources/las_files\") / las_file\n        \n        if not las_path.exists():\n            return {\"success\": False, \"error\": f\"LAS file not found: {las_file}\"}\n        \n        # Mock reservoir quality analysis - real implementation would parse LAS data\n        return {\n            \"success\": True,\n            \"las_file\": las_file,\n            \"porosity_cutoff\": porosity_cutoff,\n            \"reservoir_analysis\": {\n                \"average_porosity\": \"18.5%\",\n                \"maximum_porosity\": \"28.2%\",\n                \"minimum_porosity\": \"8.1%\",\n                \"reservoir_intervals\": [\"1150-1200 ft\", \"1300-1380 ft\"],\n                \"net_reservoir\": \"130 ft\",\n                \"gross_interval\": \"400 ft\",\n                \"net_to_gross_ratio\": \"0.325\",\n                \"reservoir_quality\": \"Fair to Good\"\n            }\n        }\n        \n    except Exception as e:\n        return {\"success\": False, \"error\": f\"Reservoir quality analysis failed: {str(e)}\"}\n\nif __name__ == \"__main__\":\n    mcp.run()","size_bytes":4200},"client/src/pages/langchain-agent.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState } from \"react\";\nimport Sidebar from \"@/components/Sidebar\";\nimport { Button } from \"@/components/ui/button\";\nimport { RefreshCw, Brain, Cpu } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport LangchainQueryPanel from \"@/components/LangchainQueryPanel\";\nimport OutputViewer from \"@/components/OutputViewer\";\n\ninterface SystemStatus {\n  id: string;\n  component: string;\n  status: string;\n  lastCheck: string;\n  metadata: any;\n}\n\nexport default function LangchainAgentPage() {\n  const { toast } = useToast();\n  const [wsConnected, setWsConnected] = useState(false);\n\n  const { data: systemStatus, isLoading } = useQuery<SystemStatus[]>({\n    queryKey: [\"/api/system-status\"],\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <RefreshCw className=\"h-8 w-8 animate-spin mx-auto mb-4 text-primary\" />\n          <p className=\"text-muted-foreground\">Loading Langchain Agent...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const langchainStatus = systemStatus?.find(s => s.component === 'langchain_llm');\n  const mcpStatus = systemStatus?.find(s => s.component === 'mcp_server');\n\n  return (\n    <div className=\"flex h-screen overflow-hidden bg-background\">\n      <Sidebar />\n      \n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        {/* Header */}\n        <header className=\"bg-card border-b border-border px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h2 className=\"text-xl font-semibold text-foreground\">Langchain Agent</h2>\n              <p className=\"text-muted-foreground\">Advanced AI agent using Langchain with MCP server integration</p>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"flex items-center space-x-2\">\n                <div className={`w-2 h-2 rounded-full ${wsConnected ? 'bg-success' : 'bg-destructive'}`} />\n                <span className=\"text-xs text-muted-foreground\">\n                  {wsConnected ? 'Connected' : 'Disconnected'}\n                </span>\n              </div>\n              <div className=\"flex items-center space-x-2 px-3 py-1 bg-secondary rounded-md\">\n                <Brain className=\"w-4 h-4 text-blue-500\" />\n                <span className=\"text-sm font-medium\">\n                  {langchainStatus?.status === 'online' ? 'Langchain Active' : 'Langchain Offline'}\n                </span>\n              </div>\n              <div className=\"flex items-center space-x-2 px-3 py-1 bg-secondary rounded-md\">\n                <Cpu className=\"w-4 h-4 text-green-500\" />\n                <span className=\"text-sm font-medium\">\n                  {mcpStatus?.status === 'online' ? 'MCP Ready' : 'MCP Offline'}\n                </span>\n              </div>\n            </div>\n          </div>\n        </header>\n\n        {/* Main Content */}\n        <main className=\"flex-1 overflow-auto p-6 space-y-6\">\n          {/* AI Query Assistant and Output Files - Same layout as dashboard */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <LangchainQueryPanel />\n            <OutputViewer />\n          </div>\n\n          {/* Additional Info Section */}\n          <div className=\"bg-card rounded-lg border border-border p-6\">\n            <h3 className=\"text-lg font-semibold mb-3 flex items-center gap-2\">\n              <Brain className=\"w-5 h-5 text-blue-500\" />\n              About Langchain MCP Agent\n            </h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-muted-foreground\">\n              <div>\n                <h4 className=\"font-medium text-foreground mb-2\">Enhanced AI Capabilities</h4>\n                <ul className=\"space-y-1\">\n                  <li>â€¢ Advanced query understanding with Langchain agents</li>\n                  <li>â€¢ Multi-step reasoning and tool orchestration</li>\n                  <li>â€¢ Automatic tool selection and execution</li>\n                  <li>â€¢ Context-aware processing workflows</li>\n                </ul>\n              </div>\n              <div>\n                <h4 className=\"font-medium text-foreground mb-2\">MCP Protocol Benefits</h4>\n                <ul className=\"space-y-1\">\n                  <li>â€¢ Standardized tool and resource access</li>\n                  <li>â€¢ Seamless integration with external systems</li>\n                  <li>â€¢ Efficient data exchange and processing</li>\n                  <li>â€¢ Scalable architecture for AI workflows</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}","size_bytes":4832}},"version":1}